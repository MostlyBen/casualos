{"version":2,"updates":[{"id":0,"timestamp":1680555822734,"update":"AeEB66al1gIAJwEEYm90cyQxMDE0MjU0Ni04YzM0LTRiZDYtYWQzNi0wYTE0NjE3OTNkMDkBKADrpqXWAgAKbWF4VmVyc2lvbgF+JwDrpqXWAgAEYWJJRAIEAOumpdYCAhRhYnJ3X3Rlc3RfZXhwZXJpZW5jZSgA66al1gIABWxhYmVsAX4oAOumpdYCABFlZ2dWZXJzaW9uSGlzdG9yeQF+JwDrpqXWAgAQZWdnRm9ybWF0VmVyc2lvbgIEAOumpdYCGSQwMTcwZDhiYS0xN2MwLTQyYzYtODBlOS0yYjE1ZDNjZDc1YzcoAOumpdYCAA10YXJnZXRWZXJzaW9uAX0BKADrpqXWAgAMaW5pdGlhbFRpbWVyAX4nAOumpdYCAAdtYW5hZ2VyAgQA66al1gJAKPCflJdkODM3MTQ0NC05MTU4LTQ0MzYtOGZjNy04NGNjOTFiN2Y1MjUnAOumpdYCAAdvbkNsaWNrAgQA66al1gJnJUAgbGlua3MubWFuYWdlci5pbnRlcmFjdE92byh0aGlzQm90KTsnAOumpdYCAAhvbkNyZWF0ZQIEAOumpdYCjQG3A0Bjb25zdCB0YXJnZXRBQiA9IGF3YWl0IG9zLnNob3dJbnB1dCgnYWInLCB7CiAgICB0aXRsZTogJ2FiIG5hbWUnCn0pOwoKaWYgKCF0YXJnZXRBQiB8fCB0YXJnZXRBQiA9PSAiYWIiKQp7CiAgICBvcy50b2FzdCgibm8gdmFsaWQgYWIgZ2l2ZW4iKTsKCiAgICBkZXN0cm95KHRoaXNCb3QpOwoKICAgIHJldHVybjsKfQoKY29uc3QgZ2V0UmVjb3JkID0gYXdhaXQgb3MuZ2V0RGF0YShsaW5rcy5yZW1lbWJlci50YWdzLmFiMVJlY29yZEtleSwgdGFyZ2V0QUIsIGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxRW5kcG9pbnQpOwoKaWYgKCFnZXRSZWNvcmQuc3VjY2VzcykKewogICAgb3MudG9hc3QoIm5vIGFiIGZvdW5kIHdpdGggdGhhdCBuYW1lIik7CgogICAgZGVzdHJveSh0aGlzQm90KTsKCiAgICByZXR1cm47Cn0KCmFwcGx5TW9kKHRoaXNCb3QsIGdldFJlY29yZC5kYXRhKTsnAOumpdYCAARmb3JtAgQA66al1gLFBANlZ2cnAOumpdYCABBwcm9ncmVzc0JhckNvbG9yAgQA66al1gLJBAcjQkY1RTY2JwDrpqXWAgAacHJvZ3Jlc3NCYXJCYWNrZ3JvdW5kQ29sb3ICBADrpqXWAtEEByM1OTI5ODkoAOumpdYCAAlsYWJlbFNpemUBfD8AAAAnAOumpdYCAApsYWJlbENvbG9yAgQA66al1gLaBAcjNDA0MDQwJwDrpqXWAgAOb25Qb2ludGVyRW50ZXICBADrpqXWAuIEL0Bvcy50b2FzdCh0YWdzLmFiSUQgKyAnIHYnK3RhZ3MudGFyZ2V0VmVyc2lvbik7JwDrpqXWAgANbGFiZWxQb3NpdGlvbgIEAOumpdYCkgUFZnJvbnQnAOumpdYCAA9vcmllbnRhdGlvbk1vZGUCBADrpqXWApgFDmJpbGxib2FyZEZyb250JwDrpqXWAgAJb25EZXN0cm95AgQA66al1gKnBSNAbGlua3MubWFuYWdlci5tYXNrcy5vdm9Cb3QgPSBudWxsOygA66al1gIACGVnZ1RpbWVyAX4oAOumpdYCAARob21lAX4oAOumpdYCAAVob21lWAF+KADrpqXWAgAFaG9tZVkBficA66al1gIACWRpbWVuc2lvbgIEAOumpdYCzwUEaG9tZSgA66al1gIACmFiSURPcmlnaW4BfigA66al1gIAC3Byb2dyZXNzQmFyAX4nAOumpdYCAAZzeXN0ZW0CBADrpqXWAtYFEGFiLTEuZmFjdG9yeS5lZ2cnAOumpdYCAAlsaXN0ZW5pbmcCBADrpqXWAucFBWZhbHNlJwDrpqXWAgAKYWIxRmFjdG9yeQIEAOumpdYC7QUEdHJ1ZSgA66al1gIACGFiMUlnb3JlAX4nAOumpdYCAAlhYjFJZ25vcmUCBADrpqXWAvMFBHRydWUnAOumpdYCAAhyZW1lbWJlcgIEAOumpdYC+AUo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycA66al1gIAC2ZhY3RvcnlJY29uAgQA66al1gKfBgNlZ2cnAOumpdYCAAVjb2xvcgIEAOumpdYCowYHI0ZGRkZGRigA66al1gIADWFiMUJvdFZlcnNpb24BfQQnAQRib3RzJDE0ZTFmZGFjLWNmZDctNGU3ZS1iZGQxLTk2N2E0MDg1YTc1NQEnAOumpdYCrAYGc3lzdGVtAgQA66al1gKtBhRhYi0xLmZhY3RvcnkubWFuYWdlcicA66al1gKsBgRmb3JtAgQA66al1gLCBgdub3RoaW5nJwDrpqXWAqwGCWFiMUlnbm9yZQIEAOumpdYCygYEdHJ1ZScA66al1gKsBg9hYjFBZGRUb0ZhY3RvcnkCBADrpqXWAs8GjgZALy9zaG91dCgiYWIxQWRkVG9GYWN0b3J5Iiwge2RpbWVuc2lvbjogZGltZW5zaW9uLCBib3Q6IGJvdCwgZmFjdG9yeUlEOiBmYWN0b3J5SUR9KTsKbGV0IGZhY3RvcnlJRDsKCmlmICh0aGF0LmZhY3RvcnlJRCkKewogICAgZmFjdG9yeUlEID0gdGhhdC5mYWN0b3J5SUQ7Cn0KZWxzZQp7CiAgICBmYWN0b3J5SUQgPSBhd2FpdCBvcy5zaG93SW5wdXQobnVsbCwgewogICAgICAgIHRpdGxlOiAnQWRkIGZhY3RvcnkgaWQnCiAgICB9KTsKfQoKaWYgKGZhY3RvcnlJRCkKewogICAgbGV0IHByZXZpb3VzRmFjdG9yeUJvdCA9IGdldEJvdCgic3lzdGVtIiwgImFiLTEuZmFjdG9yeS4iICsgZmFjdG9yeUlEKTsKICAgIAogICAgaWYocHJldmlvdXNGYWN0b3J5Qm90KQogICAgewogICAgICAgIGRlc3Ryb3kocHJldmlvdXNGYWN0b3J5Qm90KTsKICAgIH0KCiAgICBsZXQgdGVtcGxhdGVCb3QgPSB0aGF0LmJvdDsKICAgIGxldCBmYWN0b3J5TW9kID0ge307CgogICAgZmFjdG9yeU1vZFt0aGF0LmRpbWVuc2lvbl0gPSBudWxsOwogICAgZmFjdG9yeU1vZC5zeXN0ZW0gPSAiYWItMS5mYWN0b3J5LiIgKyBmYWN0b3J5SUQ7CiAgICBmYWN0b3J5TW9kLmxpc3RlbmluZyA9IGZhbHNlOwogICAgZmFjdG9yeU1vZC5hYjFGYWN0b3J5ID0gdHJ1ZTsKCiAgICBjcmVhdGUodGVtcGxhdGVCb3QsIGZhY3RvcnlNb2QpOwoKICAgIGFiMS5sb2coZmFjdG9yeUlEICsgIiBhZGRlZCB0byBmYWN0b3J5Iik7CgogICAgb3MudG9hc3QoImFkZGVkICIgKyBmYWN0b3J5SUQgKyAiIHRvIGZhY3RvcnkiKTsKfScA66al1gKsBgphYjFGYWN0b3J5AgQA66al1gLeDAR0cnVlJwDrpqXWAqwGEGFiMUJvdE1lbnVBY3Rpb24CBADrpqXWAuMMuwFAY29uc3QgY3VycmVudERpbSA9IGxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWIxQm90LnRhZ3MuZGltZW5zaW9uOwpjb25zdCB0YXJnZXRCb3QgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYjFCb3RGb2N1czsKCnRoaXNCb3QuYWIxQWRkVG9GYWN0b3J5KHtkaW1lbnNpb246IGN1cnJlbnREaW0sIGJvdDogdGFyZ2V0Qm90fSk7JwDrpqXWAqwGFGFiMUNyZWF0ZUZyb21GYWN0b3J5AgQA66al1gKfDp8GQC8vc2hvdXQoImFiMUNyZWF0ZUZyb21GYWN0b3J5Iiwge2ZhY3RvcnlJRDogImZhY3RvcnlJRCIsIHBvc2l0aW9uOiB7ZGltZW5zaW9uOiAiZGltZW5zaW9uIiwgeDogIngiLCB5OiAieSJ9fSk7CmxldCBmdWxsTmFtZSA9ICJhYi0xLmZhY3RvcnkuIiArIHRoYXQuZmFjdG9yeUlEOwpsZXQgZmFjdG9yeVRlbXBsYXRlID0gZ2V0TW9kKGdldEJvdCgnc3lzdGVtJywgZnVsbE5hbWUpKTsKbGV0IHBvc2l0aW9uSW5mbyA9IHRoYXQucG9zaXRpb247CgppZighZmFjdG9yeVRlbXBsYXRlKQp7CiAgICBjb25zb2xlLmxvZygibm90IGZhY3RvcnkgYm90IGZvdW5kIik7CgogICAgYWIxLmxvZyhmdWxsTmFtZSArICIgY291bGQgbm90IGJlIGZvdW5kIikKCiAgICByZXR1cm47Cn0KCmFiMS5sb2coZnVsbE5hbWUgKyAiIGNyZWF0ZWQgZnJvbSBmYWN0b3J5Iik7CgpsZXQgbmV3Qm90ID0ge30KCm5ld0JvdC5jcmVhdG9yID0gbnVsbDsKbmV3Qm90W3Bvc2l0aW9uSW5mby5kaW1lbnNpb25dID0gdHJ1ZTsKbmV3Qm90W3Bvc2l0aW9uSW5mby5kaW1lbnNpb24gKyAiWCJdID0gcG9zaXRpb25JbmZvLnBvc2l0aW9uLng7Cm5ld0JvdFtwb3NpdGlvbkluZm8uZGltZW5zaW9uICsgIlkiXSA9IHBvc2l0aW9uSW5mby5wb3NpdGlvbi55OwpuZXdCb3QubGlzdGVuaW5nID0gbnVsbDsKbmV3Qm90LmFiMUlnbm9yZSA9IG51bGw7Cm5ld0JvdC5zeXN0ZW0gPSBudWxsOwpuZXdCb3QuYWIxRmFjdG9yeSA9IG51bGw7CgpjcmVhdGUoZmFjdG9yeVRlbXBsYXRlLCBuZXdCb3QpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYjFDbGljaygpOycA66al1gKsBhFhYjFHcmlkTWVudUFjdGlvbgIEAOumpdYCvxSZCEBzaG91dCgiYWIxTWVudVJlZnJlc2giKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiMU1lbnUiOwoKbGlua3MubWVudS5tYXNrcy5vbkdyaWRDbGljayA9ICJAIHNob3V0KCdhYjFNZW51UmVmcmVzaCcpOyBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7IjsKCmNvbnN0IGZhY3RvcnlCb3RzID0gZ2V0Qm90cygiYWIxRmFjdG9yeSIpOwpjb25zdCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLmFiMU1lbnUgPSB0cnVlOwptZW51QnV0dG9uLmFiMU1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwptZW51QnV0dG9uLmdyaWRJbmZvcm1hdGlvbiA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzOwptZW51QnV0dG9uLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwptZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLmFiMUNyZWF0ZUZyb21GYWN0b3J5KHtmYWN0b3J5SUQ6IHRhZ3MubGFiZWwsIHBvc2l0aW9uOiB0YWdzLmdyaWRJbmZvcm1hdGlvbn0pOyBzaG91dCgnYWIxTWVudVJlZnJlc2gnKTtgOwoKaWYgKGZhY3RvcnlCb3RzLmxlbmd0aCA8IDIpCnsKICAgIHJldHVybjsgCn0KCmZvciAobGV0IGogPSAwOyBqIDwgZmFjdG9yeUJvdHMubGVuZ3RoOyBqKyspIAp7CiAgICBsZXQgY3VycmVudEZhY3RvcnlCb3QgPSBmYWN0b3J5Qm90c1tqXTsKICAgIGxldCBjdXJyZW50U3lzdGVtVGFnID0gY3VycmVudEZhY3RvcnlCb3QudGFncy5zeXN0ZW07CgogICAgaWYgKGN1cnJlbnRTeXN0ZW1UYWcgPT0gdGFncy5zeXN0ZW0pCiAgICB7CiAgICAgICAgY29udGludWU7CiAgICB9CgogICAgbWVudUJ1dHRvbi5sYWJlbCA9IGN1cnJlbnRTeXN0ZW1UYWcuc3Vic3RyaW5nKDEzKTsKICAgIG1lbnVCdXR0b24uY29sb3IgPSBjdXJyZW50RmFjdG9yeUJvdC50YWdzLmNvbG9yOwogICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9IGN1cnJlbnRGYWN0b3J5Qm90LnRhZ3MuZmFjdG9yeUljb247CgogICAgbGlua3MubWVudS5hYjFDcmVhdGVNZW51QnV0dG9uKG1lbnVCdXR0b24pOwp9JwDrpqXWAqwGDW1hbmlmZXN0YXRpb24CBADrpqXWAtccKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAOumpdYCrAYIcmVtZW1iZXICBADrpqXWAv4cKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAOumpdYCrAYEbWVudQIEAOumpdYCpR0o8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicA66al1gKsBhBhYjFHcmlkTWVudUxhYmVsAgQA66al1gLMHQd0b29sYm94JwDrpqXWAqwGD2FiMUdyaWRNZW51SWNvbgIEAOumpdYC1B0MY29uc3RydWN0aW9uJwDrpqXWAqwGFGFiMUdyaWRNZW51U29ydE9yZGVyAgQA66al1gLhHQEzJwDrpqXWAqwGDmFiMUJvdE1lbnVJY29uAgQA66al1gLjHQxjb25zdHJ1Y3Rpb24nAOumpdYCrAYPYWIxQm90TWVudUxhYmVsAgQA66al1gLwHQ5hZGQgdG8gdG9vbGJveCcA66al1gKsBhNhYjFCb3RNZW51U29ydE9yZGVyAgQA66al1gL/HQEzJwDrpqXWAqwGD2FiMUJvdE1lbnVDb2xvcgIEAOumpdYCgR4HIzU1RTY3OScA66al1gKsBhBhYjFHcmlkTWVudUNvbG9yAgQA66al1gKJHgcjNTVFNjc5KADrpqXWAqwGDWFiMUJvdFZlcnNpb24BfQonAQRib3RzJGE1ZTJlZWRmLWNkMTctNGJmOC1hOTg2LWRkODJhYTFmZDg1OAEnAOumpdYCkh4FY29sb3ICBADrpqXWApMeByM2MjI3NzMnAOumpdYCkh4EZm9ybQIEAOumpdYCmx4FaGVsaXgnAOumpdYCkh4EbW9kcwIEAOumpdYCoR4Y8J+nrHsiY29sb3IiOiAiIzYyMjc3MyJ9JwDrpqXWApIeBnN5c3RlbQIEAOumpdYCuB4QYWItMS5mYWN0b3J5Lm1vZCcA66al1gKSHgphYjFGYWN0b3J5AgQA66al1gLJHgR0cnVlJwDrpqXWApIeCWFiMUlnbm9yZQIEAOumpdYCzh4EdHJ1ZScA66al1gKSHglsaXN0ZW5pbmcCBADrpqXWAtMeBWZhbHNlJwDrpqXWApIeC2ZhY3RvcnlJY29uAgQA66al1gLZHgVoZWxpeCcA66al1gKSHgt0b29sTWFuYWdlcgIEAOumpdYC3x4o8J+UlzE0ZTFmZGFjLWNmZDctNGU3ZS1iZGQxLTk2N2E0MDg1YTc1NScA66al1gKSHgdvbkNsaWNrAgQA66al1gKGH5MGQHNob3V0KCJtb2RNZW51UmVzZXQiKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gIm1vZE1lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgibW9kTWVudVJlc2V0Iik7YDsKbWFza3MubW9kTWVudVJlc2V0ID0gYEAgY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSBudWxsOwpjb25maWdCb3QubWFza3MudGFnUG9ydGFsID0gbnVsbDsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3IgPSBudWxsOwoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTtgOwoKbGV0IG1vZE1lbnVCb3QgPSB7fTsKCm1vZE1lbnVCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKbW9kTWVudUJvdC5tb2RNZW51ID0gdHJ1ZTsKbW9kTWVudUJvdC5sYWJlbCA9ICJlZGl0IG1vZCI7Cm1vZE1lbnVCb3QuZm9ybUFkZHJlc3MgPSAiZWRpdCI7Cm1vZE1lbnVCb3QuY29sb3IgPSB0YWdzLmNvbG9yOwptb2RNZW51Qm90Lm1vZERpbWVuc2lvbiA9IHRoaXNCb3QuaWQgKyAiLm1vZHMiOwptb2RNZW51Qm90Lm1vZE1lbnVSZXNldCA9IGBAIGRlc3Ryb3kodGhpc0JvdCk7YDsKbW9kTWVudUJvdC5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbW9kTWVudUJvdC5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKCmNvbmZpZ0JvdC5tYXNrcy50YWdQb3J0YWwgPSB0YWdzLm1vZERpbWVuc2lvbjsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3JQb2ludCA9ICJ0b3AiOwpgOwoKY3JlYXRlKG1vZE1lbnVCb3QpOycA66al1gKSHgZvbkRyb3ACBADrpqXWApol6gJAaWYgKHRoYXQuZHJhZ0JvdCAhPSB0aGlzQm90IHx8IHRoYXQudG8uYm90LnRhZ3MuYWIxRmFjdG9yeSkKewogICAgcmV0dXJuOwp9CgphcHBseU1vZCh0aGF0LnRvLmJvdCwgdGFncy5tb2RzKTsKCmxldCBwcmV2aW9pdXNEaW1lbnNpb24gPSB0aGF0LmZyb20uZGltZW5zaW9uOwoKdGFnc1t0aGF0LnRvLmRpbWVuc2lvbl0gPSBudWxsOwp0YWdzW3ByZXZpb2l1c0RpbWVuc2lvbl0gPSB0cnVlOwp0YWdzW3ByZXZpb2l1c0RpbWVuc2lvbiArICJYIl0gPSB0aGF0LmZyb20ueDsKdGFnc1twcmV2aW9pdXNEaW1lbnNpb24gKyAiWSJdID0gdGhhdC5mcm9tLnk7CnRhZ3NbcHJldmlvaXVzRGltZW5zaW9uICsgIloiXSA9IHRoYXQuZnJvbS56OygA66al1gKSHg1hYjFCb3RWZXJzaW9uAX0EKADrpqXWApIeCGFiMUlnb3JlAX4nAQRib3RzJGM0NGViYzdmLTNkZjctNGU4ZS05NzgxLTE0ZTJjZThlMzRjOAEnAOumpdYChygLZmFjdG9yeUljb24CBADrpqXWAogoC2ludmVudG9yeV8yJwDrpqXWAocoBWNvbG9yAgQA66al1gKUKAcjOTA4QkZDKADrpqXWAocoDWFiMUJvdFZlcnNpb24BfQknAOumpdYChygEZm9ybQIEAOumpdYCnSgGY2lyY2xlKADrpqXWAocoBXNjYWxlAX0CJwDrpqXWAocoC3Rvb2xNYW5hZ2VyAgQA66al1gKlKCjwn5SXMTRlMWZkYWMtY2ZkNy00ZTdlLWJkZDEtOTY3YTQwODVhNzU1KADrpqXWAocoBGhvbWUBfigA66al1gKHKAVob21lWQF+KADrpqXWAocoBWhvbWVaAX4nAOumpdYChygGc2NhbGVaAgQA66al1gLPKAMwLjEoAOumpdYChygFaG9tZVgBficA66al1gKHKAZzeXN0ZW0CBADrpqXWAtQoFWFiLTEuZmFjdG9yeS5ib3RTdG9yZScA66al1gKHKAZvbkRyb3ACBADrpqXWAuoof0BpZiAodGhhdC5kcmFnQm90ID09IHRoaXNCb3QgfHwgdGhhdC5kcmFnQm90LnRhZ3Muc3BhY2UgIT0gInNoYXJlZCIpCnsKICAgIHJldHVybjsKfQoKdGhpc0JvdFt0YWdzLnN0b3JlTW9kZSArICJPbkRyb3AiXSh0aGF0KTsnAOumpdYChygRYm90U3RvcmVSZWplY3RCb3QCBADrpqXWAuopigJAdGhhdC5kcmFnQm90LnRhZ3NbdGhhdC50by5kaW1lbnNpb25dID0gbnVsbDsKdGhhdC5kcmFnQm90LnRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbl0gPSB0cnVlOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uKyJYIl0gPSB0aGF0LmZyb20ueDsKdGhhdC5kcmFnQm90LnRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbisiWSJdID0gdGhhdC5mcm9tLnk7CnRoYXQuZHJhZ0JvdC50YWdzW3RoYXQuZnJvbS5kaW1lbnNpb24rIloiXSA9IHRoYXQuZnJvbS56OygA66al1gKHKAhvbkNyZWF0ZQF+JwDrpqXWAocoCXN0b3JlTW9kZQIEAOumpdYC9isJdW5saW1pdGVkJwDrpqXWAocoD3VubGltaXRlZE9uRHJvcAIEAOumpdYCgCxlQGlmICh0YWdzLnRlbXBsYXRlKQp7CiAgICB0aGlzQm90LmJvdFN0b3JlUmVqZWN0Qm90KHRoYXQpOwoKICAgIHJldHVybjsKfQoKdGhpc0JvdC5hZGRUZW1wbGF0ZSh0aGF0KTsnAOumpdYChygNbGltaXRlZE9uRHJvcAIEAOumpdYC5iyJAkBpZiAoKHRhZ3MuYm90U3RvcmVJRCAmJiB0aGF0LmRyYWdCb3QudGFncy5ib3RTdG9yZUlEICE9IHRhZ3MuYm90U3RvcmVJRCkgfHwgdGFncy5tYXhDb3VudCA9PSB0YWdzLmxhYmVsKQp7CiAgICB0aGlzQm90LmJvdFN0b3JlUmVqZWN0Qm90KHRoYXQpOwoKICAgIHJldHVybjsKfQoKdGFncy5sYWJlbCsrOwoKaWYgKHRhZ3MudGVtcGxhdGUpCnsKICAgIGRlc3Ryb3kodGhhdC5kcmFnQm90KTsKfQplbHNlCnsKICAgIHRoaXNCb3QuYWRkVGVtcGxhdGUodGhhdCk7Cn0nAOumpdYChygLYWRkVGVtcGxhdGUCBADrpqXWAvAu4wtAdGFncy50ZW1wbGF0ZSA9IGdldExpbmsodGhhdC5kcmFnQm90KTsKCnRoYXQuZHJhZ0JvdC50YWdzLmxpc3RlbmluZyA9IGZhbHNlOwp0aGF0LmRyYWdCb3QudGFncy5wb2ludGFibGUgPSBmYWxzZTsKdGhhdC5kcmFnQm90LnRhZ3MudHJhbnNmb3JtZXIgPSB0aGlzQm90LmlkOwp0aGF0LmRyYWdCb3QudGFncy5jcmVhdG9yID0gdGhpc0JvdC5pZDsKdGhhdC5kcmFnQm90LnRhZ3MudHJhbnNmb3JtZXIgPSB0aGlzQm90LmlkOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJYIl0gPSAwOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJZIl0gPSAwOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJaIl0gPSA1Owp0aGF0LmRyYWdCb3QudGFncy5zY2FsZSA9IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlID8gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGUgLyAyIDogMC41Owp0aGF0LmRyYWdCb3QudGFncy5zY2FsZVggPSB0aGF0LmRyYWdCb3QudGFncy5zY2FsZVggPyB0aGF0LmRyYWdCb3QudGFncy5zY2FsZVggLyAyIDogMTsKdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVZID0gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVZID8gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVZIC8gMiA6IDE7CnRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWiA9IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWiA/IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWiAqIDEwIDogMTA7CgppZiAodGFncy5zdG9yZU1vZGUgPT0gImxpbWl0ZWQiKQp7CiAgICBsZXQgbmV3U3RvcmVJRCA9IHV1aWQoKTsKCiAgICB0YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwoKICAgIHRoYXQuZHJhZ0JvdC50YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwp9CgpsZXQgaGl0Qm94ID0ge307CgpoaXRCb3gudHJhbnNmb3JtZXIgPSB0aGlzQm90LmlkOwpoaXRCb3guY29sb3IgPSAiY2xlYXIiOwpoaXRCb3guZHJhZ2dhYmxlID0gZmFsc2U7CmhpdEJveC5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKaGl0Qm94Lm9uRHJhZyA9IGBAIGxpbmtzLm1hbmFnZXIudGVtcGxhdGVEcmFnKHRoYXQpO2A7CmhpdEJveC5zY2FsZSA9IGxpbmtzLnRlbXBsYXRlLnRhZ3Muc2NhbGU7CmhpdEJveC5zY2FsZVggPSBsaW5rcy50ZW1wbGF0ZS50YWdzLnNjYWxlWDsKaGl0Qm94LnNjYWxlWSA9IGxpbmtzLnRlbXBsYXRlLnRhZ3Muc2NhbGVZOwpoaXRCb3guc2NhbGVaID0gbGlua3MudGVtcGxhdGUudGFncy5zY2FsZVo7CmhpdEJveFt0aGF0LnRvLmRpbWVuc2lvbl0gPSB0cnVlOwpoaXRCb3hbdGhhdC50by5kaW1lbnNpb24gKyAiWCJdID0gMDsKaGl0Qm94W3RoYXQudG8uZGltZW5zaW9uICsgIlkiXSA9IDA7CmhpdEJveFt0aGF0LnRvLmRpbWVuc2lvbiArICJaIl0gPSA1OwoKbGV0IG5ld0hpdGJveCA9IGNyZWF0ZShoaXRCb3gpOwoKbGlua3MuaGl0Qm94ID0gZ2V0TGluayhuZXdIaXRib3gpOwoKdGhpc0JvdC5pbml0aWF0ZUJvdFN0b3JlQW5pbWF0aW9uKCk7JwDrpqXWAocoB29uQ2xpY2sCBADrpqXWAtQ6/ApAc2hvdXQoImJvdFN0b3JlTWVudVJlc2V0Iik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJib3RTdG9yZU1lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgiYm90U3RvcmVNZW51UmVzZXQiKTtgOwptYXNrcy5ib3RTdG9yZU1lbnVSZXNldCA9IGBAIGNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gbnVsbDsKCmNsZWFyVGFnTWFza3ModGhpc0JvdCk7YDsKCmxldCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lbnVCdXR0b24uYm90U3RvcmVNZW51ID0gdHJ1ZTsKbWVudUJ1dHRvbi5ib3RTdG9yZU1lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbWVudUJ1dHRvbi5jb2xvciA9IHRhZ3MuY29sb3I7Cm1lbnVCdXR0b24ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7Cm1lbnVCdXR0b24ub25DbGljayA9IGBAIHNob3V0KCJib3RTdG9yZU1lbnVSZXNldCIpOwogICAgCmxpbmtzLm1hbmFnZXIuY2hhbmdlU3RvcmVTdGF0ZSgpO2A7CgppZiAodGFncy5zdG9yZU1vZGUgPT0gInVubGltaXRlZCIpCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiaW52ZW50b3J5IjsKICAgIG1lbnVCdXR0b24ubGFiZWwgPSAiY2hhbmdlIHRvIGxpbWl0ZWQiOwoKICAgIGNyZWF0ZShtZW51QnV0dG9uKTsKfQplbHNlCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiZmlsZV9jb3B5IjsKICAgIG1lbnVCdXR0b24ubGFiZWwgPSAiY2hhbmdlIHRvIHVubGltaXRlZCI7CgogICAgY3JlYXRlKG1lbnVCdXR0b24pOwoKICAgIG1lbnVCdXR0b24ubGFiZWwgPSAiICAgICI7CiAgICBtZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImNlbnRlciI7CiAgICBtZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLnRhZ3MudGVtcGxhdGVMb2NrID0gIWxpbmtzLm1hbmFnZXIudGFncy50ZW1wbGF0ZUxvY2sKICAgIAogICAgaWYgKGxpbmtzLm1hbmFnZXIudGFncy50ZW1wbGF0ZUxvY2spCiAgICB7CiAgICAgICAgdGFncy5mb3JtQWRkcmVzcyA9ICJsb2NrIjsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICB0YWdzLmZvcm1BZGRyZXNzID0gImxvY2tfb3BlbiI7CiAgICB9YDsKCiAgICBpZiAodGFncy50ZW1wbGF0ZUxvY2spCiAgICB7CiAgICAgICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJsb2NrIjsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBtZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImxvY2tfb3BlbiI7CiAgICB9CgogICAgY3JlYXRlKG1lbnVCdXR0b24pOwp9CgonAOumpdYChygMdGVtcGxhdGVEcmFnAgQA66al1gLRRYEHQGlmICh0YWdzLnN0b3JlTW9kZSA9PSAibGltaXRlZCIpCnsKICAgIGlmICh0YWdzLmxhYmVsID09IDApCiAgICB7CiAgICAgICAgcmV0dXJuOwogICAgfQp9CgpsZXQgbmV3Qm90ID0gZ2V0TW9kKGxpbmtzLnRlbXBsYXRlKTsKCm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uXSA9IHRydWU7Cm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uICsgIlgiXSA9IHRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbiArICJYIl07Cm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uICsgIlkiXSA9IHRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbiArICJZIl07Cm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uICsgIloiXSA9IDA7Cm5ld0JvdC5saXN0ZW5pbmcgPSBudWxsOwpuZXdCb3QucG9pbnRhYmxlID0gbnVsbDsKbmV3Qm90LnRyYW5zZm9ybWVyID0gbnVsbDsKbmV3Qm90LmNyZWF0b3IgPSBudWxsOwpuZXdCb3QudHJhbnNmb3JtZXIgPSBudWxsOwpuZXdCb3Quc2NhbGUgPSBuZXdCb3Quc2NhbGUgPT0gMC41ID8gbnVsbCA6IG5ld0JvdC5zY2FsZSAqIDI7Cm5ld0JvdC5zY2FsZVggPSBuZXdCb3Quc2NhbGVYID09IDEgPyBudWxsIDogbmV3Qm90LnNjYWxlWCAqIDI7Cm5ld0JvdC5zY2FsZVkgPSBuZXdCb3Quc2NhbGVZID09IDEgPyBudWxsIDogbmV3Qm90LnNjYWxlWSAqIDI7Cm5ld0JvdC5zY2FsZVogPSBuZXdCb3Quc2NhbGVaID09IDEwID8gbnVsbCA6IG5ld0JvdC5zY2FsZVogLyAxMDsKbmV3Qm90LmJvdFN0b3JlSUQgPSB0YWdzLmJvdFN0b3JlSUQ7CgpsZXQgY3JlYXRlZEJvdCA9IGNyZWF0ZShuZXdCb3QpOwoKb3MucmVwbGFjZURyYWdCb3QoY3JlYXRlZEJvdCk7CgppZiAodGFncy5zdG9yZU1vZGUgPT0gImxpbWl0ZWQiKQp7CiAgICB0aGlzQm90LnJlZHVjZUxpbWl0ZWRDb3VudCgpOwp9JwDrpqXWAocoEnJlZHVjZUxpbWl0ZWRDb3VudAIEAOumpdYC00yNAkB0YWdzLmxhYmVsLS07CgppZiAodGFncy5sYWJlbCA9PSAwICYmICF0YWdzLnRlbXBsYXRlTG9jaykKewogICAgY2xlYXJJbnRlcnZhbCh0YWdzLnN0b3JlSW50ZXJ2YWwpOwoKICAgIGRlc3Ryb3kobGlua3MudGVtcGxhdGUpOwogICAgZGVzdHJveShsaW5rcy5oaXRCb3gpOwoKICAgIHRhZ3MudGVtcGxhdGUgPSBudWxsOwogICAgdGFncy5oaXRCb3ggPSBudWxsOwogICAgdGFncy5ib3RTdG9yZUlEID0gbnVsbDsKICAgIG1hc2tzLnN0b3JlSW50ZXJ2YWwgPSBudWxsOwp9JwDrpqXWAocoCmFiMUZhY3RvcnkCBADrpqXWAuFOBHRydWUnAOumpdYChygJYWIxSWdub3JlAgQA66al1gLmTgR0cnVlJwDrpqXWAocoCWxpc3RlbmluZwIEAOumpdYC604FZmFsc2UnAOumpdYChygQY2hhbmdlU3RvcmVTdGF0ZQIEAOumpdYC8U7tBEBpZiAodGFncy5zdG9yZU1vZGUgPT0gInVubGltaXRlZCIpCnsKICAgIHRhZ3Muc3RvcmVNb2RlID0gImxpbWl0ZWQiOwoKICAgIGNvbnN0IG1heENvdW50ID0gYXdhaXQgb3Muc2hvd0lucHV0KDEsIHsKICAgICAgICB0aXRsZTogJ2Nob29zZSBtYXgnCiAgICB9KTsKCiAgICBpZiAoIW1heENvdW50KQogICAgewogICAgICAgIG1heENvdW50ID0gMTsKICAgIH0KCiAgICB0YWdzLm1heENvdW50ID0gbWF4Q291bnQ7CgogICAgaWYgKHRhZ3MudGVtcGxhdGUpCiAgICB7CiAgICAgICAgbGV0IG5ld1N0b3JlSUQgPSB1dWlkKCk7CgogICAgICAgIHRhZ3MuYm90U3RvcmVJRCA9IG5ld1N0b3JlSUQ7CgogICAgICAgIGxpbmtzLnRlbXBsYXRlLnRhZ3MuYm90U3RvcmVJRCA9IG5ld1N0b3JlSUQ7CgogICAgICAgIHRhZ3MubGFiZWwgPSAxOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIHRhZ3MubGFiZWwgPSAwOwogICAgfQp9CmVsc2UKewogICAgdGFncy5zdG9yZU1vZGUgPSAidW5saW1pdGVkIjsKCiAgICB0YWdzLmxhYmVsID0gbnVsbDsKICAgIHRhZ3MubWF4Q291bnQgPSBudWxsOwogICAgdGFncy50ZW1wbGF0ZUxvY2sgPSBudWxsOwogICAgdGFncy5ib3RTdG9yZUlEID0gbnVsbDsKfScA66al1gKHKBlpbml0aWF0ZUJvdFN0b3JlQW5pbWF0aW9uAgQA66al1gLfU4sBQGlmICghdGFncy5zdG9yZUludGVydmFsKQp7CiAgICB0aGlzQm90LmFuaW1hdGVCb3RTdG9yZSgpOwoKICAgIG1hc2tzLnN0b3JlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzQm90LmFuaW1hdGVCb3RTdG9yZSgpLCAyMDAwKTsKfScA66al1gKHKA9hbmltYXRlQm90U3RvcmUCBADrpqXWAutUmgJAbGV0IHJvdFogPSBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsICsgIlJvdGF0aW9uWiI7CmxldCB0YXJnZXRSb3RhdGlvbiA9IDM2MCAqIE1hdGguUEkvMTgwOwoKYXdhaXQgYW5pbWF0ZVRhZyhsaW5rcy50ZW1wbGF0ZSwgcm90WiwgewogICAgZnJvbVZhbHVlOiAwLAogICAgdG9WYWx1ZTogdGFyZ2V0Um90YXRpb24sCiAgICBlYXNpbmc6ewogICAgICAgIG1vZGU6ICJpbm91dCIsCiAgICAgICAgdHlwZTogImxpbmVhciIKICAgIH0sCiAgICBkdXJhdGlvbjogMgp9KS5jYXRjaChlID0+IHt9KTsnAOumpdYChygPb25JbnN0U3RyZWFtaW5nAgQA66al1gKGV0BAaWYgKHRhZ3MudGVtcGxhdGUpCnsKICAgIHRoaXNCb3QuaW5pdGlhdGVCb3RTdG9yZUFuaW1hdGlvbigpOwp9JwDrpqXWAocoCW9uRGVzdHJveQIEAOumpdYCx1cjQGNsZWFySW50ZXJ2YWwodGFncy5zdG9yZUludGVydmFsKTsnAQRib3RzJGQxNDAyMDRjLTU1YzctNGVjMy05MzU0LTkzYWU3NjI2YTgzNgEoAOumpdYC61cGc2NhbGVaAXs/hHrhR64UeygA66al1gLrVwVzY2FsZQF7P+OFHrhR64UnAOumpdYC61cFY29sb3ICBADrpqXWAu5XBGdyYXknAOumpdYC61cLc3Ryb2tlQ29sb3ICBADrpqXWAvNXByM1RTU4ODAnAOumpdYC61cJbGluZUNvbG9yAgQA66al1gL7VwcjNUU1ODgwKADrpqXWAutXCGR1cmF0aW9uAX0BJwDrpqXWAutXCmVhc2luZ1R5cGUCBADrpqXWAoRYBmxpbmVhcicA66al1gLrVwplYXNpbmdNb2RlAgQA66al1gKLWAVpbm91dCcA66al1gLrVwlsaW5lU3R5bGUCBADrpqXWApFYBGxpbmUnAOumpdYC61cGc3lzdGVtAgQA66al1gKWWBJhYi0xLmZhY3RvcnkudHJhY2snAOumpdYC61cKYWIxRmFjdG9yeQIEAOumpdYCqVgEdHJ1ZScA66al1gLrVwlhYjFJZ25vcmUCBADrpqXWAq5YBHRydWUnAOumpdYC61cLdG9vbE1hbmFnZXICBADrpqXWArNYKPCflJcxNGUxZmRhYy1jZmQ3LTRlN2UtYmRkMS05NjdhNDA4NWE3NTUnAOumpdYC61cLZmFjdG9yeUljb24CBADrpqXWAtpYCHRpbWVsaW5lKADrpqXWAutXDWFiMUJvdFZlcnNpb24BfQQnAOumpdYC61cIb25DcmVhdGUCBADrpqXWAuRYb0B0YWdzLmNvbG9yID0gImNsZWFyIjsKCmlmICghdGFncy5saW5lVG8pCnsKICAgIHRoaXNCb3QuYWRkVHJhY2tOb2RlKHtkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWx9KTsKfScA66al1gLrVwxhZGRUcmFja05vZGUCBADrpqXWAtRZ1wVAbGV0IGJvdE1vZCA9IGdldE1vZCh0aGlzQm90KTsKCmJvdE1vZFt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSBib3RNb2RbdGhhdC5kaW1lbnNpb24gKyAiWSJdIC0gMzsKCmJvdE1vZC5saW5lVG8gPSB0aGlzQm90LmlkOwpib3RNb2QuY3JlYXRvciA9IHRoaXNCb3QuaWQ7CgpsZXQgbm9kZTIgPSBjcmVhdGUoYm90TW9kKTsKCnRhZ3MubGluZVRvID0gbm9kZTIuaWQ7CnRhZ3MuY3JlYXRvciA9IG5vZGUyLmlkOwoKbGV0IG5vZGUzID0gY3JlYXRlKGJvdE1vZCk7Cgpib3RNb2RbdGhhdC5kaW1lbnNpb24gKyAiWCJdID0gYm90TW9kW3RoYXQuZGltZW5zaW9uICsgIlgiXSArIDM7CgpsZXQgbm9kZTQgPSBjcmVhdGUoYm90TW9kKTsKCm5vZGUzLnRhZ3MubGluZVRvID0gbm9kZTQuaWQ7Cm5vZGUzLnRhZ3MuY3JlYXRvciA9IG5vZGU0LmlkOwpub2RlNC50YWdzLmxpbmVUbyA9IG5vZGUzLmlkOwpub2RlNC50YWdzLmNyZWF0b3IgPSBub2RlMy5pZDsKCmxldCBub2RlNSA9IGNyZWF0ZShib3RNb2QpOwoKYm90TW9kW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IGJvdE1vZFt0aGF0LmRpbWVuc2lvbiArICJZIl0gLSAzOwoKbGV0IG5vZGU2ID0gY3JlYXRlKGJvdE1vZCk7Cgpub2RlNS50YWdzLmxpbmVUbyA9IG5vZGU2LmlkOwpub2RlNS50YWdzLmNyZWF0b3IgPSBub2RlNi5pZDsKbm9kZTYudGFncy5saW5lVG8gPSBub2RlNS5pZDsKbm9kZTYudGFncy5jcmVhdG9yID0gbm9kZTUuaWQ7JwDrpqXWAutXDGFiMVRyYWNrTm9kZQIEAOumpdYCrF8EdHJ1ZScA66al1gLrVwlsaXN0ZW5pbmcCBADrpqXWArFfBWZhbHNlJwDrpqXWAutXBm9uRHJvcAIEAOumpdYCt1+rA0BpZiAodGhhdC5kcmFnQm90LnRhZ3MuYWIxVHJhY2tOb2RlKQp7CiAgICB0YWdzW2NvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgKyAiWCJdID0gTWF0aC5yb3VuZCh0YWdzW2NvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgKyAiWCJdKTsKICAgIHRhZ3NbY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCArICJZIl0gPSBNYXRoLnJvdW5kKHRhZ3NbY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCArICJZIl0pOwoKICAgIHJldHVybjsKfQoKdGhhdC5kcmFnQm90Lm1hc2tzLm9uRHJhZyA9ICJAIGNsZWFyVGltZW91dCh0YWdzLnRyYWNrVGltZW91dCk7IGNsZWFyQW5pbWF0aW9ucyh0aGlzQm90KTsiOwoKdGhpc0JvdC5hbmltYXRlVHJhY2soe2FuaW1hdGVkQm90OiB0aGF0LmRyYWdCb3QsIHRhcmdldE5vZGU6IGdldEJvdCgiaWQiLCB0YWdzLmxpbmVUbyl9KTsnAOumpdYC61cMYW5pbWF0ZVRyYWNrAgQA66al1gLjYsAMQGxldCBjdXJyZW50RGltID0gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID8gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsIDogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKbGV0IGFuaW1hdGVkQm90ID0gdGhhdC5hbmltYXRlZEJvdDsKbGV0IG5leHROb2RlID0gdGhhdC50YXJnZXROb2RlOwpsZXQgb3JpZ2luTm9kZSA9IHRoaXNCb3Q7CgppZiAobmV4dE5vZGUuaWQgPT0gdGhpc0JvdC5pZCkKewogICAgbGV0IG5vZGVTdGFjayA9IGdldEJvdHMoYnlNb2Qoe2FiMVRyYWNrTm9kZTogdHJ1ZSwgW2N1cnJlbnREaW1dOiB0cnVlLCBbY3VycmVudERpbSArICJYIl06IHRhZ3NbY3VycmVudERpbSArICJYIl0sIFtjdXJyZW50RGltICsgIlkiXTogdGFnc1tjdXJyZW50RGltICsgIlkiXX0pKTsKCiAgICBpZiAobm9kZVN0YWNrLmxlbmd0aCA+PSAzKQogICAgewogICAgICAgIG9yaWdpbk5vZGUgPSBub2RlU3RhY2tbbWF0aC5yYW5kb21JbnQoMCwgbm9kZVN0YWNrLmxlbmd0aCldOwoKICAgICAgICBuZXh0Tm9kZSA9IGdldEJvdCgiaWQiLCBvcmlnaW5Ob2RlLnRhZ3MubGluZVRvKTsKICAgIH0KICAgIGVsc2UgaWYgKG5vZGVTdGFjay5sZW5ndGggPiAxKQogICAgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZVN0YWNrLmxlbmd0aDsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKG5vZGVTdGFja1tpXS5pZCAhPSB0aGlzQm90LmlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBvcmlnaW5Ob2RlID0gbm9kZVN0YWNrW2ldOwoKICAgICAgICAgICAgICAgIG5leHROb2RlID0gZ2V0Qm90KCJpZCIsIG9yaWdpbk5vZGUudGFncy5saW5lVG8pOwoKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgZWxzZQogICAgewogICAgICAgIG5leHROb2RlID0gZ2V0Qm90KCJpZCIsIHRhZ3MubGluZVRvKTsKICAgIH0KfQoKYW5pbWF0ZWRCb3QubWFza3MudHJhY2tUaW1lb3V0ID0gc2V0VGltZW91dCgoKT0+IHdoaXNwZXIobmV4dE5vZGUsICJhbmltYXRlVHJhY2siLCB7YW5pbWF0ZWRCb3Q6IGFuaW1hdGVkQm90LCB0YXJnZXROb2RlOiBuZXh0Tm9kZX0pLCB0YWdzLmR1cmF0aW9uICogMTAwMCk7Cgphd2FpdCBhbmltYXRlVGFnKGFuaW1hdGVkQm90LCB7CiAgICBmcm9tVmFsdWU6IHsKICAgICAgICBbY3VycmVudERpbSArICJYIl06IG9yaWdpbk5vZGUudGFnc1tjdXJyZW50RGltICsgIlgiXSwKICAgICAgICBbY3VycmVudERpbSArICJZIl06IG9yaWdpbk5vZGUudGFnc1tjdXJyZW50RGltICsgIlkiXQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBbY3VycmVudERpbSArICJYIl06IG5leHROb2RlLnRhZ3NbY3VycmVudERpbSArICJYIl0sCiAgICAgICAgW2N1cnJlbnREaW0gKyAiWSJdOiBuZXh0Tm9kZS50YWdzW2N1cnJlbnREaW0gKyAiWSJdCiAgICB9LAogICAgZHVyYXRpb246IHRhZ3MuZHVyYXRpb24sCiAgICBlYXNpbmc6ewogICAgICAgIHR5cGU6IHRhZ3MuZWFzaW5nVHlwZSwKICAgICAgICBtb2RlOiB0YWdzLmVhc2luZ01vZGUKICAgIH0sCiAgICB0YWdNYXNrU3BhY2U6ICJ0ZW1wTG9jYWwiCn0pLmNhdGNoKGUgPT4ge30pOycA66al1gLrVwdvbkNsaWNrAgQA66al1gKkb7AGQHNob3V0KCJhYjFUcmFja01lbnVSZXNldCIpOwoKY29uc3QgbWVudVR5cGUgPSB0aGF0Lm1lbnVUeXBlID8gdGhhdC5tZW51VHlwZSA6ICJiYXNlIjsKY29uc3QgbWVudVRhZyA9IHRhZ3NbbWVudVR5cGUgKyAiQUIxVHJhY2tNZW51Il07Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYjFUcmFja01lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgiYWIxVHJhY2tNZW51UmVzZXQiKTtgOwptYXNrcy5hYjFUcmFja01lbnVSZXNldCA9IGBAIGNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gbnVsbDsKCmNsZWFyVGFnTWFza3ModGhpc0JvdCk7YDsKCmxldCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lbnVCdXR0b24uYWIxVHJhY2tNZW51ID0gdHJ1ZTsKbWVudUJ1dHRvbi5hYjFUcmFja01lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbWVudUJ1dHRvbi5sYWJlbENvbG9yID0gIiNmZmZmZmYiOwptZW51QnV0dG9uLmNvbG9yID0gdGFncy5zdHJva2VDb2xvcjsKbWVudUJ1dHRvbi5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKCmZvciAobGV0IGkgPSAwOyBpIDwgdGFnc1ttZW51VHlwZSArICJBQjFUcmFja01lbnUiXS5sZW5ndGg7IGkrKykKewogICAgY3JlYXRlKG1lbnVCdXR0b24sIHRhZ3NbbWVudVR5cGUgKyAiQUIxVHJhY2tNZW51Il1baV0pOwp9JwDrpqXWAutXEGJhc2VBQjFUcmFja01lbnUCBADrpqXWAtV11QLwn6esW3sib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudXBkYXRlVHJhY2tEdXJhdGlvbigpOyIsICJmb3JtQWRkcmVzcyI6ICJhdl90aW1lciIsICJsYWJlbCI6ICJkdXJhdGlvbiJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLm9uQ2xpY2soe21lbnVUeXBlOiAnZWFzaW5nJ30pOyIsICJmb3JtQWRkcmVzcyI6ICJ0cmVuZGluZ19mbGF0IiwgImxhYmVsIjogImVhc2luZyB0eXBlIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIub25DbGljayh7bWVudVR5cGU6ICdtb2RlJ30pOyIsICJmb3JtQWRkcmVzcyI6ICJ0cmVuZGluZ191cCIsICJsYWJlbCI6ICJlYXNpbmcgbW9kZSJ9XScA66al1gLrVxN1cGRhdGVUcmFja0R1cmF0aW9uAgQA66al1gKpeKMBQHNob3V0KCJhYjFUcmFja01lbnVSZXNldCIpOwoKbGV0IGlucHV0ID0gYXdhaXQgb3Muc2hvd0lucHV0KHRhZ3MuZHVyYXRpb24sIHsKICAgIHRpdGxlOiAiZHVyYXRpb24iCn0pOwoKaWYgKGlucHV0ICYmICFpc05hTihpbnB1dCkpCnsKICAgIHRhZ3MuZHVyYXRpb24gPSBpbnB1dDsKfScA66al1gLrVxJlYXNpbmdBQjFUcmFja01lbnUCBADrpqXWAs159wnwn6esW3sib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiMVRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogImxpbmVhciJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYjFUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJxdWFkcmF0aWMifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiY3ViaWMifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAicXVhcnRpYyJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYjFUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJxdWludGljIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiMVRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogInNpbnVzb2lkYWwifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiZXhwb25lbnRpYWwifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiY2lyY3VsYXIifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiZWxhc3RpYyJ9XScA66al1gLrVxBtb2RlQUIxVHJhY2tNZW51AgQA66al1gLDgwGdA/Cfp6xbeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ01vZGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiaW4ifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ01vZGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWIxVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAib3V0In0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdNb2RlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiMVRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogImlub3V0In1dAA=="}]}