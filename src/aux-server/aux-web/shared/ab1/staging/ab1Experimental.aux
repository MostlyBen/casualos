{"version":2,"updates":[{"id":0,"timestamp":1677787186823,"update":"AVnqmJyiBwAnAQRib3RzJDI0ZDkxMzE2LTk2NDgtNDhmNy05ZGZhLTFlMTNmOWE4ZmY1YwEnAOqYnKIHAAZzeXN0ZW0CBADqmJyiBwEZYWItMS5leHBlcmltZW50YWwuZm9jdXNBUigA6picogcADGFiMUludGVyZmFjZQF+JwDqmJyiBwAEZm9ybQIEAOqYnKIHHAdub3RoaW5nJwDqmJyiBwAPb25BbnlGb2N1c0VudGVyAgQA6picogck1wNAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiMUF3YWtlU3RhdGUgfHwgdGhhdC5ib3QgIT0gbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QgfHwgIWNvbmZpZ0JvdC50YWdzLkFSKQp7CiAgICByZXR1cm47Cn0KCmxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWIxQm90Lm1hc2tzLmxhYmVsQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiMUJhc2VDb2xvcjsKbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QubWFza3MubGFiZWxGb250U2l6ZSA9IDAuNTsKbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QubWFza3MubGFiZWwgPSAibGlzdGVuaW5nIjsKCmlmIChsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiMUJvdC50YWdzLmludGVydmFsKQp7CiAgICBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7IAp9CgpsaW5rcy5zcGVlY2gub25DaGF0KHttZXNzYWdlOiAiQGxpc3RlbiJ9KTsnAOqYnKIHAA5vbkFueUZvY3VzRXhpdAIEAOqYnKIH/AP7AkBpZiAoIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxQXdha2VTdGF0ZSB8fCB0aGF0LmJvdCAhPSBsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiMUJvdCB8fCAhY29uZmlnQm90LnRhZ3MuQVIpCnsKICAgIHJldHVybjsKfQoKbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QubWFza3MubGFiZWxDb2xvciA9IG51bGw7CmxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWIxQm90Lm1hc2tzLmxhYmVsID0gbnVsbDsKCmxpbmtzLnNwZWVjaC5vbkNoYXQoe21lc3NhZ2U6ICJAZWFybXVmZnMifSk7CgppZiAoIWxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWIxQm90LnRhZ3MuaW50ZXJ2YWwpCnsKICAgIGxpbmtzLm1hbmlmZXN0YXRpb24uYWIxQ2xpY2soKTsgCn0nAOqYnKIHAA1tYW5pZmVzdGF0aW9uAgQA6picogf4Bijwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDqmJyiBwAEbWVudQIEAOqYnKIHnwco8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicA6picogcACHJlbWVtYmVyAgQA6picogfGByjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDqmJyiBwAGc3BlZWNoAgQA6picogftByjwn5SXOTlkNzg5NWItNDI4MS00YWM2LWJiOTMtMmUyMzVjMzUzYWFiJwDqmJyiBwARYWIxQ29yZU1lbnVBY3Rpb24CBADqmJyiB5QI/AFAaWYgKGNvbmZpZ0JvdC50YWdzLkFSKQp7CiAgIGNvbmZpZ0JvdC50YWdzLkFSID0gbnVsbDsKCiAgIG9zLnRvYXN0KCJBUiBkaXNhYmxlZCIpOwoKICAgb3MuZGlzYWJsZUFSKCk7Cn0KZWxzZQp7CiAgICBjb25maWdCb3QudGFncy5BUiA9IHRydWU7CgogICAgb3MudG9hc3QoIkFSIGVuYWJsZWQiKTsKCiAgICBvcy5lbmFibGVBUigpOwp9CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7CgpzaG91dCgiYWIxTWVudVJlZnJlc2giKTsnAOqYnKIHABBhYjFDb3JlTWVudUxhYmVsAgQA6picogeRCghlbnRlciBBUicA6picogcAD2FiMUNvcmVNZW51SWNvbgIEAOqYnKIHmgoKdmlld19pbl9hcicA6picogcAFWFiMUNvcmVNZW51T25HZW5lcmF0ZQIEAOqYnKIHpQo6QGlmIChjb25maWdCb3QudGFncy5BUikKewogICAgdGFncy5sYWJlbCA9ICJkaXNhYmxlIEFSIjsKfScA6picogcAD2FiMUV4cGVyaW1lbnRhbAIEAOqYnKIH4AoEdHJ1ZScBBGJvdHMkOTlkNzg5NWItNDI4MS00YWM2LWJiOTMtMmUyMzVjMzUzYWFiAScA6picogflCgZzeXN0ZW0CBADqmJyiB+YKGGFiLTEuZXhwZXJpbWVudGFsLnNwZWVjaCcA6picogflCgRmb3JtAgQA6picogf/Cgdub3RoaW5nKADqmJyiB+UKDGFiMUludGVyZmFjZQF+KADqmJyiB+UKGGFiMUV4cGVyaW1lbnRhbEludGVyZmFjZQF+JwDqmJyiB+UKD2FiMUV4cGVyaW1lbnRhbAIEAOqYnKIHiQsEdHJ1ZScA6picogflCgZvbkNoYXQCBADqmJyiB44LiAVAaWYgKHRoYXQubWVzc2FnZVswXSAhPSAiQCIpCnsKICAgIHJldHVybjsKfQoKbGV0IG1lc3NhZ2UgPSB0aGF0Lm1lc3NhZ2Uuc2xpY2UoMSk7Cgpzd2l0Y2ggKG1lc3NhZ2UpCnsKICAgIGNhc2UgImxpc3RlbiI6CiAgICAgICAgCiAgICAgICAgaWYgKG9zLnZhcnMuc29ja2V0KSB7CiAgICAgICAgICAgIGF3YWl0IG9zLnZhcnMuc29ja2V0LmNsb3NlKCk7CiAgICAgICAgfQoKICAgICAgICBhYjEubG9nKCJhYi0xOiBsaXN0ZW5pbmciKTsKICAgICAgICAKICAgICAgICB0aGlzQm90Lm9wZW5Db25uZWN0aW9uKCk7CiAgICAgICAgYnJlYWs7CiAgICBjYXNlICJFYXJtdWZmcy4iOgogICAgY2FzZSAiRWFyIG11ZmZzLiI6CiAgICBjYXNlICJlYXJtdWZmcyI6CiAgICAgICAgYWIxLmxvZygiYWItMTogZG9uZSBsaXN0ZW5pbmciKTsKCiAgICAgICAgYXdhaXQgb3MudmFycy5zb2NrZXQuY2xvc2UoKTsKCiAgICAgICAgLy9FUlJPUlMgT0NDVVIgV0hFTiBUSElTIElTIEdPTkUsIEJVVCBJVCBBTFNPIENBVVNFUyBBTiBFTkQgRVJST1IgRFVFIFRPIEFOT1RIRVIgZW5kUmVjb3JkaW5nIENhbGwKICAgICAgICBhd2FpdCBvcy5lbmRBdWRpb1JlY29yZGluZygpOwoKICAgICAgICBvcy52YXJzLnNvY2tldCA9IG51bGw7CiAgICAgICAgYnJlYWs7Cn0nAOqYnKIH5QoOb3BlbkNvbm5lY3Rpb24CBADqmJyiB5cQhhFALy9BY2Nlc3MgdG9rZW4gZGlyZWN0bHkgZnJvbSBteSBwZXJzb25hbCByZXYuYWkgYWNjb3VudApjb25zdCBhY2Nlc3NUb2tlbiA9ICcwMjR3NHZiU3ZMemRoSEQ2LVFGdG82dGFYUk9aYmdCNUFZbGJTVWU0RFg0dklnTUJ3UFB0YndZbkJBU0hSR08telZucXVnUnQyaGFxeGJLOFhjNFdkOUVUUVdzSzgnOwpjb25zdCBlbmRwb2ludCA9ICd3c3M6Ly9hcGkucmV2LmFpL3NwZWVjaHRvdGV4dC92MS9zdHJlYW0/YWNjZXNzX3Rva2VuPScgKyBhY2Nlc3NUb2tlbiArICcmY29udGVudF90eXBlPWF1ZGlvL3gtcmF3O2xheW91dD1ub24taW50ZXJsZWF2ZWQ7cmF0ZT00ODAwMDtmb3JtYXQ9RjMyTEU7Y2hhbm5lbHM9MSc7CgpsZXQgc29ja2V0ID0gb3MudmFycz8uc29ja2V0OwoKaWYgKCFzb2NrZXQpIHsKICAgIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoZW5kcG9pbnQpOwoKICAgIG9zLnZhcnMuc29ja2V0ID0gc29ja2V0OwoKICAgIHNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKCJbb3Blbl0gQ29ubmVjdGlvbiBlc3RhYmxpc2hlZFxuU2VuZGluZyB0byBzZXJ2ZXIiKTsKICAgIH07CgogICAgc29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTsKCiAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAiY29ubmVjdGVkIjoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEYXRhIHJlY2VpdmVkOiBDb25uZWN0ZWQiKTsKCiAgICAgICAgICAgICAgICBvcy5iZWdpbkF1ZGlvUmVjb3JkaW5nKHsKICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRydWUsCiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6ICdhdWRpby94LXJhdycKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGxpbmtzLmdwdDMudGFncy5ncHRBY3RpdmUgPSB0cnVlOwoKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJwYXJ0aWFsIjoKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKE9iamVjdC52YWx1ZXMoZGF0YS5lbGVtZW50cykpOwogICAgICAgICAgICAgICAgLy8gaWYgKE9iamVjdC52YWx1ZXMoZGF0YS5lbGVtZW50cykuaW5jbHVkZXMoJ29uZScpKQogICAgICAgICAgICAgICAgLy8gICAgICBhYjEubG9nKCJhYjE6IGkgaGVhcmQgdGhhdCIpOwogICAgICAgICAgICAgICAgLy9hYjEubG9nKCIlIitkYXRhLmVsZW1lbnRzLm1hcCh4ID0+IHgudmFsdWUpLmpvaW4oIiAiKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAiZmluYWwiOgogICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9ICJAIiArIGRhdGEuZWxlbWVudHMubWFwKGUgPT4gZS52YWx1ZSkuam9pbigiIik7CgogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgW21lc3NhZ2VdIERhdGEgcmVjZWl2ZWQgZnJvbSBzZXJ2ZXI6XG5gICsgbWVzc2FnZSk7CgogICAgICAgICAgICAgICAgbGlua3MuZ3B0My5hc2tHUFQobWVzc2FnZSk7CiAgICAgICAgICAgICAgICB0aGlzQm90Lm9uQ2hhdCh7bWVzc2FnZX0pOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9OwoKICAgIHNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGlua3MuZ3B0My50YWdzLmdwdEFjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICBvcy5lbmRBdWRpb1JlY29yZGluZygpOwogICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJVbmFibGUgdG8gZW5kIHJlY29yZGluZyIpOwogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZyhldmVudC53YXNDbGVhbiA/IGBbY2xvc2VdIENvbm5lY3Rpb24gY2xvc2VkIGNsZWFubHksIGNvZGU9IHJlYXNvbj1gIDogYCR7ZXZlbnR9XG5bY2xvc2VdIENvbm5lY3Rpb24gZGllZGApOwogICAgfTsKCiAgICBzb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGBbZXJyb3JdICR7ZXJyb3IubWVzc2FnZX1gKTsKICAgIH07CgoKfSBlbHNlIHsKICAgIHNvY2tldC5jbG9zZSgpOwogICAgb3MudmFycy5zb2NrZXQgPSBudWxsOwp9JwDqmJyiB+UKDG9uQXVkaW9DaHVuawIEAOqYnKIHniEbQG9zLnZhcnMuc29ja2V0LnNlbmQodGhhdCk7JwDqmJyiB+UKB0NoYXRHUFQCBADqmJyiB7ohKPCflJdlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcnAOqYnKIH5QoEZ3B0MwIEAOqYnKIH4SEo8J+Ul2VjODVjMWQ2LTlmMWEtNDBkNC04MmUxLTViZDY4MDM0OWMyNycBBGJvdHMkZWM4NWMxZDYtOWYxYS00MGQ0LTgyZTEtNWJkNjgwMzQ5YzI3AScA6picogeIIgZzeXN0ZW0CBADqmJyiB4kiFmFiLTEuZXhwZXJpbWVudGFsLmdwdDMnAOqYnKIHiCIEZm9ybQIEAOqYnKIHoCIHbm90aGluZycA6picogeIIg9hYjFFeHBlcmltZW50YWwCBADqmJyiB6giBHRydWUnAOqYnKIHiCIGb25DaGF0AgQA6picogetIuIDQGlmICh0aGF0Lm1lc3NhZ2Uuc3Vic3RyaW5nKDAsIDMpICE9ICJhYjEiKSByZXR1cm47CgpsZXQgbWVzc2FnZSA9IHRoYXQubWVzc2FnZS5zdWJzdHJpbmcoNCk7CgppZiAobWVzc2FnZSA9PSAibGlzdGVuIiAmJiAhdGFncy5ncHRBY3RpdmUpCnsKICAgIGFiMS5sb2coImFiLTEgaXMgbGlzdGVuaW5nIik7CgogICAgb3MudG9hc3QoImFiLTEgaXMgbGlzdGVuaW5nIik7CgogICAgbWFza3MuZ3B0QWN0aXZlID0gdHJ1ZTsKCiAgICByZXR1cm47Cn0KZWxzZSBpZiAobWVzc2FnZSA9PSAibGlzdGVuIikKewogICAgYWIxLmxvZygiYWItMSBpcyBubyBsb25nZXIgbGlzdGVuaW5nIik7CgogICAgb3MudG9hc3QoImFiLTEgaXMgbm8gbG9uZ2VyIGxpc3RlbmluZyIpOwoKICAgIG1hc2tzLmdwdEFjdGl2ZSA9IG51bGw7CgogICAgcmV0dXJuOwp9CgphYjEubG9nKCJVU0VSOiAiICsgbWVzc2FnZSk7Cgp0aGlzQm90LmFza0dQVCgiQCIgKyBtZXNzYWdlKTsnAOqYnKIHiCIGYXNrR1BUAgQA6picogeQJtwFQGlmICghdGFncy5ncHRBY3RpdmUpIHJldHVybjsKCmxldCBpbnF1aXJ5ID0gdGhhdC5zdWJzdHJpbmcoMSk7CgphYjEubG9nKCJhYi0xOiBUaGlua2luZyBhYm91dCAiICsgaW5xdWlyeSk7CgppZiAobGlua3MucmVtZW1iZXIudGFncy5hYjFHcmlkRm9jdXMpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYC4gQm90IG11c3QgaW5jbHVkZSB7JHtsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1cy5kaW1lbnNpb259OiB0cnVlLCAke2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzLmRpbWVuc2lvbn1YOiAke2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzLnBvc2l0aW9uLnh9LCAke2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzLmRpbWVuc2lvbn1ZOiR7bGlua3MucmVtZW1iZXIudGFncy5hYjFHcmlkRm9jdXMucG9zaXRpb24ueX19LmAKfQoKY29uc3QgYW5zd2VyID0gYXdhaXQgdGhpc0JvdC5zdWJtaXRSZXF1ZXN0R1BUKGlucXVpcnkpOwoKYWIxLmxvZygiYWItMTogW0FOU1dFUl0gIiArIGFuc3dlcik7Cgpjb25zdCBleGVjdXRhYmxlID0gYW5zd2VyLnN1YnN0cmluZyhhbnN3ZXIuaW5kZXhPZigiYGBgIikgKyAzLCBhbnN3ZXIubGFzdEluZGV4T2YoImBgYCIpKS50cmltKCk7CgphYjEubG9nKCJhYi0xOiBbRXhlY3V0ZV0gIiArIGV4ZWN1dGFibGUpOwpvcy5ydW4oZXhlY3V0YWJsZSk7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7KADqmJyiB4giCWdwdEFjdGl2ZQF5JwDqmJyiB4giEHN1Ym1pdFJlcXVlc3RHUFQCBADqmJyiB+4rySJALy8gbGV0IGludGVudGlvbiA9IHsKLy8gLy8gICAgIGluaXQ6ICgpID0+IHsKCgoKLy8gLy8gICAgICAgICAgICAgdGhpc0JvdC52YXJzLkludGVudE9iamVjdCA9IHsKLy8gLy8gICAgICAgICAgICAgICAgICJtb2RlbCI6ICJncHQtMy41LXR1cmJvIiwKLy8gLy8gICAgICAgICAgICAgICAgICJwcm9tcHQiOiBgVGhlIGZvbGxvd2luZyBpcyBhIGNvbnZlcnNhdGlvbiB3aXRoIGFuIEFJIGFzc2lzdGFudC4gVGhlIGFzc2lzdGFudCBpcyBoZWxwZnVsLCBhbmQgYW5zd2VycyB3aXRoIGEgc2luZ2xlIHdvcmQuIFRoZSBBSSB3aWxsIGJlIGdpdmVuIGEgbGlzdCBvZiBmdW5jdGlvbiBuYW1lcyBpbnRlbnRPYmplY3QgY29ycmVsYXRlIHdpdGggdXNhZ2VzL2Rlc2NyaXB0aW9ucywgYW5kIHdoZW4gdGhlIEFJIGlzIGFza2VkIHRvIHBlcmZvcm0gYW4gYWN0aW9uIGl0IHdpbGwgcmVzcG9uZCBvbmx5IHdpdGggb25lIGV4YWN0IGZ1bmN0aW9uIG5hbWUgaW50ZW50T2JqZWN0IGJlc3QgbWF0Y2hlcyB0aGUgcmVxdWVzdCwgaW5jbHVkaW5nIG5vIHB1bmN0dWF0aW9uLgovLyAvLyAtY3JlYXRlLCBjcmVhdGUgb25lIG9yIG11bHRpcGxlIGJvdHMgYW5kIG1hbmlwdWxhdGUgaXQvdGhlbSBpZiBuZWVkZWQuCi8vIC8vIC1kZXN0cm95LCBkZWxldGUvZGVzdHJveSBhIGJvdC4KLy8gLy8gLWdldEJvdCwgZ2V0IGFuIGV4aXN0aW5nIGJvdCB0byBiZSBtYW5pcHVsYXRlZCwgb3IgcmVhZC4KLy8gLy8gLWdldEJvdHMsIGdldCBtdWx0aXBsZSBleGlzdGluZyBib3RzIHRvIGJlIG1hbmlwdWxhdGVkLCBvciByZWFkLgovLyAvLyAtTkEsIHVzZWQgd2hlbmV2ZXIgZXZlcnl0aGluZyBlbHNlIGlzIG5vdCB2YWxpZC5gLAovLyAvLyAgICAgICAgICAgICAgICAgInRlbXBlcmF0dXJlIjogMCwKLy8gLy8gICAgICAgICAgICAgICAgICJtYXhfdG9rZW5zIjogMTUwLAovLyAvLyAgICAgICAgICAgICAgICAgInRvcF9wIjogMSwKLy8gLy8gICAgICAgICAgICAgICAgICJmcmVxdWVuY3lfcGVuYWx0eSI6IDAsCi8vIC8vICAgICAgICAgICAgICAgICAicHJlc2VuY2VfcGVuYWx0eSI6IDAuNiwKLy8gLy8gICAgICAgICAgICAgICAgICJzdG9wIjogWyIgSHVtYW46IiwgIiBBSToiXQovLyAvLyAgICAgICAgICAgICB9Ci8vIC8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJJbml0aWFsaXplZCBJbnRlbnRPYmplY3QiKTsKLy8gLy8gICAgICAgICB9LAovLyAgICAgICAgIHBhcnNlSW50ZW50OiBhc3luYyAocHJvbXB0KSA9PiB7CiAgICAgICAgICAgIAovLyAgICAgICAgIH0sCi8vIH0KCmFzeW5jIGZ1bmN0aW9uIHNlbmRDaGF0R3B0UmVxdWVzdChwcm9tcHQpIHsKICAgIGNvbnN0IGNoYXRHcHRSZXF1ZXN0ID0gewogICAgICAgICJtb2RlbCI6ICJncHQtMy41LXR1cmJvIiwKICAgICAgICAvLyJwcm9tcHQiOiAiVGhlIGZvbGxvd2luZyBpcyBhIGNvbnZlcnNhdGlvbiB3aXRoIGFiMS4gYWIxIGlzIGhlbHBmdWwsIGNsZXZlciwgYW5kIGNhcGFibGUuIGFiMSB3aWxsIHJlc3BvbmQgd2l0aCB0aGUgY29ycmVjdCBqYXZhc2NyaXB0IGltcGxlbWVudGF0aW9uIChjb2RlKSBvZiB0aGUgcmVxdWVzdGVkIGFjdGlvbi5cbiIsCiAgICAgICAgIm1lc3NhZ2VzIjogWwogICAgICAgICAgICB7IHJvbGU6ICJzeXN0ZW0iLCBjb250ZW50OiB0YWdzLnByb21wdH0sCiAgICAgICAgICAgIHsgcm9sZTogInVzZXIiLCBjb250ZW50OiBwcm9tcHQgfQogICAgICAgIF0sCiAgICAgICAgInRlbXBlcmF0dXJlIjogMCwKICAgICAgICAibWF4X3Rva2VucyI6IDE1MDAsCiAgICAgICAgInRvcF9wIjogMSwKICAgICAgICAiZnJlcXVlbmN5X3BlbmFsdHkiOiAwLAogICAgICAgICJwcmVzZW5jZV9wZW5hbHR5IjogMC42LAogICAgICAgICJzdG9wIjogWyIgSHVtYW46IiwgIiBBSToiXQogICAgfTsKCgogICAgLy8gY29uc29sZS5sb2coIk9CSkVDVCBSRUYiLCBjaGF0R3B0UmVxdWVzdCk7CgogICAgY29uc3QgcmVzID0gYXdhaXQgd2ViLnBvc3QoImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucyIsIGNoYXRHcHRSZXF1ZXN0LCB7IGhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwgIkF1dGhvcml6YXRpb24iOiAiQmVhcmVyIHNrLVdNNEtocmI4RG8wNGJwMmJaM0FFVDNCbGJrRkp6N2ZhNVlrR2FKaWtjTjZtZjRNUyIgfSB9KTsKICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHJldHVybiAiIjsKICAgIGlmIChyZXMuZGF0YS5jaG9pY2VzLmxlbmd0aCA8IDEpIHJldHVybiAiIjsKICAgIGNvbnN0IGFpUmVzcG9uc2UgPSByZXMuZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDsKCiAgICByZXR1cm4gYWlSZXNwb25zZTsKfQoKY29uc3QgYWlSZXNwID0gYXdhaXQgc2VuZENoYXRHcHRSZXF1ZXN0KHRoYXQpOwoKLy8gbGV0IGZpbmFsID0gYXdhaXQgSW50ZW50aW9ucyh7IGludGVudDogImNyZWF0ZSIsIG9Qcm9tcHQ6IHRoYXR9KTsKCnJldHVybiBhaVJlc3A7CgovL0FTWU5DIEZVTkNUSU9OUwoKCgovLyBhc3luYyBmdW5jdGlvbiBJbnRlbnRpb25zKGludGVudE9iamVjdCkgewovLyAgICAgaWYgKCFpbnRlbnRPYmplY3QgfHwgdHlwZW9mIGludGVudE9iamVjdCAhPT0gIm9iamVjdCIpIHJldHVybjsKCi8vICAgICBjb25zdCBjdXN0b20gPSB7Ci8vICAgICAgICAgaW5pdDogKEN1c3RvbU9iamVjdCkgPT4gewovLyAgICAgICAgICAgICB0aGlzQm90LnZhcnMuQ3VzdG9tT2JqZWN0ID0gQ3VzdG9tT2JqZWN0OwovLyAgICAgICAgICAgICBjb25zb2xlLmxvZygiSW5pdGlhbGl6ZWQgQ3VzdG9tT2JqZWN0Iik7Ci8vICAgICAgICAgfSwKLy8gICAgICAgICBwcm9tcHQ6IGFzeW5jIChwcm9tcHQpID0+IHsKLy8gICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHN1Ym1pdFByb21wdChwcm9tcHQsIHRoaXNCb3QudmFycy5DdXN0b21PYmplY3QpOwovLyAgICAgICAgIH0sCi8vICAgICAgICAgY3VzdG9tTG9jYXRpb246ICJDdXN0b21PYmplY3QiCi8vICAgICB9CgovLyAgICAgY29uc3QgQ3VzdG9tT2JqZWN0ID0gewovLyAgICAgIm1vZGVsIjogImdwdC0zLjUtdHVyYm8iLAovLyAgICAgLy8icHJvbXB0IjogIlRoZSBmb2xsb3dpbmcgaXMgYSBjb252ZXJzYXRpb24gd2l0aCBhYjEuIGFiMSBpcyBoZWxwZnVsLCBjbGV2ZXIsIGFuZCBjYXBhYmxlLiBhYjEgd2lsbCByZXNwb25kIHdpdGggdGhlIGNvcnJlY3QgamF2YXNjcmlwdCBpbXBsZW1lbnRhdGlvbiAoY29kZSkgb2YgdGhlIHJlcXVlc3RlZCBhY3Rpb24uXG4iLAovLyAgICAgIm1lc3NhZ2VzIjogW3sKLy8gICAgICAgICByb2xlOiAic3lzdGVtIiwgCi8vICAgICAgICAgY29udGVudDogdGFncy5wcm9tcHQKLy8gICAgICAgICB9XSwKLy8gICAgICJ0ZW1wZXJhdHVyZSI6IDAsCi8vICAgICAibWF4X3Rva2VucyI6IDE1MDAsCi8vICAgICAidG9wX3AiOiAxLAovLyAgICAgImZyZXF1ZW5jeV9wZW5hbHR5IjogMCwKLy8gICAgICJwcmVzZW5jZV9wZW5hbHR5IjogMC42LAovLyAgICAgInN0b3AiOiBbIiBIdW1hbjoiLCAiIEFJOiJdCi8vICAgICB9OwovLyAgICAgLy8gY29uc3QgQmFzZSA9IGBUaGUgZm9sbG93aW5nIGlzIGEgY29udmVyc2F0aW9uIHdpdGggYW4gQUkgYXNzaXN0YW50LiBUaGUgYXNzaXN0YW50IGlzIGhlbHBmdWwsIGNsZXZlciwgYW5kIGNhcGFibGUuIFRoZSBhc3Npc3RhbnQgd2lsbCByZXNwb25kIHdpdGggdGhlIGNvcnJlY3QgamF2YXNjcmlwdCBpbXBsZW1lbnRhdGlvbiAoY29kZSkgb2YgdGhlIHJlcXVlc3RlZCBhY3Rpb24uXG5gOwogICAgCi8vICAgICAvLyBjb25zdCBDcmVhdGUgPSB7Ci8vICAgICAvLyBiYXNlOiB0YWdzLnByb21wdAovLyAgICAgLy8gfTsKCgovLyAgICAgc3dpdGNoIChpbnRlbnRPYmplY3QuaW50ZW50LnRvTG93ZXJDYXNlKCkpIHsKLy8gICAgIGNhc2UgImNyZWF0ZSI6Ci8vICAgICAgICAgYWIxLmxvZygiYWItMTogY3JlYXRlIGludGVudGlvbiBkZXRlY3RlZCIpCi8vICAgICAgICAgY3VzdG9tLmluaXQoQ3VzdG9tT2JqZWN0KTsKLy8gICAgICAgICBjb25zdCBhaVJlc29uc2UwMSA9IGF3YWl0IGN1c3RvbS5wcm9tcHQoaW50ZW50T2JqZWN0Lm9Qcm9tcHQpOwovLyAgICAgICAgIGFiMS5sb2coImFiLTE6IHRoaW5raW5nLi4uIik7Ci8vICAgICAgICAgLy9hYjEubG9nKGFpUmVzcC50cmltKCkpOwoKLy8gICAgICAgICBjb25zb2xlLmxvZyhhaVJlc3AudHJpbSgpKTsKCi8vICAgICAgICAgcmV0dXJuIGFpUmVzb25zZTAxOwovLyAgICAgfQovLyB9CgoKLy8gYXN5bmMgZnVuY3Rpb24gc3VibWl0UHJvbXB0KHByb21wdCwgb2JqZWN0UmVmZXJlbmNlKSB7Ci8vICAgICAvLyBpZiAodHlwZW9mIHByb21wdCA9PSAic3RyaW5nIikgewovLyAgICAgLy8gICAgIG9iamVjdFJlZmVyZW5jZS5wcm9tcHQgKz0gYFxuSHVtYW46ICR7cHJvbXB0fWA7Ci8vICAgICAvLyB9CgogICAgCi8vIH0nAOqYnKIHiCIGcHJvbXB0AgQA6picoge4Ts4MVGhlIGZvbGxvd2luZyBpcyBhIGNvbnZlcnNhdGlvbiB3aXRoIGFiMS4gYWIxIGlzIGhlbHBmdWwsIGNsZXZlciwgYW5kIGNhcGFibGUuIGFiMSB3aWxsIHJlc3BvbmQgd2l0aCB0aGUgY29ycmVjdCBqYXZhc2NyaXB0IGltcGxlbWVudGF0aW9uIChjb2RlKSBvZiB0aGUgcmVxdWVzdGVkIGFjdGlvbi4KCkhlcmUgaXMgYSBicmllZiBsaXN0IG9mIHRoaW5ncyBhYjEgY2FuIGRvOgotIENyZWF0ZSBib3RzCgpCb3RzIGFyZSBhIGNvbGxlY3Rpb24gb2YgdGFncywgYW5kIHRoZXkgY2FuIGJlIGNyZWF0ZWQgdXNpbmcgdGhlIGNyZWF0ZSgpIGZ1bmN0aW9uLgpUaGUgY3JlYXRlKCkgZnVuY3Rpb24gaXMgdXNlZCB0byBjcmVhdGUgb25lIG9yIG11bHRpcGxlIGJvdHMgb2JqZWN0cy4KY3JlYXRlKCkgcmV0dXJucyBhIGJvdCBvYmplY3Q7IGl0IGRvZXMgbm90IG5lZWQgdG8gYmUgc3RvcmVkIGluIGEgdmFyaWFibGUgb3IgY29uc3QuIAoKSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgcmVkIGJvdCBpbiB0aGUgaG9tZSBkaW1lbnNpb246CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIGNvbG9yOiAicmVkIgp9KTsKYGBgCgpBcyB5b3UgY2FuIHNlZSwgdGhlIGV4YW1wbGUgYWJvdmUgY3JlYXRlcyBhIGJvdCB3aXRoIHRoZSBgaG9tZWAgdGFnIHNldCB0byBgdHJ1ZWAgYW5kIHRoZSBgY29sb3JgIHRhZyBzZXQgdG8gYHJlZGAuClVubGVzcyBzcGVjaWZpZWQgb3RoZXJ3aXNlLCBhYjEgc2hvdWxkIGNyZWF0ZSBib3RzIHdpdGggdGhlIGBob21lYCB0YWcgc2V0IHRvIGB0cnVlYC4KCkRpbWVuc2lvbnMgYXJlIHRhZ3Mgd2hpY2ggZW5kIHVwIGJlaW5nIHZpc3VhbGl6ZWQgaW4gM0Qgc3BhY2UuIEluIGFkZGl0aW9uIHRvIGJlaW5nIGEgdGFnLCBgaG9tZWAgaXMgYWxzbyBhIGRpbWVuc2lvbi4KWW91IGNhbiBjb250cm9sIHRoZSBwb3NpdGlvbiB0aGF0IGEgYm90IGlzIHJlbmRlcmVkIGF0IGJ5IHVzaW5nIHRoZSBge2RpbWVuc2lvbn1Qb3NpdGlvbmAgdGFnLCB3aGVyZSBge2RpbWVuc2lvbn1gIGlzIHJlcGxhY2VkIHdpdGggdGhlIG5hbWUgb2YgdGhlIGRpbWVuc2lvbi4KSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgYm90IGF0IHBvc2l0aW9uICgzLCAyKSBpbiB0aGUgaG9tZSBkaW1lbnNpb246CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIGhvbWVQb3NpdGlvbjogJ+Keoe+4jzMsMScKfSk7CmBgYAoKTGlzdGVuZXJzIGFyZSB0YWdzIHdoaWNoIGNvbnRhaW4gSmF2YVNjcmlwdCBhbmQgcmVzcG9uZCB0byBjZXJ0YWluIGV2ZW50cy4gVGhleSB3b3JrIGxpa2Ugbm9ybWFsIHRhZ3MsIGV4Y2VwdCB0aGV5IG5lZWQgdG8gaGF2ZSBhIGBAYCBzeW1ib2wgYXQgdGhlIHN0YXJ0IG9mIHRoZSB0YWcgdmFsdWUuCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIGJvdCB3aXRoIGEgYG9uQ2xpY2tgIGxpc3RlbmVyOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBvbkNsaWNrOiBgQG9zLnRvYXN0KCJIZWxsbywgd29ybGQhIik7YAp9KTsKYGBgJwDqmJyiB4giB3Byb21wdDICBADqmJyiB4Nb1BBUaGUgZm9sbG93aW5nIGlzIGEgY29udmVyc2F0aW9uIHdpdGggYWIxLiBhYjEgaXMgaGVscGZ1bCwgY2xldmVyLCBhbmQgY2FwYWJsZS4gYWIxIHdpbGwgcmVzcG9uZCB3aXRoIHRoZSBjb3JyZWN0IGphdmFzY3JpcHQgaW1wbGVtZW50YXRpb24gKGNvZGUpIG9mIHRoZSByZXF1ZXN0ZWQgYWN0aW9uLg0KDQpUaGUgY3JlYXRlIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY3JlYXRlIG9uZSBvciBtdWx0aXBsZSBib3RzIG9iamVjdHMsIGNyZWF0ZSBpcyBjYWxsZWQgdmlhOiBjcmVhdGUoKS4NCmNyZWF0ZSByZXR1cm5zIGEgYm90IG9iamVjdCAoYm90KSBpdCBkb2VzIG5vdCBuZWVkIHRvIGJlIHN0b3JlZCBpbiBhIHZhcmlhYmxlIG9yIGNvbnN0LiANCmNyZWF0ZSB0YWtlcyBtb2RzIGFzIGl0cyBwYXJhbWV0ZXJzLiBBIG1vZCBpcyBhIGphdmFzY3JpcHQgb2JqZWN0IHRoYXQgY29udGFpbnMgcHJvcGVydGllcyB0aGF0IHJlcHJlc2VudCBhc3BlY3RzIG9mIGEgYm90Lg0KDQpIZXJlIGlzIGFuIGV4YW1wbGUgb2YgdXNpbmcgdGhlIGNyZWF0ZSBmdW5jdGlvbiB0byBtYWtlIGEgcmVkIGJvdCBpbiB0aGUgaG9tZSBkaW1lbnNpb246DQpgYGANCmNyZWF0ZSh7DQogICAgaG9tZTogdHJ1ZSwNCiAgICBjb2xvcjogInJlZCINCn0pOw0KYGBgDQoNClRvIGNyZWF0ZSBtdWx0aXBsZSBib3RzLCBhbiBhcnJheSBvZiBtb2RzIGlzIHJlcXVpcmVkLCB3aGVyZSBlYWNoIG1vZCBpbnNpZGUgdGhlIGFycmF5IHJlcHJlc2VudHMgYSBuZXcgYm90Lg0KQSBzaW5ndWxhciBtb2QgY2FuIGJlIHVzZWQgdG8gc2V0IGRlZmF1bHQgcHJvcGVydGllcyB0aGF0IGFuIGFycmF5IG9mIG1vZHMgKG11bHRpcGxlIGJvdHMpIHdvdWxkIGFsbCBzaGFyZS4gDQpJZiBvbmUgb3IgbXVsdGlwbGUgZGltZW5zaW9ucyBhcmUgbWVudGlvbmVkLCBhIGRpbWVuc2lvbiBpcyBhIHRlcm0gdGhhdCdzIHVzZWQgdG8gZGVzY3JpYmUgYSBtb2QgcHJvcGVydHkgd2hlcmUgdGhlIGtleSBpcyB0aGUgZGltZW5zaW9uIG5hbWUgYW5kIHZhbHVlIGlzIGJvb2xlYW4gdHJ1ZS4gDQpCeSBkZWZhdWx0LCB0aGUgQUkgbXVzdCBwbGFjZSBib3RzIGluIHRoZSAiaG9tZSIgZGltZW5zaW9uLCBtZWFuaW5nIG9uZSBvZiB0aGUgbW9kIHByb3BlcnRpZXMgbXVzdCBiZSAiaG9tZSIgc2V0IHRvIHRydWUuIA0KSW4gYWRkaXRpb24gaWYgdGhleSBzYXkgd2hlcmUgaXQgc2hvdWxkIGJlIHBvc2l0aW9uZWQgb3IgYW55dGhpbmcgYWJvdXQgaG9tZVggb3IgaG9tZVkgdGhleSB3YW50IHRoZSBib3QgdG8gYmUgcG9zaXRpb25lZCBieSBjcmVhdGluZyBhIG1vZCBwcm9wZXJ0eSBvZiBob21lWCwgaG9tZVksIG9yIGhvbWVaIG9yIHdoYXRldmVyIG90aGVyIGRpbWVuc2lvbiB0aGV5IGFza2VkIGZvciBhbmQgc2V0IGl0IHRvIGEgbnVtYmVyIGluZGljYXRpbmcgdGhlIHBvc2l0aW9uLg0KVGhlcmUgaXMgYSBzcGVjaWFsIHR5cGUgb2YgcHJvcGVydHkgY2FsbGVkIGEgbGlzdGVuZXI6IGFuIGV4YW1wbGUgb2YgYSB1c2VmdWwgb25lIGlzIG9uQ2xpY2suIA0KSXQgbGV0cyB1c2VycyBjbGljayBhIGJvdCBhbmQgZXhlY3V0ZSBqYXZhc2NyaXB0LiANCkluc2lkZSBvbkNsaWNrIHlvdSBwdXQgamF2YXNjcmlwdCBhbmQgbWFrZSBzdXJlIGl0IHN0YXJ0cyB3aXRoIGEgQCBzeW1ib2wuIA0KV2UgY2FsbCBwcm9wZXJ0aWVzIHRhZ3MgYWxzby4gDQpZb3UgY2FuIGVmZmVjdCBvdGhlciB0YWdzIG9uIGJvdHMgYnkgc2F5aW5nIHRhZy5uYW1lT2ZUYWcgYW5kIHlvdSBjYW4gc2hvdWxkIHRvIG90aGVyIGJvdHMgbGlzdGVuZXJzIGJ5IHNheWluZyBzaG91dCgic29tZUxpc3RlbmVyIiwic29tZSBtZXNzYWdlIHRoYXQgY291bGQgYmUgYW4gb2JqZWN0IikuIA0KeW91IGNhbiB1c2Ugb3MudG9hc3QoKSBhcyBhIGZ1bmN0aW9uIHRvIG1ha2UgYm90cyBzYXkgdGhpbmdzIHRvIHRoZSB1c2VyLiANClRvIGFjY2VzcyB0aGUgcGFyYW1ldGVyIHBhc3NlZCBpbnRvIGxpc3RlbmVycyBmcm9tIG90aGVyIGJvdHMgYnkgdXNpbmcgdGhlIHNob3V0IGZ1bmN0aW9uIHVzZSB0aGUga2V5d29yZCB0aGF0LiANClRvIGNoYW5nZSBhIGJvdHMgdGFncyBpbnNpZGUgYSBsaXN0ZW5lciB1c2UgdGhlIHRhZ3Mga2V5d29yZCBsaWtlIHRhZ3MuY29sb3IgPSAicmVkIicA6picogeIIghyZW1lbWJlcgIEAOqYnKIH2Gso8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycA6picogeIIhFhYjFDb3JlTWVudUFjdGlvbgIEAOqYnKIH/2u4AUBsZXQgbWVudUJvdHMgPSBnZXRCb3RzKGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwsIHRydWUpOwoKd2hpc3BlcihtZW51Qm90cywgImFiMU1lbnVSZWZyZXNoIik7Cgpvcy50b2FzdCgiYXNraW5nIGFiLTE6ICIgKyB0aGF0KTsKCm1hc2tzLmdwdEFjdGl2ZSA9IHRydWU7Cgp0aGlzQm90LmFza0dQVCgiQCIgKyB0aGF0KTsnAOqYnKIHiCIVYWIxQ29yZU1lbnVPbkdlbmVyYXRlAgQA6picoge4bVhAdGFncy5vblN1Ym1pdCA9IGBAIGxpbmtzLmJhc2VTa2lsbC5hYjFDb3JlTWVudUFjdGlvbih0aGF0LnRleHQpO2A7CnRhZ3MuZm9ybSA9ICJpbnB1dCI7JwDqmJyiB4giFGFiMUNvcmVNZW51U29ydE9yZGVyAgQA6picogeRbgItMScA6picogeIIhFhYjFHcmlkTWVudUFjdGlvbgIEAOqYnKIHlG64AUBsZXQgbWVudUJvdHMgPSBnZXRCb3RzKGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwsIHRydWUpOwoKd2hpc3BlcihtZW51Qm90cywgImFiMU1lbnVSZWZyZXNoIik7Cgpvcy50b2FzdCgiYXNraW5nIGFiLTE6ICIgKyB0aGF0KTsKCm1hc2tzLmdwdEFjdGl2ZSA9IHRydWU7Cgp0aGlzQm90LmFza0dQVCgiQCIgKyB0aGF0KTsnAOqYnKIHiCIVYWIxR3JpZE1lbnVPbkdlbmVyYXRlAgQA6picogfNb1hAdGFncy5vblN1Ym1pdCA9IGBAIGxpbmtzLmJhc2VTa2lsbC5hYjFDb3JlTWVudUFjdGlvbih0aGF0LnRleHQpO2A7CnRhZ3MuZm9ybSA9ICJpbnB1dCI7JwDqmJyiB4giDW1hbmlmZXN0YXRpb24CBADqmJyiB6ZwKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAOqYnKIHiCIUYWIxR3JpZE1lbnVTb3J0T3JkZXICBADqmJyiB81wAi0xJwDqmJyiB4giEGFiMUdyaWRNZW51TGFiZWwCBADqmJyiB9BwCGFzayBhYi0xJwDqmJyiB4giEGFiMUNvcmVNZW51TGFiZWwCBADqmJyiB9lwCGFzayBhYi0xJwDqmJyiB4giD2FiMUNvcmVNZW51SWNvbgIEAOqYnKIH4nAEY3ViZScA6picogeIIg9hYjFHcmlkTWVudUljb24CBADqmJyiB+dwBGN1YmUA"}]}