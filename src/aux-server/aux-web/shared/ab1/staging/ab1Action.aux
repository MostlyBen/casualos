{"version":2,"updates":[{"id":0,"timestamp":1680013875135,"update":"AbkByJWOyAsAJwEEYm90cyQzOTg4MDFmZS00YjM1LTRjZTQtODI2Zi0yMzgzNWMxYjlhYzUBJwDIlY7ICwAGc3lzdGVtAgQAyJWOyAsBFmFiLTEuYWN0aW9uLmNyZWF0ZV9ib3QnAMiVjsgLAAlhYjFBY3Rpb24CBADIlY7ICxgEdHJ1ZScAyJWOyAsABGZvcm0CBADIlY7ICx0Hbm90aGluZycAyJWOyAsAC2Rlc2NyaXB0aW9uAgQAyJWOyAslDUNyZWF0ZXMgYm90cy4oAMiVjsgLABFhYjFHcmlkQWN0aW9uTWVudQF+JwDIlY7ICwARYWIxR3JpZE1lbnVBY3Rpb24CBADIlY7ICzTIBEBjb25zdCBncmlkSW5mb3JtYXRpb24gPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1czsKY29uc3QgbmV3Qm90ID0ge307CgpuZXdCb3RbZ3JpZEluZm9ybWF0aW9uLmRpbWVuc2lvbl0gPSB0cnVlOwpuZXdCb3RbZ3JpZEluZm9ybWF0aW9uLmRpbWVuc2lvbiArICJYIl0gPSBncmlkSW5mb3JtYXRpb24ucG9zaXRpb24ueDsKbmV3Qm90W2dyaWRJbmZvcm1hdGlvbi5kaW1lbnNpb24gKyAiWSJdID0gZ3JpZEluZm9ybWF0aW9uLnBvc2l0aW9uLnk7Cm5ld0JvdC5jb2xvciA9ICIjN0I2NEZGIjsvL2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxQmFzZUNvbG9yOwoKbGV0IGNyZWF0ZWRCb3QgPSBjcmVhdGUobmV3Qm90KTsKCnNob3V0KCJhYjFNZW51UmVmcmVzaCIpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYjFDbGljaygpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QubWFza3MubGluZVRvID0gY3JlYXRlZEJvdC5pZDsKCmxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiMUJvdEZvY3VzID0gIvCflJciICsgY3JlYXRlZEJvdC5pZDsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWIxQ2xpY2soe21lbnU6ICJib3QifSk7KADIlY7ICwAQYWIxR3JpZE1lbnVMYWJsZQF+JwDIlY7ICwAQYWIxR3JpZE1lbnVMYWJlbAIEAMiVjsgL/AQDYm90JwDIlY7ICwAPYWIxR3JpZE1lbnVJY29uAgQAyJWOyAuABQdhZGRfYm94JwDIlY7ICwAIcmVtZW1iZXICBADIlY7IC4gFKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAMiVjsgLAA1tYW5pZmVzdGF0aW9uAgQAyJWOyAuvBSjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkKADIlY7ICwATYWIxQm90TWVudVNvcnRPcmRlcgF+JwDIlY7ICwAJYWIxSWdub3JlAgQAyJWOyAvXBQR0cnVlKADIlY7ICwANYWIxQm90VmVyc2lvbgF9CicBBGJvdHMkNTg0OWFmNTUtNWU4YS00OGQ2LTkxMDYtMTk5NDk4ZTllYzA4AScAyJWOyAvdBQZzeXN0ZW0CBADIlY7IC94FE2FiLTEuYWN0aW9uLmRlc3Ryb3koAMiVjsgL3QUMYWIxQm90QWN0aW9uAX4nAMiVjsgL3QUJYWIxQWN0aW9uAgQAyJWOyAvzBQR0cnVlJwDIlY7IC90FBGZvcm0CBADIlY7IC/gFB25vdGhpbmcnAMiVjsgL3QUQYWIxQm90TWVudUFjdGlvbgIEAMiVjsgLgAaEAUBjb25zdCB0YXJnZXRCb3QgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYjFCb3RGb2N1czsKCmRlc3Ryb3kodGFyZ2V0Qm90KTsKCnNob3V0KCJhYjFNZW51UmVmcmVzaCIpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYjFDbGljaygpOycAyJWOyAvdBQ9hYjFCb3RNZW51TGFiZWwCBADIlY7IC4UHB2Rlc3Ryb3knAMiVjsgL3QUOYWIxQm90TWVudUljb24CBADIlY7IC40HDmRlbGV0ZV9mb3JldmVyJwDIlY7IC90FD2FiMUJvdE1lbnVDb2xvcgIEAMiVjsgLnAcHI0Q2NkQ1RScAyJWOyAvdBRNhYjFCb3RNZW51U29ydE9yZGVyAgQAyJWOyAukBwMxMDAnAMiVjsgL3QUIcmVtZW1iZXICBADIlY7IC6gHKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAMiVjsgL3QUNbWFuaWZlc3RhdGlvbgIEAMiVjsgLzwco8J+Ul2RjYTVkOTg3LWM0ZDgtNDZlNC1iNjBjLWRhYTdiMmY0ZGRhZCcAyJWOyAvdBQlhYjFJZ25vcmUCBADIlY7IC/YHBHRydWUoAMiVjsgL3QUNYWIxQm90VmVyc2lvbgF9CicBBGJvdHMkYjMzOWMxMTgtNDg5YS00NjZiLWJhOWYtYjA3YTVmOWI2NjRmAScAyJWOyAv8BwZzeXN0ZW0CBADIlY7IC/0HEWFiLTEuYWN0aW9uLnBhc3RlKADIlY7IC/wHCWFiMUFjdGlvbgF4JwDIlY7IC/wHBGZvcm0CBADIlY7IC5AIB25vdGhpbmcnAMiVjsgL/AcLZGVzY3JpcHRpb24CBADIlY7IC5gILWFiLTEgc2tpbGwgdXNlZCBmb3IgY29weWluZyBhbmQgcGFzdGluZyBib3RzLicAyJWOyAv8BwdvblBhc3RlAgQAyJWOyAvGCJ8FQGlmICghYnVpbGRlclZlcnNpb24pCnsKICAgIHJldHVybjsKfQpjb25zb2xlLmxvZyh0aGF0KTsKbGV0IGNvcHlCb3QgPSBKU09OLnBhcnNlKHRoYXQudGV4dCk7CmNvbnNvbGUubG9nKGNvcHlCb3QsICJjb3B5Qm90Iik7CmxldCBwYXN0ZWREYXRhID0gIWNvcHlCb3Quc3RhdGUgPyB7W2NvcHlCb3QuaWRdOiBjb3B5Qm90fSA6IGNvcHlCb3Quc3RhdGU7CmNvbnNvbGUubG9nKHBhc3RlZERhdGEpCmxldCBkaW1Nb2QgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiMUZvY3VzRGF0YTsvL01PRElGWSBUSElTIFRPIFNJTVBMWSBCRSBUSEUgTU9EIFRIQVQgV0UgTkVFRD8/PwoKaWYgKE9iamVjdC5rZXlzKHBhc3RlZERhdGEpLmxlbmd0aCA9PSAxICYmIGRpbU1vZCkKewogICAgcGFzdGVkRGF0YVtkaW1Nb2QuZGltZW5zaW9uXSA9IHRydWU7CiAgICBwYXN0ZWREYXRhW2RpbU1vZC5kaW1lbnNpb24rIlgiXSA9IGRpbU1vZC54OwogICAgcGFzdGVkRGF0YVtkaW1Nb2QuZGltZW5zaW9uKyJZIl0gPSBkaW1Nb2QueTsKCiAgICBvcy50b2FzdCgiYm90IGFkZGVkIHRvIGluc3QiKTsKfQplbHNlCnsKICAgIG9zLnRvYXN0KCJib3RzIGFkZGVkIHRvIGluc3QiKTsKfQoKYWIxLmxvZygiYWItMSBwYXN0ZSIpOwoKbGlua3MuY3JlYXRlLmFiMUNyZWF0ZUJvdHMoe2JvdHM6IHBhc3RlZERhdGF9KTsnAMiVjsgL/AcIcmVtZW1iZXICBADIlY7IC+YNKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAMiVjsgL/AcGY3JlYXRlAgQAyJWOyAuNDijwn5SXMzRjM2MyMTAtNWJmMS00OWNmLWIxNTEtZWUyZDA3ZjBlNjczJwDIlY7IC/wHCWFiMUlnbm9yZQIEAMiVjsgLtA4EdHJ1ZSgAyJWOyAv8Bw1hYjFCb3RWZXJzaW9uAX0KJwDIlY7IC/wHCW9uS2V5RG93bgIEAMiVjsgLug6nBUBpZiAoIWJ1aWxkZXJWZXJzaW9uIHx8ICFsaW5rcy5yZW1lbWJlci5saW5rcy5hYjFCb3RGb2N1cykKewogICAgcmV0dXJuOwp9CgppZiAodGhhdC5rZXlzID09ICJjIikKewogICAgbGV0IG1ldGFJbnB1dCA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIk1ldGEiKTsKCiAgICBpZiAoIW1ldGFJbnB1dCkKICAgIHsKICAgICAgICBtZXRhSW5wdXQgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJDb250cm9sIik7CiAgICB9CiAgICAKICAgIGxldCBzZWxlY3RlZEJvdCA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiMUJvdEZvY3VzOwoKICAgIGlmKG1ldGFJbnB1dCAmJiBzZWxlY3RlZEJvdCkKICAgIHsKICAgICAgICBsZXQgc3RhdGUgPSB7fQoKICAgICAgICBzdGF0ZVtzZWxlY3RlZEJvdC5pZF0gPSBzZWxlY3RlZEJvdDsKCiAgICAgICAgbGV0IG5ld0ZpbGUgPSB7fQogICAgICAgIG5ld0ZpbGUudmVyc2lvbiA9IDE7CiAgICAgICAgbmV3RmlsZS5zdGF0ZSA9IHN0YXRlOwoKICAgICAgICBsZXQgZm9ybWF0dGVkRmlsZSA9IEpTT04uc3RyaW5naWZ5KG5ld0ZpbGUpOwoKICAgICAgICBhYjEubG9nKCJhYi0iKQoKICAgICAgICBvcy5zZXRDbGlwYm9hcmQoZm9ybWF0dGVkRmlsZSk7CiAgICAgICAgb3MudG9hc3QoImJvdCBjb3BpZWQgdG8gY2xpcGJvYXJkIik7CiAgICB9Cn0nAQRib3RzJGM2OGM1YjgyLWMwYTctNGE1YS05MTA0LTVkZDhlMzJhZTRlMgEnAMiVjsgL4hMGc3lzdGVtAgQAyJWOyAvjExZhYi0xLmFjdGlvbi5vcGVuX3NoZWV0JwDIlY7IC+ITC2Rlc2NyaXB0aW9uAgQAyJWOyAv6ExRTa2lsbCB0byBvcGVuIHNoZWV0LicAyJWOyAviEwlhYjFBY3Rpb24CBADIlY7IC48UBHRydWUnAMiVjsgL4hMEZm9ybQIEAMiVjsgLlBQHbm90aGluZycAyJWOyAviExFhYjFDb3JlTWVudUFjdGlvbgIEAMiVjsgLnBTKAkBjb25zdCBjdXJyZW50SW5zdCA9IG9zLmdldEN1cnJlbnRJbnN0KCk7CmNvbnN0IGN1cnJlbnREaW0gPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiMUFjdGl2ZURpbWVuc2lvbjsKY29uc3Qgc3RhdGUgPSBvcy5nZXRJbnB1dFN0YXRlKCJrZXlib2FyZCIsICJTaGlmdCIpOwoKaWYgKHN0YXRlKSAKewogICAgb3Mub3BlblVSTChgLz9pbnN0PSR7Y3VycmVudEluc3R9JnNoZWV0UG9ydGFsPSR7Y3VycmVudERpbX1gKTsKfQplbHNlCnsKICAgIGNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsID0gY3VycmVudERpbTsKfQoKYWIxLmxvZygiYWItMSBvcGVuIGRpbWVuc2lvbiBzaGVldCIpOycAyJWOyAviEwhyZW1lbWJlcgIEAMiVjsgL5xYo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAyJWOyAviExBhYjFDb3JlTWVudUxhYmVsAgQAyJWOyAuOFwpvcGVuIHNoZWV0JwDIlY7IC+ITEGFiMUJvdE1lbnVBY3Rpb24CBADIlY7IC5kXygJAY29uc3QgY3VycmVudEluc3QgPSBvcy5nZXRDdXJyZW50SW5zdCgpOwpjb25zdCBjdXJyZW50RGltID0gbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYjFCb3QudGFncy5saW5lVG87CmNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKCmlmIChzdGF0ZSkgCnsKICAgIG9zLm9wZW5VUkwoYC8/aW5zdD0ke2N1cnJlbnRJbnN0fSZzaGVldFBvcnRhbD0ke2N1cnJlbnREaW19YCk7Cn0KZWxzZQp7CiAgICBjb25maWdCb3QudGFncy5zaGVldFBvcnRhbCA9IGN1cnJlbnREaW07Cn0KCmFiMS5sb2coImFiLTEgb3BlbiBib3Qgc2hlZXQiKTsnAMiVjsgL4hMPYWIxQm90TWVudUxhYmVsAgQAyJWOyAvkGQ5vcGVuIGJvdCBzaGVldCcAyJWOyAviEw1tYW5pZmVzdGF0aW9uAgQAyJWOyAvzGSjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDIlY7IC+ITDmFiMUJvdE1lbnVJY29uAgQAyJWOyAuaGgp0YWJsZV92aWV3JwDIlY7IC+ITD2FiMUNvcmVNZW51SWNvbgIEAMiVjsgLpRoKdGFibGVfdmlldycAyJWOyAviExNhYjFCb3RNZW51U29ydE9yZGVyAgQAyJWOyAuwGgExJwDIlY7IC+ITCWFiMUlnbm9yZQIEAMiVjsgLshoEdHJ1ZSgAyJWOyAviEw1hYjFCb3RWZXJzaW9uAX0KJwDIlY7IC+ITD2FiMUJvdE1lbnVDb2xvcgIEAMiVjsgLuBoHIzU1RTY3OScAyJWOyAviExBhYjFDb3JlTWVudUNvbG9yAgQAyJWOyAvAGgcjNTVFNjc5JwEEYm90cyRlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcBJwDIlY7IC8gaBnN5c3RlbQIEAMiVjsgLyRoPYWItMS5hY3Rpb24uYXNrJwDIlY7IC8gaBGZvcm0CBADIlY7IC9kaB25vdGhpbmcoAMiVjsgLyBoPYWIxRXhwZXJpbWVudGFsAX4nAMiVjsgLyBoGb25DaGF0AgQAyJWOyAviGuIDQGlmICh0aGF0Lm1lc3NhZ2Uuc3Vic3RyaW5nKDAsIDMpICE9ICJhYjEiKSByZXR1cm47CgpsZXQgbWVzc2FnZSA9IHRoYXQubWVzc2FnZS5zdWJzdHJpbmcoNCk7CgppZiAobWVzc2FnZSA9PSAibGlzdGVuIiAmJiAhdGFncy5ncHRBY3RpdmUpCnsKICAgIGFiMS5sb2coImFiLTEgaXMgbGlzdGVuaW5nIik7CgogICAgb3MudG9hc3QoImFiLTEgaXMgbGlzdGVuaW5nIik7CgogICAgbWFza3MuZ3B0QWN0aXZlID0gdHJ1ZTsKCiAgICByZXR1cm47Cn0KZWxzZSBpZiAobWVzc2FnZSA9PSAibGlzdGVuIikKewogICAgYWIxLmxvZygiYWItMSBpcyBubyBsb25nZXIgbGlzdGVuaW5nIik7CgogICAgb3MudG9hc3QoImFiLTEgaXMgbm8gbG9uZ2VyIGxpc3RlbmluZyIpOwoKICAgIG1hc2tzLmdwdEFjdGl2ZSA9IG51bGw7CgogICAgcmV0dXJuOwp9CgphYjEubG9nKCJVU0VSOiAiICsgbWVzc2FnZSk7Cgp0aGlzQm90LmFza0dQVCgiQCIgKyBtZXNzYWdlKTsnAMiVjsgLyBoGYXNrR1BUAgQAyJWOyAvFHtwFQGlmICghdGFncy5ncHRBY3RpdmUpIHJldHVybjsKCmxldCBpbnF1aXJ5ID0gdGhhdC5zdWJzdHJpbmcoMSk7CgphYjEubG9nKCJhYi0xOiBUaGlua2luZyBhYm91dCAiICsgaW5xdWlyeSk7CgppZiAobGlua3MucmVtZW1iZXIudGFncy5hYjFHcmlkRm9jdXMpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYC4gQm90IG11c3QgaW5jbHVkZSB7JHtsaW5rcy5yZW1lbWJlci50YWdzLmFiMUdyaWRGb2N1cy5kaW1lbnNpb259OiB0cnVlLCAke2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzLmRpbWVuc2lvbn1YOiAke2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzLnBvc2l0aW9uLnh9LCAke2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxR3JpZEZvY3VzLmRpbWVuc2lvbn1ZOiR7bGlua3MucmVtZW1iZXIudGFncy5hYjFHcmlkRm9jdXMucG9zaXRpb24ueX19LmAKfQoKY29uc3QgYW5zd2VyID0gYXdhaXQgdGhpc0JvdC5zdWJtaXRSZXF1ZXN0R1BUKGlucXVpcnkpOwoKYWIxLmxvZygiYWItMTogW0FOU1dFUl0gIiArIGFuc3dlcik7Cgpjb25zdCBleGVjdXRhYmxlID0gYW5zd2VyLnN1YnN0cmluZyhhbnN3ZXIuaW5kZXhPZigiYGBgIikgKyAzLCBhbnN3ZXIubGFzdEluZGV4T2YoImBgYCIpKS50cmltKCk7CgphYjEubG9nKCJhYi0xOiBbRXhlY3V0ZV0gIiArIGV4ZWN1dGFibGUpOwpvcy5ydW4oZXhlY3V0YWJsZSk7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiMUNsaWNrKCk7KADIlY7IC8gaCWdwdEFjdGl2ZQF4JwDIlY7IC8gaEHN1Ym1pdFJlcXVlc3RHUFQCBADIlY7IC6Mk9QZAYXN5bmMgZnVuY3Rpb24gc2VuZENoYXRHcHRSZXF1ZXN0KHByb21wdCkgewogICAgY29uc3QgY2hhdEdwdFJlcXVlc3QgPSB7CiAgICAgICAgIm1vZGVsIjogImdwdC0zLjUtdHVyYm8iLAogICAgICAgICJtZXNzYWdlcyI6IFsKICAgICAgICAgICAgeyByb2xlOiAic3lzdGVtIiwgY29udGVudDogdGFncy5wcm9tcHR9LAogICAgICAgICAgICB7IHJvbGU6ICJ1c2VyIiwgY29udGVudDogcHJvbXB0IH0KICAgICAgICBdLAogICAgICAgICJ0ZW1wZXJhdHVyZSI6IDAsCiAgICAgICAgIm1heF90b2tlbnMiOiAxNTAwLAogICAgICAgICJ0b3BfcCI6IDEsCiAgICAgICAgImZyZXF1ZW5jeV9wZW5hbHR5IjogMCwKICAgICAgICAicHJlc2VuY2VfcGVuYWx0eSI6IDAuNiwKICAgICAgICAic3RvcCI6IFsiIEh1bWFuOiIsICIgQUk6Il0KICAgIH07CgogICAgY29uc3QgcmVzID0gYXdhaXQgd2ViLnBvc3QoImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucyIsIGNoYXRHcHRSZXF1ZXN0LCB7IGhlYWRlcnM6IHsgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwgIkF1dGhvcml6YXRpb24iOiAiQmVhcmVyIHNrLVdNNEtocmI4RG8wNGJwMmJaM0FFVDNCbGJrRkp6N2ZhNVlrR2FKaWtjTjZtZjRNUyIgfSB9KTsKICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHJldHVybiAiIjsKICAgIGlmIChyZXMuZGF0YS5jaG9pY2VzLmxlbmd0aCA8IDEpIHJldHVybiAiIjsKICAgIGNvbnN0IGFpUmVzcG9uc2UgPSByZXMuZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDsKCiAgICByZXR1cm4gYWlSZXNwb25zZTsKfQoKY29uc3QgYWlSZXNwID0gYXdhaXQgc2VuZENoYXRHcHRSZXF1ZXN0KHRoYXQpOwoKcmV0dXJuIGFpUmVzcDsnAMiVjsgLyBoGcHJvbXB0AgQAyJWOyAuZK+AMVGhlIGZvbGxvd2luZyBpcyBhIGNvbnZlcnNhdGlvbiB3aXRoIGFiMS4gYWIxIGlzIGhlbHBmdWwsIGNsZXZlciwgYW5kIGNhcGFibGUuIGFiMSB3aWxsIHJlc3BvbmQgd2l0aCB0aGUgY29ycmVjdCBqYXZhc2NyaXB0IGltcGxlbWVudGF0aW9uIChjb2RlKSBvZiB0aGUgcmVxdWVzdGVkIGFjdGlvbi4KCkhlcmUgaXMgYSBicmllZiBsaXN0IG9mIHRoaW5ncyBhYjEgY2FuIGRvOgotIENyZWF0ZSBib3RzCgpCb3RzIGFyZSBhIGNvbGxlY3Rpb24gb2YgdGFncywgYW5kIHRoZXkgY2FuIGJlIGNyZWF0ZWQgdXNpbmcgdGhlIGNyZWF0ZSgpIGZ1bmN0aW9uLgpUaGUgY3JlYXRlKCkgZnVuY3Rpb24gaXMgdXNlZCB0byBjcmVhdGUgb25lIG9yIG11bHRpcGxlIGJvdHMgb2JqZWN0cy4KY3JlYXRlKCkgcmV0dXJucyBhIGJvdCBvYmplY3Q7IGl0IGRvZXMgbm90IG5lZWQgdG8gYmUgc3RvcmVkIGluIGEgdmFyaWFibGUgb3IgY29uc3QuIAoKSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgcmVkIGJvdCBpbiB0aGUgaG9tZSBkaW1lbnNpb246CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIGNvbG9yOiAicmVkIiwKICAgIGZvcm06ICJjdWJlIgp9KTsKYGBgCgpBcyB5b3UgY2FuIHNlZSwgdGhlIGV4YW1wbGUgYWJvdmUgY3JlYXRlcyBhIGJvdCB3aXRoIHRoZSBgaG9tZWAgdGFnIHNldCB0byBgdHJ1ZWAgYW5kIHRoZSBgY29sb3JgIHRhZyBzZXQgdG8gYHJlZGAuClVubGVzcyBzcGVjaWZpZWQgb3RoZXJ3aXNlLCBhYjEgc2hvdWxkIGNyZWF0ZSBib3RzIHdpdGggdGhlIGBob21lYCB0YWcgc2V0IHRvIGB0cnVlYC4KCkRpbWVuc2lvbnMgYXJlIHRhZ3Mgd2hpY2ggZW5kIHVwIGJlaW5nIHZpc3VhbGl6ZWQgaW4gM0Qgc3BhY2UuIEluIGFkZGl0aW9uIHRvIGJlaW5nIGEgdGFnLCBgaG9tZWAgaXMgYWxzbyBhIGRpbWVuc2lvbi4KWW91IGNhbiBjb250cm9sIHRoZSBwb3NpdGlvbiB0aGF0IGEgYm90IGlzIHJlbmRlcmVkIGF0IGJ5IHVzaW5nIHRoZSBge2RpbWVuc2lvbn1Qb3NpdGlvbmAgdGFnLCB3aGVyZSBge2RpbWVuc2lvbn1gIGlzIHJlcGxhY2VkIHdpdGggdGhlIG5hbWUgb2YgdGhlIGRpbWVuc2lvbi4KSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgYm90IGF0IHBvc2l0aW9uICgzLCAyKSBpbiB0aGUgaG9tZSBkaW1lbnNpb246CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIGhvbWVQb3NpdGlvbjogJ+Keoe+4jzMsMScKfSk7CmBgYAoKTGlzdGVuZXJzIGFyZSB0YWdzIHdoaWNoIGNvbnRhaW4gSmF2YVNjcmlwdCBhbmQgcmVzcG9uZCB0byBjZXJ0YWluIGV2ZW50cy4gVGhleSB3b3JrIGxpa2Ugbm9ybWFsIHRhZ3MsIGV4Y2VwdCB0aGV5IG5lZWQgdG8gaGF2ZSBhIGBAYCBzeW1ib2wgYXQgdGhlIHN0YXJ0IG9mIHRoZSB0YWcgdmFsdWUuCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIGJvdCB3aXRoIGEgYG9uQ2xpY2tgIGxpc3RlbmVyOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBvbkNsaWNrOiBgQG9zLnRvYXN0KCJIZWxsbywgd29ybGQhIik7YAp9KTsKYGBgKADIlY7IC8gaB3Byb21wdDIBficAyJWOyAvIGghyZW1lbWJlcgIEAMiVjsgL9zco8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycAyJWOyAvIGhFhYjFDb3JlTWVudUFjdGlvbgIEAMiVjsgLnjj3BUBsZXQgaW5xdWlyeSA9IHRoYXQ7CmxldCBzcGFjZUNoZWNrID0gaW5xdWlyeS5pbmRleE9mKCIgIik7CmxldCB1cmxDaGVjayA9IGZhbHNlOwpsZXQgbWVudUJvdHMgPSBnZXRCb3RzKGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwsIHRydWUpOwoKd2hpc3BlcihtZW51Qm90cywgImFiMU1lbnVSZWZyZXNoIik7Cgp0cnkgCnsKICAgIG5ldyBVUkwoaW5xdWlyeSk7CgogICAgdXJsQ2hlY2sgPSB0cnVlOwp9IGNhdGNoIChlKSAKewogICAgdXJsQ2hlY2sgPSBmYWxzZTsKfQoKaWYgKHVybENoZWNrKQp7CiAgICAvL01BWSBORUVEIFRPIFBVVCBTT01FIFFVQUxJRklFUlMgSEVSRQoKICAgIC8vIGF3YWl0IGxpbmtzLmxlYXJuLmFiMUFkYXB0KCJhYjFDdWx0aXZhdGUiKTsKCiAgICAvLyBsZXQgY3VsdGl2YXRvciA9IGdldEJvdCgiYWIxQ3VsdGl2YXRlIik7CiAgICAvLyBsZXQgbmV3RGF0YSA9IGF3YWl0IGN1bHRpdmF0b3IuYWIxQ29yZU1lbnVBY3Rpb24odGhhdCk7CgogICAgLy8gY29uc29sZS5sb2cobmV3RGF0YSkKICAgIG9zLnRvYXN0KCJjdWx0aXZhdGUgYWN0aW9uIGNvbWluZyBzb29uIik7Cn0KZWxzZSBpZiAoc3BhY2VDaGVjayA9PSAtMSkKewogICAgbGlua3Muc2VhcmNoLm9uTG9va3VwQUIxRWdncyh7YWJJRDogaW5xdWlyeX0pOwp9CmVsc2UKewogICAgb3MudG9hc3QoImFza2luZyBhYi0xOiAiICsgdGhhdCk7CgogICAgbWFza3MuZ3B0QWN0aXZlID0gdHJ1ZTsKCiAgICB0aGlzQm90LmFza0dQVCgiQCIgKyB0aGF0KTsKfScAyJWOyAvIGhVhYjFDb3JlTWVudU9uR2VuZXJhdGUCBADIlY7IC5Y+WEB0YWdzLm9uU3VibWl0ID0gYEAgbGlua3MuYmFzZVNraWxsLmFiMUNvcmVNZW51QWN0aW9uKHRoYXQudGV4dCk7YDsKdGFncy5mb3JtID0gImlucHV0IjsnAMiVjsgLyBoUYWIxQ29yZU1lbnVTb3J0T3JkZXICBADIlY7IC+8+ATInAMiVjsgLyBoRYWIxR3JpZE1lbnVBY3Rpb24CBADIlY7IC/E+uAFAbGV0IG1lbnVCb3RzID0gZ2V0Qm90cyhjb25maWdCb3QudGFncy5tZW51UG9ydGFsLCB0cnVlKTsKCndoaXNwZXIobWVudUJvdHMsICJhYjFNZW51UmVmcmVzaCIpOwoKb3MudG9hc3QoImFza2luZyBhYi0xOiAiICsgdGhhdCk7CgptYXNrcy5ncHRBY3RpdmUgPSB0cnVlOwoKdGhpc0JvdC5hc2tHUFQoIkAiICsgdGhhdCk7JwDIlY7IC8gaFWFiMUdyaWRNZW51T25HZW5lcmF0ZQIEAMiVjsgLqkBYQHRhZ3Mub25TdWJtaXQgPSBgQCBsaW5rcy5iYXNlU2tpbGwuYWIxQ29yZU1lbnVBY3Rpb24odGhhdC50ZXh0KTtgOwp0YWdzLmZvcm0gPSAiaW5wdXQiOycAyJWOyAvIGg1tYW5pZmVzdGF0aW9uAgQAyJWOyAuDQSjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDIlY7IC8gaFGFiMUdyaWRNZW51U29ydE9yZGVyAgQAyJWOyAuqQQItMScAyJWOyAvIGhBhYjFHcmlkTWVudUxhYmVsAgQAyJWOyAutQQhhc2sgYWItMScAyJWOyAvIGhBhYjFDb3JlTWVudUxhYmVsAgQAyJWOyAu2QQhhc2sgYWItMScAyJWOyAvIGg9hYjFDb3JlTWVudUljb24CBADIlY7IC79BBGN1YmUnAMiVjsgLyBoPYWIxR3JpZE1lbnVJY29uAgQAyJWOyAvEQQRjdWJlJwDIlY7IC8gaCmVkaXRQcm9tcHQCBADIlY7IC8lBtAdAc2hvdXQoImFiMU1lbnVSZWZyZXNoIik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYjFNZW51IjsKCmxldCBwcm9tcHRNZW51QnV0dG9uID0ge307Cgpwcm9tcHRNZW51QnV0dG9uLmFiMU1lbnUgPSB0cnVlOwpwcm9tcHRNZW51QnV0dG9uLmFiMU1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwpwcm9tcHRNZW51QnV0dG9uLm1hbmlmZXN0YXRpb24gPSB0YWdzLm1hbmlmZXN0YXRpb247CnByb21wdE1lbnVCdXR0b24ucmVtZW1iZXIgPSB0YWdzLnJlbWVtYmVyOwpwcm9tcHRNZW51QnV0dG9uLmdwdEJvdCA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CnByb21wdE1lbnVCdXR0b24ubGFiZWwgPSAibG9hZCBwcm9tcHQiOwpwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNsb3VkX2Rvd25sb2FkIjsKcHJvbXB0TWVudUJ1dHRvbi5vbkNsaWNrID0gIkAgbGlua3MuZ3B0Qm90LnVwZGF0ZVByb21wdCgnbG9hZCcpOyI7CgpsaW5rcy5tZW51LmFiMUNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7Cgpwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gInNhdmUgcHJvbXB0IjsKcHJvbXB0TWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJiYWNrdXAiOwpwcm9tcHRNZW51QnV0dG9uLm9uQ2xpY2sgPSAiQCBsaW5rcy5ncHRCb3QudXBkYXRlUHJvbXB0KCdzYXZlJyk7IjsKCmxpbmtzLm1lbnUuYWIxQ3JlYXRlTWVudUJ1dHRvbihwcm9tcHRNZW51QnV0dG9uKTsKCm1hc2tzLm9uR3JpZENsaWNrID0gYEAgY29uZmlnQm90Lm1hc2tzLnRhZ1BvcnRhbCA9IG51bGw7Cgp0YWdQb3J0YWxCb3QubWFza3MudGFnUG9ydGFsQW5jaG9yUG9pbnQgPSBudWxsOwpgOwoKdGFnUG9ydGFsQm90Lm1hc2tzLnRhZ1BvcnRhbEFuY2hvclBvaW50ID0gInRvcCI7Cgpjb25maWdCb3QubWFza3MudGFnUG9ydGFsID0gdGhpc0JvdC5pZCArICIucHJvbXB0IjsnAMiVjsgLyBoEbWVudQIEAMiVjsgL/Ego8J+Ul2IzMGM2YzVkLWE0ZjctNDI2Ni1iYTM4LTM5M2RjOTVlMWVjYicAyJWOyAvIGgx1cGRhdGVQcm9tcHQCBADIlY7IC6NJ0QhAc2hvdXQoImFiMU1lbnVSZWZyZXNoIik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYjFNZW51IjsKCmxldCBwcm9tcHRNZW51QnV0dG9uID0ge307Cgpwcm9tcHRNZW51QnV0dG9uLmFiMU1lbnUgPSB0cnVlOwpwcm9tcHRNZW51QnV0dG9uLmZvcm0gPSAiaW5wdXQiOwpwcm9tcHRNZW51QnV0dG9uLmFiMU1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwpwcm9tcHRNZW51QnV0dG9uLm1hbmlmZXN0YXRpb24gPSB0YWdzLm1hbmlmZXN0YXRpb247CnByb21wdE1lbnVCdXR0b24ucmVtZW1iZXIgPSB0YWdzLnJlbWVtYmVyOwpwcm9tcHRNZW51QnV0dG9uLmdwdEJvdCA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CgppZiAodGhhdCA9PSAibG9hZCIpCnsKICAgIHByb21wdE1lbnVCdXR0b24ubGFiZWwgPSAibG9hZCBwcm9tcHQiOwogICAgcHJvbXB0TWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJjbG91ZF9kb3dubG9hZCI7CiAgICBwcm9tcHRNZW51QnV0dG9uLm9uU3VibWl0ID0gIkAgbGlua3MuZ3B0Qm90LmxvYWRQcm9tcHQodGhhdC50ZXh0KTsiOwp9CmVsc2UKewogICAgcHJvbXB0TWVudUJ1dHRvbi5sYWJlbCA9ICJzYXZlIHByb21wdCI7CiAgICBwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImJhY2t1cCI7CiAgICBwcm9tcHRNZW51QnV0dG9uLm9uU3VibWl0ID0gIkAgbGlua3MuZ3B0Qm90LnNhdmVQcm9tcHQodGhhdC50ZXh0KTsiOwp9CgpsaW5rcy5tZW51LmFiMUNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7Cgpwcm9tcHRNZW51QnV0dG9uLmZvcm0gPSBudWxsOwpwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gIiAgIjsKcHJvbXB0TWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJjZW50ZXIiOwpwcm9tcHRNZW51QnV0dG9uLmNvbG9yID0gIiNmMjQ3MjciOwpwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNhbmNlbCI7CnByb21wdE1lbnVCdXR0b24ub25TdWJtaXQgPSBudWxsOwpwcm9tcHRNZW51QnV0dG9uLm9uQ2xpY2sgPSAiQCBsaW5rcy5ncHRCb3QuZWRpdFByb21wdCgpOyI7CgpsaW5rcy5tZW51LmFiMUNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7JwDIlY7IC8gaCmxvYWRQcm9tcHQCBADIlY7IC/NR3QJAY29uc3QgcHJvbXB0TmFtZSA9ICJncHRfcHJvbXB0XyIgKyB0aGF0Owpjb25zdCBuZXdQcm9tcHQgPSBhd2FpdCBvcy5nZXREYXRhKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxUmVjb3JkS2V5LCBwcm9tcHROYW1lLCBsaW5rcy5yZW1lbWJlci50YWdzLmFiMUVuZHBvaW50KTsKCmlmICghbmV3UHJvbXB0LnN1Y2Nlc3MpCnsKICAgIG9zLnRvYXN0KCJubyBwcm9tcHQgZm91bmQgYnkgdGhhdCBuYW1lIik7Cn0KZWxzZQp7CiAgICB0YWdzLnByb21wdCA9IG5ld1Byb21wdC5kYXRhOwp9CgppZiAoY29uZmlnQm90LnRhZ3MucHJvbXB0ID09IHRoYXQpCnsKICAgIHJldHVybjsKfQoKdGhpc0JvdC5lZGl0UHJvbXB0KCk7JwDIlY7IC8gaCnNhdmVQcm9tcHQCBADIlY7IC9FUmwNAY29uc3QgYXV0aG9yID0gYXdhaXQgb3MucmVxdWVzdEF1dGhCb3QoKTsKY29uc3QgcHJvbXB0TmFtZSA9ICJncHRfcHJvbXB0XyIgKyB0aGF0Owpjb25zdCBuZXdQcm9tcHQgPSBhd2FpdCBvcy5yZWNvcmREYXRhKGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWIxUmVjb3JkS2V5LCBwcm9tcHROYW1lLCB0YWdzLnByb21wdCwge2VuZHBvaW50OiBsaW5rcy5yZW1lbWJlci50YWdzLmFiMUVuZHBvaW50LCB1cGRhdGVQb2xpY3k6IFthdXRob3IuaWRdfSk7CgppZiAoIW5ld1Byb21wdC5zdWNjZXNzKQp7CiAgICBvcy50b2FzdCgic29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4iKTsKfQplbHNlCnsKICAgIG9zLnRvYXN0KCJwcm9tcHQgc2F2ZWQgYXMgIiArIHRoYXQpOwp9Cgp0aGlzQm90LmVkaXRQcm9tcHQoKTsnAMiVjsgLyBoKb25Cb3RBZGRlZAIEAMiVjsgL7VdOQGlmIChjb25maWdCb3QudGFncy5wcm9tcHQpCnsKICAgIHRoaXNCb3QubG9hZFByb21wdChjb25maWdCb3QudGFncy5wcm9tcHQpOwp9JwDIlY7IC8gaCWFiMUlnbm9yZQIEAMiVjsgLvFgEdHJ1ZSgAyJWOyAvIGg1hYjFCb3RWZXJzaW9uAX0HJwDIlY7IC8gaCWFiMUFjdGlvbgIEAMiVjsgLwlgEdHJ1ZScAyJWOyAvIGgZzZWFyY2gCBADIlY7IC8dYKPCflJdkODM3MTQ0NC05MTU4LTQ0MzYtOGZjNy04NGNjOTFiN2Y1MjUnAMiVjsgLyBoFbGVhcm4CBADIlY7IC+5YKPCflJc2NjU3Yjg2NS1lOTgzLTQ0MDEtOWZjOS1mNTQxOGQxOGE3ZjcnAQRib3RzJGY5ZmQ3ZTJlLTdjY2UtNDNmYi1iMjIzLWQzMmNiNDJiZWJlOAEnAMiVjsgLlVkGc3lzdGVtAgQAyJWOyAuWWRVhYi0xLmFjdGlvbi5jb2xvcl9ib3QnAMiVjsgLlVkEZm9ybQIEAMiVjsgLrFkHbm90aGluZycAyJWOyAuVWQlhYjFBY3Rpb24CBADIlY7IC7RZBHRydWUnAMiVjsgLlVkQYWIxQm90TWVudUFjdGlvbgIEAMiVjsgLuVmPAUBjb25zdCB0YXJnZXRCb3QgPSBsaW5rcy5yZW1lbWJlci5saW5rcy5hYjFCb3RGb2N1czsKCm9zLnNob3dJbnB1dEZvclRhZyh0YXJnZXRCb3QsICJjb2xvciIsIHsKICAgIHR5cGU6ICdjb2xvcicsCiAgICB0aXRsZTogJ3BpY2sgYSBjb2xvcicKfSk7KADIlY7IC5VZEGFiMUdyaWRNZW51TGFiZWwBficAyJWOyAuVWQ9hYjFCb3RNZW51TGFiZWwCBADIlY7IC8paBWNvbG9yJwDIlY7IC5VZDmFiMUJvdE1lbnVJY29uAgQAyJWOyAvQWgdwYWxldHRlJwDIlY7IC5VZCHJlbWVtYmVyAgQAyJWOyAvYWijwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDIlY7IC5VZE2FiMUJvdE1lbnVTb3J0T3JkZXICBADIlY7IC/9aATInAMiVjsgLlVkJYWIxSWdub3JlAgQAyJWOyAuBWwR0cnVlKADIlY7IC5VZDWFiMUJvdFZlcnNpb24BfQoA"}]}