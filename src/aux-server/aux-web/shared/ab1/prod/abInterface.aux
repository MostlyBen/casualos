{"version":2,"updates":[{"id":0,"timestamp":1722630491813,"update":"AZIBt4/zxQ4AJwEEYm90cyQxNzQxMGQ4My03ZWVlLTRhMWUtYjYzOC02NTQ2Mzc0ZDE3YzMBJwC3j/PFDgAGc3lzdGVtAgQAt4/zxQ4BEWFiLmludGVyZmFjZS5zY2FuJwC3j/PFDgAEZm9ybQIEALeP88UOEwdub3RoaW5nJwC3j/PFDgALYWJJbnRlcmZhY2UCBAC3j/PFDhsEdHJ1ZScAt4/zxQ4ACGFiSWdub3JlAgQAt4/zxQ4gBHRydWUoALeP88UOAAxhYkJvdFZlcnNpb24BfY4BJwC3j/PFDgAPb25RUkNvZGVTY2FubmVkAgQAt4/zxQ4mxgxAaWYgKCFidWlsZGVyVmVyc2lvbikKewogICAgcmV0dXJuOwp9CgphYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogc2Nhbm5lZCAiICsgdGhhdCk7CgppZiAoY29uZmlnQm90LnRhZ3MucHVibGlzaFNjYW4pCnsKICAgIG9zLmNsb3NlUVJDb2RlU2Nhbm5lcigpOwoKICAgIGxpbmtzLnN0b3JlLmFiUVJQdWJsaXNoKHRoYXQpOwp9CmVsc2UgaWYgKGNvbmZpZ0JvdC50YWdzLnByYWN0aWNlUGVybWl0U2NhbikKewogICAgbGV0IHNjYW5uZWRVUkw7CgogICAgY29uZmlnQm90LnRhZ3MucHJhY3RpY2VQZXJtaXRTY2FuID0gbnVsbDsKCiAgICBvcy5jbG9zZVFSQ29kZVNjYW5uZXIoKTsKCiAgICB0cnkKICAgIHsKICAgICAgICBzY2FubmVkVVJMID0gbmV3IFVSTCh0aGF0KTsKICAgIH0KICAgIGNhdGNoIChlKQogICAgewogICAgICAgIG9zLnRvYXN0KCJub3QgYSByZWNvZ25pemVkIHByYWN0aWNlIHBlcm1pdCIpOwoKICAgICAgICBjb25zb2xlLmxvZyhlKTsKCiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGxldCBwaENoZWNrID0gc2Nhbm5lZFVSTC5zZWFyY2hQYXJhbXMuaGFzKCJwaCIpOwogICAgbGV0IGluc3RDaGVjayA9IHNjYW5uZWRVUkwuc2VhcmNoUGFyYW1zLmhhcygiaW5zdCIpOwogICAgbGV0IGFiQ2hlY2sgPSBzY2FubmVkVVJMLnNlYXJjaFBhcmFtcy5oYXMoImFiIik7CiAgICBsZXQgY3dDaGVjayA9IHNjYW5uZWRVUkwuc2VhcmNoUGFyYW1zLmhhcygiY3ciKTsKCiAgICBpZiAocGhDaGVjayAmJiBpbnN0Q2hlY2sgJiYgYWJDaGVjayAmJiBjd0NoZWNrKQogICAgewogICAgICAgIG9zLmdvVG9VUkwodGhhdCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgb3MudG9hc3QoIm5vdCBhIHJlY29nbml6ZWQgcHJhY3RpY2UgcGVybWl0Iik7CiAgICB9CgogICAgc2hvdXQoImFiTWVudVJlZnJlc2giKTsKfQplbHNlIGlmIChjb25maWdCb3QudGFncy5hYlNjYW4pCnsKICAgIHNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgogICAgY29uZmlnQm90LnRhZ3MuYWJTY2FuID0gbnVsbDsKICAgIAogICAgb3MuY2xvc2VRUkNvZGVTY2FubmVyKCk7CgogICAgbGV0IHNjYW5uZWRVUkw7CgogICAgdHJ5IAogICAgewogICAgICAgIHNjYW5uZWRVUkwgPSBuZXcgVVJMKHRoYXQpOwogICAgfQogICAgY2F0Y2ggKGUpIAogICAgewogICAgICAgIGxpbmtzLnNlYXJjaC5hYkxUTVNlYXJjaCh7YWJJRDogdGhhdH0pOwoKICAgICAgICByZXR1cm47CiAgICB9CgogICAgaWYoc2Nhbm5lZFVSTC5zZWFyY2hQYXJhbXMuZ2V0KCJhYiIpID09ICJlZ2dDYXJ0b24iKQogICAgewogICAgICAgIG9zLmdvVG9VUkwodGhhdCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgc2Nhbm5lZFVSTC5zZWFyY2hQYXJhbXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4gewogICAgICAgICAgICBsZXQgbmV3VGFnID0ga2V5OwogICAgICAgICAgICBsZXQgbmV3VmFsdWUgPSB2YWx1ZTsKCiAgICAgICAgICAgIGNvbmZpZ0JvdC50YWdzW25ld1RhZ10gPSBuZXdWYWx1ZTsKICAgICAgICB9KTsKCiAgICAgICAgbGlua3Muc2VhcmNoLmFiTFRNU2VhcmNoKHthYklEOiBjb25maWdCb3QudGFncy5hYn0pOwogICAgfQp9JwC3j/PFDgAFc3RvcmUCBAC3j/PFDu0MKPCflJc3NmFmMDQ5MS0zOTE5LTQ5ODQtYWE4Mi0yMmM3NDJmNDI2M2YnALeP88UOAAZzZWFyY2gCBAC3j/PFDpQNKPCflJdkODM3MTQ0NC05MTU4LTQ0MzYtOGZjNy04NGNjOTFiN2Y1MjUnALeP88UOABBhYkNvcmVNZW51QWN0aW9uAgQAt4/zxQ67DTdAb3Mub3BlblFSQ29kZVNjYW5uZXIoKTsKCmNvbmZpZ0JvdC50YWdzLmFiU2NhbiA9IHRydWU7JwC3j/PFDgAPYWJDb3JlTWVudUxhYmVsAgQAt4/zxQ7zDQRzY2FuJwC3j/PFDgAOYWJDb3JlTWVudUljb24CBAC3j/PFDvgND3FyX2NvZGVfc2Nhbm5lcicAt4/zxQ4AE2FiQ29yZU1lbnVTb3J0T3JkZXICBAC3j/PFDogOATMnAQRib3RzJDRhYWY2OTllLWFiYmYtNDRhOC04NWUxLTY4Y2JiNWRmMGUxZgEnALeP88UOig4Gc3lzdGVtAgQAt4/zxQ6LDhNhYi5pbnRlcmZhY2UubnVnZ2V0JwC3j/PFDooOBGZvcm0CBAC3j/PFDp8OB25vdGhpbmcnALeP88UOig4LYWJJbnRlcmZhY2UCBAC3j/PFDqcOBHRydWUnALeP88UOig4IYWJJZ25vcmUCBAC3j/PFDqwOBHRydWUoALeP88UOig4MYWJCb3RWZXJzaW9uAX2PAScAt4/zxQ6KDgxhYkxvYWROdWdnZXQCBAC3j/PFDrIOmAJAbGV0IG51Z2dldE5hbWUgPSB0aGF0Lm51Z2dldE5hbWU7CmxldCBmb3JtYXR0ZWROdWdnZXRBQiA9ICJudWdfIitudWdnZXROYW1lOwpsZXQgbG9hZGVkTnVnZ2V0ID0gYXdhaXQgbGlua3Muc2VhcmNoLm9uTG9va3VwQUJFZ2dzKHthYklEOiBmb3JtYXR0ZWROdWdnZXRBQiwgYWJWZXJzaW9uOiB0aGF0LnZlcnNpb24sIHJldHVyblR5cGU6ICJkYXRhIn0pOwoKbG9hZGVkTnVnZ2V0ID0gbG9hZGVkTnVnZ2V0LnN0YXRlW251Z2dldE5hbWVdLm51Z2dldDsKCnJldHVybiBsb2FkZWROdWdnZXQ7JwC3j/PFDooOD2FiUHVibGlzaE51Z2dldAIEALeP88UOyxDtAkAvL3Nob3V0KCJhYlB1Ymxpc2hOdWdnZXQiLCB7bnVnOiAibnVnTmFtZSIsIGRhdGE6IGRhdGF9KTsgIEFERCBFR0cgSUQgRVZFTlRVQUxMWQpsZXQgdGVzdE51Z2dldCA9IHRoYXQuZGF0YTsKbGV0IGZvcm1hdHRlZE51Z2dldCA9IHtpZDogdGhhdC5udWcsIG51Z2dldDogdGVzdE51Z2dldH07CmxldCB0ZXN0TnVnZ2V0TmFtZSA9IHRoYXQubnVnOwpsZXQgZm9ybWF0dGVkTnVnZ2V0QUIgPSAibnVnXyIrdGVzdE51Z2dldE5hbWU7CgptYXNrcy5udWdnZXRUb1B1Ymxpc2ggPSBmb3JtYXR0ZWROdWdnZXRBQjsKCmxpbmtzLnN0b3JlLmFiUHVibGlzaEFCKHthYjogZm9ybWF0dGVkTnVnZ2V0QUIsIHRhcmdldDogZm9ybWF0dGVkTnVnZ2V0fSk7JwC3j/PFDooOD2ltcGxlbWVudE51Z2dldAIEALeP88UOuROxB0BsZXQgbnVnZ2V0TmFtZSA9IHRoYXQubnVnZ2V0OwpsZXQgbnVnZ2V0VmVyc2lvbkNoZWNrID0gbnVnZ2V0TmFtZS5pbmRleE9mKCIudiIpOwpsZXQgdmVyc2lvbjsKCmlmIChudWdnZXRWZXJzaW9uQ2hlY2sgIT0gLTEpCnsKICAgIG51Z2dldE5hbWUgPSBudWdnZXROYW1lLnN1YnN0cmluZygwLCBudWdnZXRWZXJzaW9uQ2hlY2spOwoKICAgIGxldCB2ZXJzaW9uQ2hlY2sgPSB0aGF0Lm51Z2dldC5zdWJzdHJpbmcobnVnZ2V0VmVyc2lvbkNoZWNrICsgMik7CgogICAgaWYgKGlzTmFOKHZlcnNpb25DaGVjaykpCiAgICB7CiAgICAgICAgY29uc29sZS5sb2codmVyc2lvbkNoZWNrLCAidmVyc2lvbiBpcyBub3QgYSBudW1iZXIiKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICB2ZXJzaW9uID0gTnVtYmVyKHZlcnNpb25DaGVjayk7CiAgICB9Cn0KY29uc29sZS5sb2cobnVnZ2V0TmFtZSwgdmVyc2lvbik7CmxldCBudWdEYXRhID0gYXdhaXQgdGhpc0JvdC5hYkxvYWROdWdnZXQoe251Z2dldE5hbWU6IG51Z2dldE5hbWUsIHZlcnNpb246IHZlcnNpb259KTsKCmlmIChudWdEYXRhID09ICJhYklEIG5vdCBmb3VuZCIpCnsKICAgIG9zLnRvYXN0KCJudWdnZXQgbm90IGZvdW5kIik7Cn0KZWxzZQp7CiAgICBsZXQgdGFyZ2V0Qm90ID0gZ2V0Qm90KCJpZCIsIHRoYXQuYm90KTsKICAgIGxldCB0YXJnZXRUYWcgPSB0YXJnZXRCb3QucmF3W3RoYXQudGFnXS50b1N0cmluZygpOwogICAgbGV0IHRhcmdldE51ZyA9ICJ7IiArIHRoYXQubnVnZ2V0ICsgIn0iOyAKICAgIGxldCBudWdQb3MgPSB0YXJnZXRUYWcuaW5kZXhPZih0YXJnZXROdWcpOwoKICAgIGRlbGV0ZVRhZ1RleHQodGFyZ2V0Qm90LCB0aGF0LnRhZywgbnVnUG9zLCB0YXJnZXROdWcubGVuZ3RoKTsKICAgIGluc2VydFRhZ1RleHQodGFyZ2V0Qm90LCB0aGF0LnRhZywgbnVnUG9zLCBudWdEYXRhKTsKfScAt4/zxQ6KDgxudWdnZXRCdXR0b24CBAC3j/PFDusa9QxAbGV0IHRhZ1ZhbHVlID0gdGhhdC50YWdWYWx1ZTsKbGV0IHJlZ2V4ID0gL1xuL2dpOwpsZXQgYnJlYWtDaGVjazsKbGV0IGJyZWFrQXJyYXkgPSBbMF07Ci8vbGV0IGNyZWF0ZWRCdXR0b25zID0gW107Cgp3aGlsZSAoYnJlYWtDaGVjayA9IHJlZ2V4LmV4ZWModGFnVmFsdWUpKQp7CiAgICBicmVha0FycmF5LnB1c2goYnJlYWtDaGVjay5pbmRleCk7Cn0KCmxldCBuZXdOdWdnZXRCdXR0b24gPSB7fTsKCm5ld051Z2dldEJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwpuZXdOdWdnZXRCdXR0b24uZm9ybSA9ICJjb2RlQnV0dG9uIjsKbmV3TnVnZ2V0QnV0dG9uLnRhcmdldEJvdCA9IHRoYXQuYm90LmlkOwpuZXdOdWdnZXRCdXR0b24udGFyZ2V0VGFnID0gdGhhdC50YWc7Cm5ld051Z2dldEJ1dHRvbi5sYWJlbCA9ICJsb2FkIG51Z2dldCI7Cm5ld051Z2dldEJ1dHRvbi5udWdnZXRSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbmV3TnVnZ2V0QnV0dG9uW3RoYXQuYm90LmlkICsgIi4iICsgdGhhdC50YWddID0gdHJ1ZTsKbmV3TnVnZ2V0QnV0dG9uLm51Z2dldE1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwpuZXdOdWdnZXRCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm51Z2dldE1hbmFnZXIuaW1wbGVtZW50TnVnZ2V0KHtib3Q6IHRhZ3MudGFyZ2V0Qm90LCBudWdnZXQ6IHRhZ3MudGFyZ2V0TnVnZ2V0LCB0YWc6IHRhZ3MudGFyZ2V0VGFnfSk7CgpkZXN0cm95KHRoaXNCb3QpO2A7Cgpmb3IgKGxldCBudWdzID0gMDsgbnVncyA8IHRoYXQubnVnZ2V0Lmxlbmd0aDsgbnVncysrKQp7CiAgICBsZXQgY3VycmVudE51Z2dldCA9IHRoYXQubnVnZ2V0W251Z3NdOwogICAgLy9sZXQgYnV0dG9uQ2hlY2sgPSBjcmVhdGVkQnV0dG9ucy5pbmRleE9mKGN1cnJlbnROdWdnZXQubnVnTmFtZSk7CgogICAgaWYgKCFjdXJyZW50TnVnZ2V0IHx8IGN1cnJlbnROdWdnZXQgPT0gdW5kZWZpbmVkKSAvL3x8IGJ1dHRvbkNoZWNrICE9IC0xCiAgICB7CiAgICAgICAgY29udGludWU7CiAgICB9CgogICAgaWYgKGN1cnJlbnROdWdnZXQubnVnUHVibGlzaCkKICAgIHsKICAgICAgICBuZXdOdWdnZXRCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm51Z2dldE1hbmFnZXIucGFja2FnZU51Z2dldCh7Ym90OiB0YWdzLnRhcmdldEJvdCwgbnVnZ2V0OiB0YWdzLnRhcmdldE51Z2dldCwgdGFnOiB0YWdzLnRhcmdldFRhZ30pOwoKICAgICAgICBkZXN0cm95KHRoaXNCb3QpO2A7CgogICAgICAgIG5ld051Z2dldEJ1dHRvbi5sYWJlbCA9ICJwdWJsaXNoICIgKyBjdXJyZW50TnVnZ2V0Lm51Z05hbWUgKyAiIG51Z2dldCI7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbmV3TnVnZ2V0QnV0dG9uLmxhYmVsID0gImxvYWQgIiArIGN1cnJlbnROdWdnZXQubnVnTmFtZSArICIgbnVnZ2V0IjsKICAgIH0KCiAgICBuZXdOdWdnZXRCdXR0b24udGFyZ2V0TnVnZ2V0ID0gY3VycmVudE51Z2dldC5udWdOYW1lOwogICAgbmV3TnVnZ2V0QnV0dG9uW3RoYXQuYm90LmlkICsgIi4iICsgdGhhdC50YWcgKyAiU3RhcnQiXSA9IGN1cnJlbnROdWdnZXQubnVnU3RhcnQ7CgogICAgY3JlYXRlKG5ld051Z2dldEJ1dHRvbik7CgogICAgLy9jcmVhdGVkQnV0dG9ucy5wdXNoKGN1cnJlbnROdWdnZXQubnVnTmFtZSk7Cn0KCnJldHVybjsnALeP88UOig4LbnVnZ2V0UGFyc2UCBAC3j/PFDt8npw9AY29uc3Qgb3JpZ2luYWxUYWdWYWx1ZSA9IHRoYXQuZWRpdGVkQm90LnJhd1t0aGF0LmVkaXRlZFRhZ107CmxldCB0YWdWYWx1ZSA9IG9yaWdpbmFsVGFnVmFsdWU7CgppZiAoIXRhZ1ZhbHVlKSAKewogICAgcmV0dXJuOwp9CmVsc2UgaWYgKHR5cGVvZiB0YWdWYWx1ZSAhPT0gInN0cmluZyIpIAp7CiAgICB0YWdWYWx1ZSA9IHRhZ1ZhbHVlLnRvU3RyaW5nKCk7Cn0KCmxldCBpbml0aWFsUG9zc2libGVOdWdQb3MgPSAwOwoKaWYgKGluaXRpYWxQb3NzaWJsZU51Z1BvcyA9PSAtMSkgCnsKICAgIHJldHVybjsKfQplbHNlCnsKICAgIHRhZ1ZhbHVlID0gdGFnVmFsdWUuc3Vic3RyaW5nKGluaXRpYWxQb3NzaWJsZU51Z1Bvcyk7Cn0KCmxldCBwb3NzaWJsZU51Z3MgPSBvcmlnaW5hbFRhZ1ZhbHVlLnJlcGxhY2UoL1tee10vZywgIiIpLmxlbmd0aDsKbGV0IHRvdGFsTnVnQnJlYWtzID0gb3JpZ2luYWxUYWdWYWx1ZS5yZXBsYWNlKC9bXlxuXS9nLCAiIikubGVuZ3RoOwpsZXQgYnJlYWtMZXZlbCA9IDA7CmxldCBudWdzVG9DaGVjayA9IFtdOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBwb3NzaWJsZU51Z3M7IGkrKykKewogICAgbGV0IGluaXRpYWxOdWdQb3MgPSB0YWdWYWx1ZS5pbmRleE9mKCJ7IikgKyAxOwogICAgbGV0IHBvc3NpYmxlTnVnRW5kID0gdGFnVmFsdWUuaW5kZXhPZigifSIpOwogICAgbGV0IHBvc3NpYmxlTnVnID0gdGFnVmFsdWUuc3Vic3RyaW5nKGluaXRpYWxOdWdQb3MsIHBvc3NpYmxlTnVnRW5kKTsKCiAgICBpZiAocG9zc2libGVOdWcuaW5kZXhPZigiICIpID09IC0xICYmIC9cbi9nLnRlc3QocG9zc2libGVOdWcpICE9IHRydWUgJiYgcG9zc2libGVOdWcubGVuZ3RoID4gMCAmJiBwb3NzaWJsZU51Zy5pbmRleE9mKCI6IikgPT0gLTEpCiAgICB7CiAgICAgICAgbGV0IG51Z0JyZWFrcyA9IHRhZ1ZhbHVlLnN1YnN0cmluZygwLCB0YWdWYWx1ZS5pbmRleE9mKCJ7Iitwb3NzaWJsZU51ZysifSIpKS5yZXBsYWNlKC9bXlxuXS9nLCAiIikubGVuZ3RoOwogICAgICAgIGxldCBwdWJsaXNoQ2hlY2sgPSB0YWdWYWx1ZS5zdWJzdHJpbmcoaW5pdGlhbE51Z1BvcyAtIDYsIGluaXRpYWxOdWdQb3MgLSAyKTsKICAgICAgICBsZXQgbnVnUHVibGlzaCA9IG51bGw7CgogICAgICAgIGlmIChwdWJsaXNoQ2hlY2sgPT0gIi5udWciKQogICAgICAgIHsKICAgICAgICAgICAgbnVnUHVibGlzaCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBicmVha0xldmVsICs9IG51Z0JyZWFrczsKCiAgICAgICAgbnVnQnJlYWtzID0gdG90YWxOdWdCcmVha3MgLSAodG90YWxOdWdCcmVha3MgLSBicmVha0xldmVsKTsKICAgICAgICAKICAgICAgICAvL0NIRUNLIElGICQgYmVmb3JlIG51Z2dldAogICAgICAgIGlmICh0YWdWYWx1ZS5zdWJzdHJpbmcoaW5pdGlhbE51Z1BvcyAtIDIsIGluaXRpYWxOdWdQb3MgLSAxKSAhPSAiJCIpCiAgICAgICAgewogICAgICAgICAgICBudWdzVG9DaGVjay5wdXNoKHtudWdOYW1lOiBwb3NzaWJsZU51ZywgbnVnU3RhcnQ6IG51Z0JyZWFrcyArIDEsIG51Z1B1Ymxpc2g6IG51Z1B1Ymxpc2h9KTsKICAgICAgICB9CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgbGV0IG51Z0JyZWFrcyA9IHRhZ1ZhbHVlLnN1YnN0cmluZygwLCB0YWdWYWx1ZS5pbmRleE9mKCJ9IikpLnJlcGxhY2UoL1teXG5dL2csICIiKS5sZW5ndGg7CgogICAgICAgIGJyZWFrTGV2ZWwgKz0gbnVnQnJlYWtzOwoKICAgICAgICBudWdCcmVha3MgPSB0b3RhbE51Z0JyZWFrcyAtICh0b3RhbE51Z0JyZWFrcyAtIGJyZWFrTGV2ZWwpOwogICAgfQoKICAgIHRhZ1ZhbHVlID0gdGFnVmFsdWUuc3Vic3RyaW5nKHBvc3NpYmxlTnVnRW5kICsgMSk7Cn0KCnRoaXNCb3QubnVnZ2V0QnV0dG9uKHsgbnVnZ2V0OiBudWdzVG9DaGVjaywgYm90OiB0aGF0LmVkaXRlZEJvdCwgdGFnOiB0aGF0LmVkaXRlZFRhZywgdGFnVmFsdWU6IG9yaWdpbmFsVGFnVmFsdWV9KTsnALeP88UOig4Nb25BQlB1Ymxpc2hlZAIEALeP88UOhzfBAUBjb25zb2xlLmxvZyh0aGF0LmFiLCB0YWdzLm51Z2dldFRvUHVibGlzaCkKCmlmICh0aGF0LmFiID09IHRhZ3MubnVnZ2V0VG9QdWJsaXNoKQp7CiAgICBvcy50b2FzdCgibnVnZ2V0IHB1Ymxpc2hlZCIpOwoKICAgIG1hc2tzLm51Z2dldFRvUHVibGlzaCA9IG51bGw7CgogICAgY29uZmlnQm90Lm1hc2tzLmFiVmVyc2lvbiA9IG51bGw7Cn0nALeP88UOig4Qb25BbnlCb3RzQ2hhbmdlZAIEALeP88UOyTi3BEBpZiAoY29uZmlnQm90ICYmIHRoYXRbMF0uYm90LmlkICE9IHRoaXNCb3QuaWQpIAp7CiAgICBpZiAoIWNvbmZpZ0JvdC50YWdzLmVkaXRpbmdCb3QpIHJldHVybjsgLy8gSWdub3JlIGlmIHRoZSBjb25maWdCb3QgaXNuJ3QgcmVhZHkgeWV0LgoKICAgIGNvbnN0IGVkaXRlZEJvdElEID0gY29uZmlnQm90LnRhZ3MuZWRpdGluZ0JvdC5yZXBsYWNlKCLwn5SXIiwgIiIpOwoKICAgIGlmICghdGhhdC5maW5kKHggPT4geC5ib3QuaWQgPT0gZWRpdGVkQm90SUQpKSByZXR1cm47IC8vIElmIHRoZSBib3QgY2hhbmdlZCB3YXNuJ3QgYmVpbmcgZWRpdGVkIGJ5IHRoZSB1c2VyIGlnbm9yZSBpdC4KCiAgICBjb25zdCBlZGl0ZWRUYWcgPSBjb25maWdCb3QudGFncy5lZGl0aW5nVGFnOwogICAgY29uc3QgZWRpdGVkQm90ID0gZ2V0Qm90KCJpZCIsIGVkaXRlZEJvdElEKTsKCiAgICBpZiAoZWRpdGVkQm90ICYmIGVkaXRlZFRhZykgCiAgICB7CiAgICAgICAgc2hvdXQoIm51Z2dldFJlc2V0Iik7CgogICAgICAgIHRoaXNCb3QubnVnZ2V0UGFyc2UoeyBlZGl0ZWRCb3QsIGVkaXRlZFRhZyB9KTsKICAgIH0KfScAt4/zxQ6KDghvbkNyZWF0ZQIEALeP88UO/zxMQHRhZ3MubGlzdGVuaW5nID0gZmFsc2U7CgovL3NldFRhZ01hc2sodGhpc0JvdCwgImxpc3RlbmluZyIsIHRydWUsICJsb2NhbCIpOycAt4/zxQ6KDg1wYWNrYWdlTnVnZ2V0AgQAt4/zxQ7MPfgGQGNvbnN0IHRhcmdldEJvdCA9IGdldEJvdCgiaWQiLCB0aGF0LmJvdCk7CmNvbnN0IHRhZ1RleHQgPSB0YXJnZXRCb3QucmF3W3RoYXQudGFnXTsKCmlmIChjb25maWdCb3QudGFncy5jdXJzb3JTdGFydEluZGV4IHx8IGNvbmZpZ0JvdC50YWdzLmN1cnNvckVuZEluZGV4KQp7CiAgICBsZXQgc3RhcnRQb3MgPSBjb25maWdCb3QudGFncy5jdXJzb3JTdGFydEluZGV4OwogICAgbGV0IGVuZFBvcyA9IGNvbmZpZ0JvdC50YWdzLmN1cnNvckVuZEluZGV4OwoKICAgIGlmIChzdGFydFBvcyA9PSBlbmRQb3MpCiAgICB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgZWxzZSBpZiAoc3RhcnRQb3MgPiBlbmRQb3MpCiAgICB7CiAgICAgICAgbGV0IG5ld1N0YXJ0UG9zID0gZW5kUG9zOwogICAgICAgIGxldCBuZXdFbmRQb3MgPSBzdGFydFBvczsKCiAgICAgICAgc3RhcnRQb3MgPSBuZXdTdGFydFBvczsKICAgICAgICBlbmRQb3MgPSBuZXdFbmRQb3M7CiAgICB9CgogICAgbGV0IGRhdGEgPSB0YWdUZXh0LnN1YnN0cmluZyhzdGFydFBvcywgZW5kUG9zICsgMSk7CgogICAgc2hvdXQoImFiUHVibGlzaE51Z2dldCIsIHtudWc6IHRoYXQubnVnZ2V0LCBkYXRhOiBkYXRhfSk7CgogICAgb3MudG9hc3QoIm51ZyBpcyBwdWJsaXNoaW5nIiwgMTApOwoKICAgIGxldCB0YXJnZXROdWcgPSAiLm51ZyB7IiArIHRoYXQubnVnZ2V0ICsgIn0iOyAKICAgIGxldCBudWdQb3MgPSB0YXJnZXRCb3QucmF3W3RoYXQudGFnXS5pbmRleE9mKHRhcmdldE51Zyk7CgogICAgZGVsZXRlVGFnVGV4dCh0YXJnZXRCb3QsIHRoYXQudGFnLCBudWdQb3MsIHRhcmdldE51Zy5sZW5ndGgpOwp9CmVsc2UKewogICAgb3MudG9hc3QoImNhbm5vdCByZWFkIG51Z2dldCB0byBiZSBwdWJsaXNoZWQiKQp9JwC3j/PFDooOCHJlbWVtYmVyAgQAt4/zxQ7FRCjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwC3j/PFDooOBnNlYXJjaAIEALeP88UO7EQo8J+Ul2Q4MzcxNDQ0LTkxNTgtNDQzNi04ZmM3LTg0Y2M5MWI3ZjUyNScAt4/zxQ6KDgVzdG9yZQIEALeP88UOk0Uo8J+Ulzc2YWYwNDkxLTM5MTktNDk4NC1hYTgyLTIyYzc0MmY0MjYzZicAt4/zxQ6KDglsaXN0ZW5pbmcCBAC3j/PFDrpFBWZhbHNlJwEEYm90cyRiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2IBJwC3j/PFDsBFBnN5c3RlbQIEALeP88UOwUURYWIuaW50ZXJmYWNlLm1lbnUnALeP88UOwEUEZm9ybQIEALeP88UO00UHbm90aGluZycAt4/zxQ7ARQtkZXNjcmlwdGlvbgIEALeP88UO20UmVGhpcyBza2lsbCBpcyBkZXNpZ25lZCBmb3IgbWVudSBzdHVmZi4oALeP88UOwEULYWJJbnRlcmZhY2UBeCcAt4/zxQ7ARQphYk9wZW5NZW51AgQAt4/zxQ6DRukKQGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90SW5CYWNrZ3JvdW5kKCk7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYk1lbnUiOwoKbGV0IG1lbnVUeXBlID0gdGhhdCA/ICJhYiIgKyB0aGF0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhhdC5zbGljZSgxKSArICJNZW51IjogImFiQ29yZU1lbnUiOyAvL3NldCB1cCBhIGNoZWNrIHRvIHNlZSB3aGF0IHR5cGUgb2YgbWVudSBzaG91bGQgYmUgb2NjdXJpbmcgW2NvcmUsIGJvdCwgZ3JpZCwgaW5zdF0KbGV0IG1lbnVTa2lsbHMgPSBnZXRCb3RzKG1lbnVUeXBlICsgIkFjdGlvbiIpOwpsZXQgbWF4T3B0aW9ucyA9IG1lbnVUeXBlID09ICJpbnN0IiA/IDcgOiA1OwpsZXQgYWJNZW51QnV0dG9uID0ge307CgphYk1lbnVCdXR0b24uYWJNZW51ID0gdHJ1ZTsKYWJNZW51QnV0dG9uLnJlbWVtYmVyID0gdGFncy5yZW1lbWJlcjsKYWJNZW51QnV0dG9uLm1hbmlmZXN0YXRpb24gPSB0YWdzLm1hbmlmZXN0YXRpb247CmFiTWVudUJ1dHRvbi5hYk1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwphYk1lbnVCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLmJhc2VTa2lsbC4ke21lbnVUeXBlICsgIkFjdGlvbiJ9KHtib3Q6IHRoaXNCb3R9KTtgOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBtZW51U2tpbGxzLmxlbmd0aDsgaSsrKS8vQUREIExPR0lDIEZPUiBNT1JFIE9QVElPTlMgVEhBTiA1IDogbWF4T3B0aW9ucwp7CiAgICBsZXQgY3VycmVudFNraWxsID0gbWVudVNraWxsc1tpXTsKCiAgICBhYk1lbnVCdXR0b24uYmFzZVNraWxsID0gIvCflJciICsgY3VycmVudFNraWxsLmlkOwogICAgYWJNZW51QnV0dG9uLmxhYmVsID0gY3VycmVudFNraWxsLnRhZ3NbbWVudVR5cGUgKyAiTGFiZWwiXTsKICAgIGFiTWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9IGN1cnJlbnRTa2lsbC50YWdzW21lbnVUeXBlICsgIkljb24iXTsKICAgIGFiTWVudUJ1dHRvbi5vbkNyZWF0ZSA9IGN1cnJlbnRTa2lsbC50YWdzW21lbnVUeXBlICsgIk9uR2VuZXJhdGUiXTsKICAgIGFiTWVudUJ1dHRvbi5hYk1lbnVTb3J0T3JkZXIgPSBjdXJyZW50U2tpbGwudGFnc1ttZW51VHlwZSArICJTb3J0T3JkZXIiXTsKICAgIGFiTWVudUJ1dHRvbi5jb2xvciA9IGN1cnJlbnRTa2lsbC50YWdzW21lbnVUeXBlICsgIkNvbG9yIl0gPyBjdXJyZW50U2tpbGwudGFnc1ttZW51VHlwZSArICJDb2xvciJdIDogbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCiAgICB0aGlzQm90LmFiQ3JlYXRlTWVudUJ1dHRvbihhYk1lbnVCdXR0b24pOwp9Cgp0aGlzQm90Lm1hc2tzLm9uR3JpZENsaWNrID0gIkAgc2hvdXQoJ2FiTWVudVJlZnJlc2gnKTsgbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKCk7IjsnALeP88UOwEUSYWJDcmVhdGVNZW51QnV0dG9uAgQAt4/zxQ7rUOcDQGxldCBhZGRpdGlvbmFsVGFncyA9IHRoYXQ7CmxldCBuZXdNZW51QnV0dG9uID0ge307CgpuZXdNZW51QnV0dG9uLnNwYWNlID0gInRlbXBMb2NhbCI7Cm5ld01lbnVCdXR0b24uY29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwpuZXdNZW51QnV0dG9uLmxhYmVsQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZUxhYmVsQ29sb3IgPz8gImJsYWNrIjsKbmV3TWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbmV3TWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyAiYm9yZGVyLXJhZGl1cyI6IjhweCIsICJtYXJnaW4tdG9wIjoiM3B4In07Cgpmb3IgKGNvbnN0IHRhZyBpbiBhZGRpdGlvbmFsVGFncykKewogICAgbmV3TWVudUJ1dHRvblt0YWddID0gYWRkaXRpb25hbFRhZ3NbdGFnXTsKfQoKbmV3TWVudUJ1dHRvbiA9IGNyZWF0ZShuZXdNZW51QnV0dG9uKTsKCnJldHVybiBuZXdNZW51QnV0dG9uOycAt4/zxQ7ARQ1hYk1lbnVSZWZyZXNoAgQAt4/zxQ7TVIEBQGlmIChjb25maWdCb3QudGFncy5tZW51UG9ydGFsPy5zdWJzdHJpbmcoMCwyKSA9PSAiYWIiKQp7CiAgICBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CgogICAgbWFza3Mub25HcmlkQ2xpY2sgPSBudWxsOwp9JwC3j/PFDsBFCHJlbWVtYmVyAgQAt4/zxQ7VVSjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwC3j/PFDsBFDW1hbmlmZXN0YXRpb24CBAC3j/PFDvxVKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnALeP88UOwEURYWJFbnZpcm9ubWVudE1lbnUCBAC3j/PFDqNW0AZAc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gImFiTWVudSI7CgpsZXQgYWJNZW51QnV0dG9uID0ge307CgphYk1lbnVCdXR0b24uYWJNZW51ID0gdHJ1ZTsKYWJNZW51QnV0dG9uLmFiTWVudVJlZnJlc2ggPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CmFiTWVudUJ1dHRvbi5tYW5pZmVzdGF0aW9uID0gdGFncy5tYW5pZmVzdGF0aW9uOwphYk1lbnVCdXR0b24ucmVtZW1iZXIgPSB0YWdzLnJlbWVtYmVyOwphYk1lbnVCdXR0b24ubGVhcm4gPSB0YWdzLmxlYXJuOwoKYnV0dG9uTG9vcDoKZm9yIChsZXQgaSA9IDA7IGkgPCB0YWdzLmFiRW52aXJvbm1lbnRBcnJheS5sZW5ndGg7IGkrKykKewogICAgbGV0IGFjdGl2ZUJ1dHRvbiA9IHRhZ3MuYWJFbnZpcm9ubWVudEFycmF5W2ldOwoKICAgIGFiTWVudUJ1dHRvbi5hYk1lbnVTb3J0T3JkZXIgPSBhY3RpdmVCdXR0b24uYWJFbnZpcm9ubWVudE1lbnVTb3J0T3JkZXI7CgogICAgaWYgKGFjdGl2ZUJ1dHRvbi5hYkVudmlyb25tZW50R2F0ZSkKICAgIHsKICAgICAgICBpZiAoIWxpbmtzW2FjdGl2ZUJ1dHRvbi5hYkVudmlyb25tZW50R2F0ZV0pCiAgICAgICAgewogICAgICAgICAgICBjb250aW51ZSBidXR0b25Mb29wOwogICAgICAgIH0KICAgIH0KCiAgICBsZXQgbmV3QnV0dG9uRGF0YSA9IHsuLi5hYk1lbnVCdXR0b24sIC4uLmFjdGl2ZUJ1dHRvbn07CgogICAgdGhpc0JvdC5hYkNyZWF0ZU1lbnVCdXR0b24obmV3QnV0dG9uRGF0YSk7Cn0KCnRoaXNCb3QubWFza3Mub25HcmlkQ2xpY2sgPSAiQCBzaG91dCgnYWJNZW51UmVmcmVzaCcpOyBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soKTsiOycAt4/zxQ7ARQVsZWFybgIEALeP88UO9Fwo8J+UlzY2NTdiODY1LWU5ODMtNDQwMS05ZmM5LWY1NDE4ZDE4YTdmNycAt4/zxQ7ARQNncHQCBAC3j/PFDptdKPCflJdlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcnALeP88UOwEUIYWJJZ25vcmUCBAC3j/PFDsJdBHRydWUoALeP88UOwEUMYWJCb3RWZXJzaW9uAX2TAScAt4/zxQ7ARQZzZWFyY2gCBAC3j/PFDshdKPCflJdkODM3MTQ0NC05MTU4LTQ0MzYtOGZjNy04NGNjOTFiN2Y1MjUnALeP88UOwEUGbnVnZ2V0AgQAt4/zxQ7vXSjwn5SXNGFhZjY5OWUtYWJiZi00NGE4LTg1ZTEtNjhjYmI1ZGYwZTFmJwC3j/PFDsBFBXRlc3RzAgQAt4/zxQ6WXijwn5SXYjgzZDk3MmItMDUzNS00MDUxLWI1ODktNDFjZWRhODUzNWYxJwC3j/PFDsBFD29uUG9ydGFsQ2hhbmdlZAIEALeP88UOvV5uQGlmICh0aGF0LnBvcnRhbCA9PSAic3lzdGVtUG9ydGFsIiAmJiAhdGhhdC5kaW1lbnNpb24gJiYgIWxpbmtzLnRlc3RzKQp7CiAgICBsaW5rcy5sZWFybi5hYkFkYXB0KCJhYlRlc3RzIik7Cn0nALeP88UOwEUDYXNrAgQAt4/zxQ6sXyjwn5SXZWM4NWMxZDYtOWYxYS00MGQ0LTgyZTEtNWJkNjgwMzQ5YzI3JwC3j/PFDsBFEmFiRW52aXJvbm1lbnRBcnJheQIEALeP88UO01+OIPCfp6xbeyJsYWJlbCI6ICJoaWRlIiwgImZvcm1BZGRyZXNzIjogInZpc2liaWxpdHlfb2ZmIiwgIm9uQ2xpY2siOiAiQCBkZXN0cm95KGxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QpOyBsaW5rcy5tYW5pZmVzdGF0aW9uLm1hc2tzLmFiQm90ID0gbnVsbDsiLCAiYWJFbnZpcm9ubWVudE1lbnVTb3J0T3JkZXIiOiAwfSwKeyJsYWJlbCI6ICJvcHRpbWl6ZSBtb2RlIiwgIm9uQ3JlYXRlIjogIkAgY29uZmlnQm90LnRhZ3MuYWJPcHRpbWl6ZWQgPyB0YWdzLmZvcm1BZGRyZXNzID0gJ2NoZWNrX2JveCcgOiB0YWdzLmZvcm1BZGRyZXNzID0gJ2NoZWNrX2JveF9vdXRsaW5lX2JsYW5rJzsiLCAib25DbGljayI6ICJAIGNvbmZpZ0JvdC50YWdzLmFiT3B0aW1pemVkID8gY29uZmlnQm90LnRhZ3MuYWJPcHRpbWl6ZWQgPSBmYWxzZSA6IGNvbmZpZ0JvdC50YWdzLmFiT3B0aW1pemVkID0gdHJ1ZTsgdGhpc0JvdC5vbkNyZWF0ZSgpOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDF9LAp7ImxhYmVsIjogImNvbG9yIiwgImZvcm1BZGRyZXNzIjogInBhbGV0dGUiLCAib25DbGljayI6ICJAIGNvbnN0IGNvbG9yID0gYXdhaXQgb3Muc2hvd0lucHV0KGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3IsIHt0eXBlOiAnY29sb3InLHRpdGxlOiAncGljayBhIGNvbG9yJ30pOyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yID0gY29sb3I7IGlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZUNvbG9yICE9ICdjbGVhcicpe2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlQ29sb3IgPSBjb2xvcn07IGRlc3Ryb3kobGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdCk7bGlua3MubWFuaWZlc3RhdGlvbi5tYXNrcy5hYkJvdCA9IG51bGw7IiwgImFiRW52aXJvbm1lbnRNZW51U29ydE9yZGVyIjogMn0sCnsibGFiZWwiOiAic2xlZXAiLCAiZm9ybUFkZHJlc3MiOiAibmlnaHRzX3N0YXkiLCAib25DbGljayI6ICJAZGVzdHJveShsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90KTsgbGlua3MubWFuaWZlc3RhdGlvbi5tYXNrcy5hYkJvdCA9IG51bGw7IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlID0gZmFsc2U7IiwgImFiRW52aXJvbm1lbnRNZW51U29ydE9yZGVyIjogM30sCnsibGFiZWwiOiAiY2hhdCIsICJmb3JtQWRkcmVzcyI6ICJjaGF0IiwgIm9uQ2xpY2siOiAiQCBvcy5zaG93Q2hhdCgpOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDR9LAp7ImxhYmVsIjogIm51Z2dldHMiLCAib25DcmVhdGUiOiAiQCB0YWdzLm51Z01hbmFnZXIgPSBnZXRMaW5rKGdldEJvdCgnc3lzdGVtJywgJ2FiLmludGVyZmFjZS5udWdnZXQnKSk7IGlmIChsaW5rcy5udWdNYW5hZ2VyLnRhZ3MubGlzdGVuaW5nKXt0YWdzLm9uQ2xpY2sgPSBgQCBzaG91dCgnYWJNZW51UmVmcmVzaCcpOyBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soKTsgc2V0VGFnTWFzayhsaW5rcy5udWdNYW5hZ2VyLCAnbGlzdGVuaW5nJywgbnVsbCk7YDt0YWdzLmZvcm1BZGRyZXNzID0gYGNoZWNrX2JveGA7fWVsc2V7ICAgIHRhZ3Mub25DbGljayA9IGBAIHNob3V0KCdhYk1lbnVSZWZyZXNoJyk7IGxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOyBzZXRUYWdNYXNrKGxpbmtzLm51Z01hbmFnZXIsICdsaXN0ZW5pbmcnLCB0cnVlLCAnbG9jYWwnKTtgOyAgICB0YWdzLmZvcm1BZGRyZXNzID0gYGNoZWNrX2JveF9vdXRsaW5lX2JsYW5rYDt9IiwgImFiRW52aXJvbm1lbnRNZW51U29ydE9yZGVyIjogNX0sCnsiYWJFbnZpcm9ubWVudEdhdGUiOiAiZ3B0IiwgIm9uQ3JlYXRlIjogIkAgIGlmICghYXV0aEJvdCl7ZGVzdHJveSh0aGlzQm90KTt9ZWxzZSBpZiAoYXV0aEJvdC50YWdzLnN1YnNjcmlwdGlvblRpZXIgPT0gJ0ZyZWVQbGF5JyB8fCBhdXRoQm90LnRhZ3Muc3Vic2NyaXB0aW9uVGllciA9PSB1bmRlZmluZWQpe2Rlc3Ryb3kodGhpc0JvdCk7fTsgdGFncy5sYWJlbCA9ICdlZGl0ICcgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgJyBwcm9tcHQnOyB0YWdzLmdwdEJvdCA9IGdldExpbmsoZ2V0Qm90KCdzeXN0ZW0nLCAnYWIuYWN0aW9uLmFzaycpKTsiLCAiZm9ybUFkZHJlc3MiOiAiZWRpdF9ub3RlIiwgIm9uQ2xpY2siOiAiQCBsaW5rcy5ncHRCb3QuZWRpdFByb21wdCgpOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDd9LAp7ImxhYmVsIjogImdyaWQgc25hcCIsICJvbkNyZWF0ZSI6ICJAIHRhZ3MuZm9ybUFkZHJlc3MgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiR3JpZFNuYXBTdGF0ZSA/ICdjaGVja19ib3gnIDogJ2NoZWNrX2JveF9vdXRsaW5lX2JsYW5rJyIsICJvbkNsaWNrIjogIkAgbGlua3MucmVtZW1iZXIudGFncy5hYkdyaWRTbmFwU3RhdGUgPSAhbGlua3MucmVtZW1iZXIudGFncy5hYkdyaWRTbmFwU3RhdGU7dGFncy5mb3JtQWRkcmVzcyA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJHcmlkU25hcFN0YXRlID8gJ2NoZWNrX2JveCcgOiAnY2hlY2tfYm94X291dGxpbmVfYmxhbmsnOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDh9LAp7ImxhYmVsIjogImJvdCBzbmFwIiwgIm9uQ3JlYXRlIjogIkAgdGFncy5mb3JtQWRkcmVzcyA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCb3RTbmFwU3RhdGUgPyAnY2hlY2tfYm94JyA6ICdjaGVja19ib3hfb3V0bGluZV9ibGFuayc7IiwgIm9uQ2xpY2siOiAiQCBsaW5rcy5yZW1lbWJlci50YWdzLmFiQm90U25hcFN0YXRlID0gIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCb3RTbmFwU3RhdGU7IHRhZ3MuZm9ybUFkZHJlc3MgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQm90U25hcFN0YXRlID8gJ2NoZWNrX2JveCcgOiAnY2hlY2tfYm94X291dGxpbmVfYmxhbmsnOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDl9LAp7ImFiRW52aXJvbm1lbnRHYXRlIjogInRlc3RzIiwgImxhYmVsIjogInJlY29yZCB0ZXN0IiwgImZvcm1BZGRyZXNzIjogInNjaWVuY2UiLCAib25LZXlEb3duIjogIkAgIiwgIm9uS2V5VXAiOiAiQCAiLCAib25DbGljayI6ICJAIGxldCBzaGlmdENoZWNrID0gb3MuZ2V0SW5wdXRTdGF0ZSgna2V5Ym9hcmQnLCAnU2hpZnQnKTtsZXQgY3VycmVudEluc3QgPSBvcy5nZXRDdXJyZW50SW5zdCgpO3Nob3V0KCdhYlJlY29yZFRlc3QnKTtzaG91dCgnYWJNZW51UmVmcmVzaCcpOyIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDEwfSwKeyJhYkVudmlyb25tZW50R2F0ZSI6ICJ0ZXN0cyIsICJsYWJlbCI6ICJyZWNvcmQgdHJhY2UiLCAiZm9ybUFkZHJlc3MiOiAidGltZWxpbmUiLCAib25LZXlEb3duIjogIkAgIiwgIm9uS2V5VXAiOiAiQCAiLCAib25DbGljayI6ICJAIGxldCBzaGlmdENoZWNrID0gb3MuZ2V0SW5wdXRTdGF0ZSgna2V5Ym9hcmQnLCAnU2hpZnQnKTtsZXQgY3VycmVudEluc3QgPSBvcy5nZXRDdXJyZW50SW5zdCgpO3Nob3V0KCdhYlJlY29yZFRyYWNlJyk7c2hvdXQoJ2FiTWVudVJlZnJlc2gnKTsiLCAiYWJFbnZpcm9ubWVudE1lbnVTb3J0T3JkZXIiOiAxMX0sCnsib25DcmVhdGUiOiAiQCB0YWdzLmxhYmVsID0gJ3Blcm1hbmVudGx5IGRlbGV0ZSAnICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICcgdicgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQ29yZVZlcnNpb24gKyAnLicgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQ29yZUl0ZXJhdGlvbjsgdGFncy5jb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlQ29udHJhc3RDb2xvciA/PyAnI0Q5MzAzMCc7IiwgImZvcm1BZGRyZXNzIjogImRlbGV0ZV9mb3JldmVyIiwgIm9uQ2xpY2siOiAiQCBsZXQgYWxsQm90cyA9IGdldEJvdHMoJ3NwYWNlJywgJ3NoYXJlZCcpO2Rlc3Ryb3kobGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdCk7Zm9yIChsZXQgaSA9IDA7IGkgPCBhbGxCb3RzLmxlbmd0aDsgaSsrKXtpZiAoYWxsQm90c1tpXS50YWdzLnN5c3RlbSkge2lmIChhbGxCb3RzW2ldLnRhZ3Muc3lzdGVtLmluY2x1ZGVzKCdhYicpKXtkZXN0cm95KGFsbEJvdHNbaV0pO319fSIsICJhYkVudmlyb25tZW50TWVudVNvcnRPcmRlciI6IDEwMH0KXScBBGJvdHMkZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkAScAt4/zxQ7gfwZzeXN0ZW0CBAC3j/PFDuF/GmFiLmludGVyZmFjZS5tYW5pZmVzdGF0aW9uJwC3j/PFDuB/BGZvcm0CBAC3j/PFDvx/B25vdGhpbmcoALeP88UO4H8LYWJJbnRlcmZhY2UBeCcAt4/zxQ7gfwtkZXNjcmlwdGlvbgIEALeP88UOhYABOFRoaXMgc2tpbGwgY29udHJvbHMgdGhlIGFjdHVhbCBib3QgZm9yIHRoZSBhYiBpbnRlcmZhY2UuJwC3j/PFDuB/BWxlYXJuAgQAt4/zxQ6+gAEo8J+UlzY2NTdiODY1LWU5ODMtNDQwMS05ZmM5LWY1NDE4ZDE4YTdmNycAt4/zxQ7gfw9vblBvcnRhbENoYW5nZWQCBAC3j/PFDuWAAeEFQGlmICghbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUgfHwgdGhhdC5wb3J0YWwgPT0gInRhZ1BvcnRhbCIpCnsKICAgIHJldHVybjsKfQoKbGV0IHBvcnRhbEFycmF5ID0gWyJtaW5pR3JpZFBvcnRhbCIsICJncmlkUG9ydGFsIiwgIm1hcFBvcnRhbCIsICJtaW5pTWFwUG9ydGFsIiwgImxlZnRXcmlzdFBvcnRhbCIsICJyaWdodFdyaXN0UG9ydGFsIl07CgppZiAocG9ydGFsQXJyYXkuaW5kZXhPZih0aGF0LnBvcnRhbCkgIT0gLTEgJiYgdGhhdC5kaW1lbnNpb24gJiYgIWNvbmZpZ0JvdC50YWdzLnNoZWV0UG9ydGFsKQp7CiAgICB0aGlzQm90LmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGhhdC5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OjAseTowfX0pOwp9CmVsc2UgaWYgKHBvcnRhbEFycmF5LmluZGV4T2YodGhhdC5wb3J0YWwpID09IC0xICYmICF0aGF0LmRpbWVuc2lvbiAmJiB0aGF0LnBvcnRhbCAhPSAibWVudVBvcnRhbCIpCnsKICAgIGxldCBzdW1tb25EaW1lbnNpb24gPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPyBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwoKICAgIHRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiBzdW1tb25EaW1lbnNpb24sIHBvc2l0aW9uOnt4OjAseTowfX0pOwp9CmVsc2UgaWYgKHRoYXQucG9ydGFsICE9ICJtZW51UG9ydGFsIikKewogICAgZGVzdHJveShsaW5rcy5hYkJvdCk7Cn0nALeP88UO4H8IcmVtZW1iZXICBAC3j/PFDseGASjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwC3j/PFDuB/DWFiTWFuaWZlc3RCb3QCBAC3j/PFDu6GAeQPQGlmICh0YWdzLmFiQm90KQp7CiAgICBkZXN0cm95KGxpbmtzLmFiQm90KTsKfQoKbGV0IGFiID0ge307CgphYi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwphYi5jb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlQ29sb3I7CmFiLmZvcm1PcGFjaXR5ID0gIjAuMzMiOwphYi5sYWJlbCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlTGFiZWw7CmFiLmxhYmVsUG9zaXRpb24gPSAiZnJvbnQiOwphYi5sYWJlbENvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYWIubGFiZWxTaXplID0gMC42MTsKYWIub25DbGljayA9ICJAIGxpbmtzLm1hbmFnZXIuYWJDbGljaygpOyI7CmFiLmRpbWVuc2lvbiA9IHRoYXQuZGltZW5zaW9uOwphYlt0aGF0LmRpbWVuc2lvbl0gPSB0cnVlOwphYlt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0aGF0LnBvc2l0aW9uLng7CmFiW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRoYXQucG9zaXRpb24ueTsKYWIuc3Ryb2tlQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwphYi5saW5lQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwphYi5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKYWIuYW5pbWF0ZUJvdCA9IGBAIGlmIChjb25maWdCb3QudGFncy5hYk9wdGltaXplZCkKewogICAgcmV0dXJuOwp9Cgpjb25zdCByb3RaID0gdGFncy5kaW1lbnNpb24gKyAiUm90YXRpb25aIjsKbGV0IHRhcmdldFNjYWxlID0gMC42NTsKCmlmICh0YWdzLnNjYWxlIDw9IDAuNjUxKQp7CiAgICB0YXJnZXRTY2FsZSA9IDAuOTU7Cn0KCmF3YWl0IGFuaW1hdGVUYWcodGhpc0JvdCwKewogICAgZnJvbVZhbHVlOiB7CiAgICAgICAgW3JvdFpdOiAwLAogICAgICAgIHNjYWxlOiB0YWdzLnNjYWxlCiAgICB9LAogICAgdG9WYWx1ZTogewogICAgICAgIFtyb3RaXTogNi4zLAogICAgICAgIHNjYWxlOiB0YXJnZXRTY2FsZQogICAgfSwKICAgIGVhc2luZzogewogICAgICAgIHR5cGU6ICJzaW51c29pZGFsIiwKICAgICAgICBtb2RlOiAiaW5vdXQiCiAgICB9LAogICAgZHVyYXRpb246IDIKfSkuY2F0Y2goZSA9PiB7fSk7CmA7CmFiLm9uQ3JlYXRlID0gYEAKCnRoaXNCb3QuYW5pbWF0ZUJvdCgpOwoKbWFza3MuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzQm90LmFuaW1hdGVCb3QoKSwgMjAwMCk7CmA7CmFiLm9uRGVzdHJveSA9IGBACmNsZWFySW50ZXJ2YWwodGFncy5pbnRlcnZhbCk7CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwpgOwphYi5kcmFnZ2FibGUgPSBmYWxzZTsKYWIuc2NhbGUgPSAwLjk7CgpsZXQgYWJNYW5pZmVzdGVkID0gYXdhaXQgY3JlYXRlKGFiKTsKCmlmIChsaW5rcy5yZW1lbWJlci50YWdzLmFiU2Vjb25kYXJ5TGFiZWwpCnsKICAgIGxldCBhYkxhYmVsQm90ID0ge307CgogICAgYWJMYWJlbEJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwogICAgYWJMYWJlbEJvdFt0aGF0LmRpbWVuc2lvbl0gPSB0cnVlOwogICAgYWJMYWJlbEJvdFt0aGF0LmRpbWVuc2lvbiArICJaIl0gPSAtMTsKICAgIGFiTGFiZWxCb3QuY3JlYXRvciA9IGFiTWFuaWZlc3RlZC5pZDsKICAgIGFiTGFiZWxCb3QudHJhbnNmb3JtZXIgPSBhYk1hbmlmZXN0ZWQuaWQ7CiAgICBhYkxhYmVsQm90LnBvaW50YWJsZSA9IGZhbHNlOwogICAgYWJMYWJlbEJvdC5jb2xvciA9ICJjbGVhciI7CiAgICBhYkxhYmVsQm90LmxhYmVsID0gbGlua3MucmVtZW1iZXIudGFncy5hYlNlY29uZGFyeUxhYmVsOwogICAgYWJMYWJlbEJvdC5sYWJlbFBvc2l0aW9uID0gImxlZnQiOwogICAgYWJMYWJlbEJvdC5sYWJlbFNpemUgPSAwLjc7CiAgICBhYkxhYmVsQm90LmxhYmVsQ29sb3IgPSBhYk1hbmlmZXN0ZWQudGFncy5sYWJlbENvbG9yOwoKICAgIGNyZWF0ZShhYkxhYmVsQm90KTsKfQoKbWFza3MuYWJCb3QgPSAi8J+UlyIgKyBhYk1hbmlmZXN0ZWQuaWQ7CgpsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkFjdGl2ZURpbWVuc2lvbiA9IHRoYXQuZGltZW5zaW9uOycAt4/zxQ7gfw9hYk1hbmlmZXN0U3RhdGUCBAC3j/PFDs+WAQZBc2xlZXAnALeP88UO4H8cYWJNYW5pZmVzdFN0YXRlQXNsZWVwT25FbnRlcgIEALeP88UO1pYBb0BkZXN0cm95KGxpbmtzLmFiQm90KTsKCm1hc2tzLmFiQm90ID0gbnVsbDsKCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgpsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSA9IGZhbHNlOycAt4/zxQ7gfwtvbkdyaWRDbGljawIEALeP88UOxpcB9hBAaWYgKCFsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSkKewogICAgcmV0dXJuOwp9CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKY29uc3Qgc2hpZnRDaGVjayA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZiAoc2hpZnRDaGVjayAmJiB0YWdzLmFiQm90KQp7CiAgICBpZiAobGlua3MuYWJCb3QudGFncy5hcm0pCiAgICB7CiAgICAgICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwoKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBudWxsOwogICAgfQogICAgCiAgICBsZXQgYXJtID0ge307CgogICAgYXJtLnNwYWNlID0gInRlbXBMb2NhbCI7CiAgICBhcm1bdGhhdC5kaW1lbnNpb25dID0gdHJ1ZTsKICAgIGFybVt0aGF0LmRpbWVuc2lvbiArICJYIl0gPSB0aGF0LnBvc2l0aW9uLng7CiAgICBhcm1bdGhhdC5kaW1lbnNpb24gKyAiWSJdID0gdGhhdC5wb3NpdGlvbi55OwogICAgYXJtLmRpbWVuc2lvbiA9IHRoYXQuZGltZW5zaW9uOwogICAgYXJtLnNjYWxlID0gMC45OwogICAgYXJtLnNjYWxlWiA9IDAuMDE7CiAgICBhcm0uY29sb3IgPSAiY2xlYXIiOwogICAgYXJtLnN0cm9rZUNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKICAgIGFybS5saW5lQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwogICAgYXJtLmxpbmVUbyA9IGxpbmtzLmFiQm90LmlkOwogICAgYXJtLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwogICAgYXJtLm9uQ2xpY2sgPSBgQCBkZXN0cm95KHRoaXNCb3QpOwoKICAgIGxpbmtzLm1hbmFnZXIuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiwgcG9zaXRpb246e3g6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJYIl0seTp0YWdzW3RhZ3MuZGltZW5zaW9uICsgIlkiXX19KTtgOwoKICAgIGxldCBuZXdBcm0gPSBhd2FpdCBjcmVhdGUoYXJtKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5hcm0gPSAi8J+UlyIgKyBuZXdBcm0uaWQ7CgogICAgbGlua3MucmVtZW1iZXIubWFza3MuYWJHcmlkRm9jdXMgPSB7ZGltZW5zaW9uOiB0aGF0LmRpbWVuc2lvbiwgcG9zaXRpb246IHt4OiB0aGF0LnBvc2l0aW9uLngsIHk6IHRoYXQucG9zaXRpb24ueX19OwoKICAgIHRoaXNCb3QuYWJDbGljayh7bWVudTogImdyaWQifSk7CgogICAgcmV0dXJuOwp9CgpsZXQgZm9vdHByaW50ID0ge307Cgpmb290cHJpbnQuc3BhY2UgPSAidGVtcExvY2FsIjsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uXSA9IHRydWU7CmZvb3RwcmludC5kaW1lbnNpb24gPSB0aGF0LmRpbWVuc2lvbjsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uICsgIlgiXSA9IHRoYXQucG9zaXRpb24ueDsKZm9vdHByaW50W3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IHRoYXQucG9zaXRpb24ueTsKZm9vdHByaW50LnNjYWxlWiA9IDAuMDE7CmZvb3RwcmludC5vbkNsaWNrID0gYEAgdGFnc1t0YWdzLmRpbWVuc2lvbl0gPSBmYWxzZTsKCmxpbmtzLm1hbmFnZXIuYWJNYW5pZmVzdEJvdCh0YWdzLnBvc2l0aW9uSW5mbyk7CmA7CmZvb3RwcmludC5wb3NpdGlvbkluZm8gPSB0aGF0Owpmb290cHJpbnQuY29sb3IgPSAiY2xlYXIiOwpmb290cHJpbnQuc3Ryb2tlQ29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwpmb290cHJpbnQuZHJhZ2dhYmxlID0gZmFsc2U7CmZvb3RwcmludC5tYW5hZ2VyID0gIvCflJciICsgdGhpc0JvdC5pZDsKZm9vdHByaW50Lm9uQ3JlYXRlID0gYEAgc2V0VGltZW91dCgoKSA9PiBkZXN0cm95KHRoaXNCb3QpLCA4MDApOwoKICAgIGF3YWl0IGFuaW1hdGVUYWcodGhpc0JvdCwgewogICAgICAgIGZyb21WYWx1ZTogewogICAgICAgICAgICBzY2FsZVg6IDAuMSwKICAgICAgICAgICAgc2NhbGVZOiAwLjEKICAgICAgICB9LAogICAgICAgIHRvVmFsdWU6IHsKICAgICAgICAgICAgc2NhbGVYOiAxLjEsCiAgICAgICAgICAgIHNjYWxlWTogMS4xCiAgICAgICAgfSwKICAgICAgICBkdXJhdGlvbjogMC41LAogICAgICAgIGVhc2luZzogewogICAgICAgICAgICB0eXBlOiAiZWxhc3RpYyIsCiAgICAgICAgICAgIG1vZGU6ICJvdXQiCiAgICAgICAgfQogICAgfSkuY2F0Y2goZSA9PiB7fSk7CmA7CgpjcmVhdGUoZm9vdHByaW50KTsnALeP88UO4H8EbWVudQIEALeP88UOt6gBKPCflJdiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2InALeP88UO4H8HYWJDbGljawIEALeP88UO3qgB7wlAaWYgKCFsaW5rcy5hYkJvdCkKewogICAgcmV0dXJuOwp9Cgpvcy5oaWRlQ2hhdCgpOwoKY29uc3QgbWVudVR5cGUgPSB0aGF0ID8gdGhhdC5tZW51IDogImNvcmUiOwpjb25zdCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CgppZiAobGlua3MuYWJCb3QudGFncy5pbnRlcnZhbCB8fCBzdGF0ZSkKewogICAgY29uc3QgYWJNZW51Qm90cyA9IGdldEJvdHMoImFiTWVudSIsIHRydWUpOwoKICAgIHdoaXNwZXIoYWJNZW51Qm90cywgImFiTWVudVJlZnJlc2giKTsKICAgIAogICAgY2xlYXJJbnRlcnZhbChsaW5rcy5hYkJvdC50YWdzLmludGVydmFsKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5pbnRlcnZhbCA9IG51bGw7CgogICAgY2xlYXJBbmltYXRpb25zKGxpbmtzLmFiQm90KTsKCiAgICBjb25zdCByb3RaID0gbGlua3MuYWJCb3QudGFncy5kaW1lbnNpb24gKyAiUm90YXRpb25aIjsKCiAgICBpZiAoc3RhdGUgJiYgbWVudVR5cGUgPT0gImNvcmUiKQogICAgewogICAgICAgIGxpbmtzLm1lbnUuYWJFbnZpcm9ubWVudE1lbnUoKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5tZW51LmFiT3Blbk1lbnUobWVudVR5cGUpOwogICAgfQoKICAgIGF3YWl0IGFuaW1hdGVUYWcobGlua3MuYWJCb3QsCiAgICB7CiAgICAgICAgZnJvbVZhbHVlOiB7CiAgICAgICAgICAgIFtyb3RaXTogbGlua3MuYWJCb3QudGFnc1tyb3RaXSwKICAgICAgICAgICAgc2NhbGU6IGxpbmtzLmFiQm90LnRhZ3Muc2NhbGUKICAgICAgICB9LAogICAgICAgIHRvVmFsdWU6IHsKICAgICAgICAgICAgW3JvdFpdOiAwLAogICAgICAgICAgICBzY2FsZTogMC45CiAgICAgICAgfSwKICAgICAgICBlYXNpbmc6IHsKICAgICAgICAgICAgdHlwZTogInNpbnVzb2lkYWwiLAogICAgICAgICAgICBtb2RlOiAiaW5vdXQiCiAgICAgICAgfSwKICAgICAgICBkdXJhdGlvbjogMC41CiAgICB9KS5jYXRjaChlID0+IHt9KTsKfQplbHNlCnsKICAgIGxpbmtzLmFiQm90LmFuaW1hdGVCb3QoKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBudWxsOwoKICAgIGlmIChsaW5rcy5hYkJvdC50YWdzLmFybSkKICAgIHsKICAgICAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7CiAgICB9CgogICAgc2hvdXQoImFiTWVudVJlZnJlc2giKTsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IGxpbmtzLmFiQm90LmFuaW1hdGVCb3QoKSwgMjAwMCk7Cn0nALeP88UO4H8bYWJNYW5pZmVzdFN0YXRlQXdha2VPbkVudGVyAgQAt4/zxQ7OsgH0AUBsaW5rcy5yZW1lbWJlci50YWdzLmFiQXdha2VTdGF0ZSA9IHRydWU7CgpsZXQgZGltZW5zaW9uID0gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsID8gY29uZmlnQm90LnRhZ3MubWFwUG9ydGFsIDogY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKCmlmICghZGltZW5zaW9uKQp7CiAgICByZXR1cm47Cn0KCnRoaXNCb3QuYWJNYW5pZmVzdEJvdCh7ZGltZW5zaW9uOiBkaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogMCwgeTogMH19KTsnALeP88UO4H8Mb25BbnlCb3REcmFnAgQAt4/zxQ7DtAGLCUBpZiAodGhhdC5ib3QgIT0gbGlua3MuYWJCb3QpIHJldHVybjsKCm9zLmhpZGVDaGF0KCk7CgppZiAobGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzICYmIHRoYXQuYm90LmlkID09IGxpbmtzLmFiQm90LmlkKQp7CiAgICBvcy5lbmFibGVDdXN0b21EcmFnZ2luZygpOwoKICAgIHJldHVybjsKfQoKaWYgKGxpbmtzLmFiQm90LnRhZ3MuYXJtKQp7CiAgICBkZXN0cm95KGxpbmtzLmFiQm90LmxpbmtzLmFybSk7Cn0KCmlmICghdGhhdC5ib3QudGFncy5pbnRlcnZhbCkKewogICAgdGhpc0JvdC5hYkNsaWNrKCk7Cn0KCmxldCBzdGF0ZSA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIlNoaWZ0Iik7CmxldCBhcm0gPSB7fTsKCmFybS5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwphcm1bdGhhdC5mcm9tLmRpbWVuc2lvbl0gPSB0cnVlOwphcm0uY3JlYXRvciA9IGxpbmtzLmFiQm90LmlkOwphcm0uZGltZW5zaW9uID0gdGhhdC5mcm9tLmRpbWVuc2lvbjsKYXJtLnNjYWxlID0gMC45Owphcm0uc2NhbGVaID0gMC4wMTsKYXJtLmNvbG9yID0gImNsZWFyIjsKYXJtLnN0cm9rZUNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKYXJtLmxpbmVDb2xvciA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CmFybS5saW5lVG8gPSB0aGF0LmJvdC5pZDsKYXJtLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwphcm0ub25DbGljayA9IGBAIGRlc3Ryb3kodGhpc0JvdCk7CgpsaW5rcy5tYW5hZ2VyLmFiTWFuaWZlc3RCb3Qoe2RpbWVuc2lvbjogdGFncy5kaW1lbnNpb24sIHBvc2l0aW9uOnt4OnRhZ3NbdGFncy5kaW1lbnNpb24gKyAiWCJdLHk6dGFnc1t0YWdzLmRpbWVuc2lvbiArICJZIl19fSk7YDsKCmlmIChzdGF0ZSkKewogICAgYXJtLm11bHRpU2VsZWN0ID0gdHJ1ZTsKICAgIGFybS5mb3JtID0gInNwaGVyZSI7CiAgICBhcm0uY29sb3IgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQmFzZVN0cm9rZUNvbG9yOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmRyYWdnYWJsZSA9IHRydWU7Cn0KCmxldCBuZXdBcm0gPSBhd2FpdCBjcmVhdGUoYXJtKTsKCmxpbmtzLmFiQm90Lm1hc2tzLmFybSA9ICLwn5SXIiArIG5ld0FybS5pZDsKCm9zLnJlcGxhY2VEcmFnQm90KG5ld0FybSk7JwC3j/PFDuB/EW9uQW55Qm90RHJvcEVudGVyAgQAt4/zxQ7LvQG5B0BpZiAoIXRhZ3MuYWJCb3QpIHJldHVybjsKaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybSAhPSB0aGF0LmRyYWdCb3QpIHJldHVybjsKCmlmIChsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5tdWx0aVNlbGVjdCkKewogICAgaWYgKEFycmF5LmlzQXJyYXkobGlua3MuYWJCb3QudGFncy5saW5lVG8pKQogICAgewogICAgICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUby5wdXNoKHRoYXQudG8uYm90LmlkKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBbdGhhdC50by5ib3QuaWRdOwogICAgfQoKICAgIGxldCBuZXdMaW5rOwoKICAgIGlmICghbGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3Muc2VsZWN0ZWRCb3RzKQogICAgewogICAgICAgIG5ld0xpbmsgPSBnZXRMaW5rKHRoYXQudG8uYm90KTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBsZXQgcHJldmlvdXNMaW5rQm90cyA9IGxpbmtzLmFiQm90LmxpbmtzLmFybS5saW5rcy5zZWxlY3RlZEJvdHM7CgogICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcmV2aW91c0xpbmtCb3RzKSkKICAgICAgICB7CiAgICAgICAgICAgIHByZXZpb3VzTGlua0JvdHMgPSBbcHJldmlvdXNMaW5rQm90c10KICAgICAgICB9CgogICAgICAgIHByZXZpb3VzTGlua0JvdHMucHVzaCh0aGF0LnRvLmJvdCk7CgogICAgICAgIG5ld0xpbmsgPSBnZXRMaW5rKHByZXZpb3VzTGlua0JvdHMpOwogICAgfQoKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLnNlbGVjdGVkQm90cyA9IG5ld0xpbms7Cn0KZWxzZQp7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3Muc3Ryb2tlQ29sb3IgPSAiY2xlYXIiOwogICAgbGlua3MuYWJCb3QubGlua3MuYXJtLm1hc2tzLmxpbmVUbyA9IGZhbHNlOwoKICAgIGxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IHRoYXQudG8uYm90LmlkOwp9JwC3j/PFDuB/EG9uQW55Qm90RHJvcEV4aXQCBAC3j/PFDoXFAZwCQGlmICghbGlua3MuYWJCb3QpIHJldHVybjsKaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybSAhPSB0aGF0LmRyYWdCb3QpIHJldHVybjsKCmlmICghbGlua3MuYWJCb3QubGlua3MuYXJtLnRhZ3MubXVsdGlTZWxlY3QpCnsKICAgIGxpbmtzLmFiQm90LmxpbmtzLmFybS5tYXNrcy5zdHJva2VDb2xvciA9IG51bGw7CiAgICBsaW5rcy5hYkJvdC5saW5rcy5hcm0ubWFza3MubGluZVRvID0gbnVsbDsKCiAgICBsaW5rcy5hYkJvdC5tYXNrcy5saW5lVG8gPSBsaW5rcy5hYkJvdC5saW5rcy5hcm0uaWQ7Cn0nALeP88UO4H8Mb25BbnlCb3REcm9wAgQAt4/zxQ6ixwGyBkBtYXNrcy5tdWx0aURyYWcgPSBudWxsOwoKaWYgKCF0YWdzLmFiQm90KSByZXR1cm47CmlmICghbGlua3MuYWJCb3QpIHJldHVybjsKaWYgKCFsaW5rcy5hYkJvdC50YWdzLmFybSkgcmV0dXJuOwppZiAobGlua3MuYWJCb3QubGlua3MuYXJtICE9IHRoYXQuZHJhZ0JvdCkgcmV0dXJuOwoKaWYgKGxpbmtzLmFiQm90LmxpbmtzLmFybS50YWdzLm11bHRpU2VsZWN0KQp7CiAgICBsaW5rcy5yZW1lbWJlci5tYXNrcy5hYk11bHRpcGxlQm90Rm9jdXMgPSBsaW5rcy5hYkJvdC5saW5rcy5hcm0udGFncy5zZWxlY3RlZEJvdHM7CgogICAgdGhpc0JvdC5hYkNsaWNrKHttZW51OiAibXVsdGlwbGVCb3QifSk7CgogICAgZGVzdHJveShsaW5rcy5hYkJvdC5saW5rcy5hcm0pOwp9CmVsc2UgaWYgKHRoYXQudG8uYm90KQp7CiAgICBpZiAodGhhdC50by5ib3QgPT0gbGlua3MuYWJCb3QpCiAgICB7CiAgICAgICAgbGlua3MubWVudS5hYkVudmlyb25tZW50TWVudSgpOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQm90Rm9jdXMgPSAi8J+UlyIgKyB0aGF0LnRvLmJvdC5pZDsKCiAgICAgICAgdGhpc0JvdC5hYkNsaWNrKHttZW51OiAiYm90In0pOwogICAgfQoKICAgIGRlc3Ryb3kobGlua3MuYWJCb3QubGlua3MuYXJtKTsKfQplbHNlCnsKICAgIGxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiR3JpZEZvY3VzID0ge2RpbWVuc2lvbjogdGhhdC50by5kaW1lbnNpb24sIHBvc2l0aW9uOiB7eDogdGhhdC50by54LCB5OiB0aGF0LnRvLnl9fTsKCiAgICB0aGlzQm90LmFiQ2xpY2soe21lbnU6ICJncmlkIn0pOwp9JwC3j/PFDuB/CGFiSWdub3JlAgQAt4/zxQ7TzQEEdHJ1ZSgAt4/zxQ7gfwxhYkJvdFZlcnNpb24BfZMBJwC3j/PFDuB/A2FzawIEALeP88UO2c0BKPCflJdlYzg1YzFkNi05ZjFhLTQwZDQtODJlMS01YmQ2ODAzNDljMjcnALeP88UO4H8JYXNrQnV0dG9uAgQAt4/zxQ6AzgHZBUBpZiAoIWxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBd2FrZVN0YXRlKQp7CiAgICByZXR1cm47Cn0KCmxldCBhYk1lbnVCdXR0b24gPSB7fTsKCmFiTWVudUJ1dHRvbi5hYk1lbnUgPSB0cnVlOwphYk1lbnVCdXR0b24ucmVtZW1iZXIgPSBsaW5rcy5tZW51LnRhZ3MucmVtZW1iZXI7CmFiTWVudUJ1dHRvbi5tYW5pZmVzdGF0aW9uID0gbGlua3MubWVudS50YWdzLm1hbmlmZXN0YXRpb247CmFiTWVudUJ1dHRvbi5hYk1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwphYk1lbnVCdXR0b24uYmFzZVNraWxsID0gIvCflJciICsgbGlua3MuYXNrLmlkOwphYk1lbnVCdXR0b24ubGFiZWwgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51TGFiZWw7CmFiTWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVJY29uOwphYk1lbnVCdXR0b24ub25DcmVhdGUgPSBsaW5rcy5hc2sudGFncy5hYkNvcmVNZW51T25HZW5lcmF0ZTsKYWJNZW51QnV0dG9uLmFiTWVudVNvcnRPcmRlciA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVTb3J0T3JkZXI7CmFiTWVudUJ1dHRvbi5jb2xvciA9IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVDb2xvciA/IGxpbmtzLmFzay50YWdzLmFiQ29yZU1lbnVDb2xvciA6IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCYXNlU3Ryb2tlQ29sb3I7CgpsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihhYk1lbnVCdXR0b24pOycAt4/zxQ7gfwlhYkJvdENoYXQCBAC3j/PFDtjTAdULQGlmICghbGlua3MuYWJCb3QgJiYgIXRoYXQuYm90KQp7CiAgICByZXR1cm47Cn0KCmNvbnN0IGJvdEJhc2UgPSB0aGF0LmJvdCA/IHRoYXQuYm90OiBsaW5rcy5hYkJvdDsKY29uc3QgZGltZW5zaW9uID0gIXRoYXQuYm90ID8gYm90QmFzZS50YWdzLmRpbWVuc2lvbiA6IHRoYXQuZGltZW5zaW9uID8gdGhhdC5kaW1lbnNpb24gOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwpjb25zdCBtZXNzYWdlID0gdGhhdC5tZXNzYWdlOwpjb25zdCBtZXNzYWdlVGltZSA9IHRoYXQudGltZSA/IHRoYXQudGltZSAqIDEwMDAgOiAxNjAwOyAKY29uc3QgbWVzc2FnZUJvdCA9IHt9OwoKbWVzc2FnZUJvdC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZXNzYWdlQm90LnRyYW5zZm9ybWVyID0gYm90QmFzZS5pZDsKbWVzc2FnZUJvdC5mb3JtID0gInNwcml0ZSI7Cm1lc3NhZ2VCb3QuY29sb3IgPSAiIzAwMDAwMCI7Cm1lc3NhZ2VCb3QubGFiZWwgPSBtZXNzYWdlOwptZXNzYWdlQm90LmxhYmVsQ29sb3IgPSAiI2ZmZmZmZiI7Cm1lc3NhZ2VCb3QubGFiZWxTaXplID0gMTsKbWVzc2FnZUJvdC5zY2FsZVggPSBtZXNzYWdlLmxlbmd0aCAvIDUgPiAxMCA/IDEwIDogbWVzc2FnZS5sZW5ndGggPCAxMCA/IDIgOiBtZXNzYWdlLmxlbmd0aCAvIDU7Cm1lc3NhZ2VCb3Quc2NhbGVZID0gKG1lc3NhZ2UubGVuZ3RoIC8gNTApID4gMSA/IE1hdGgucm91bmQobWVzc2FnZS5sZW5ndGggLyA1MCkgOiAxLjMzOwptZXNzYWdlQm90LnNjYWxlWiA9IDAuMTsKbWVzc2FnZUJvdC5vcmllbnRhdGlvbk1vZGUgPSAiYmlsbGJvYXJkIjsKbWVzc2FnZUJvdFtkaW1lbnNpb25dID0gdHJ1ZTsKbWVzc2FnZUJvdC5kaW1lbnNpb24gPSBkaW1lbnNpb247Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlgiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIlkiXSA9IDA7Cm1lc3NhZ2VCb3RbZGltZW5zaW9uICsgIloiXSA9IGJvdEJhc2UudGFncy5zY2FsZSA/IGJvdEJhc2UudGFncy5zY2FsZSAvIDIgKyAyIDogMjsKbWVzc2FnZUJvdC5vbkZhZGUgPSBgQCBhd2FpdCBhbmltYXRlVGFnKHRoaXNCb3QsIHsKICAgIGZyb21WYWx1ZTogewogICAgICAgIGZvcm1PcGFjaXR5OiAxLAogICAgICAgIGxhYmVsT3BhY2l0eTogMSwKICAgICAgICBbdGFncy5kaW1lbnNpb24gKyAiWiJdOiB0YWdzW3RhZ3MuZGltZW5zaW9uICsgIloiXQogICAgfSwKICAgIHRvVmFsdWU6IHsKICAgICAgICBmb3JtT3BhY2l0eTogMCwKICAgICAgICBsYWJlbE9wYWNpdHk6IDAsCiAgICAgICAgW3RhZ3MuZGltZW5zaW9uICsgIloiXTogdGFnc1t0YWdzLmRpbWVuc2lvbiArICJaIl0gKyA1CiAgICB9LAogICAgZHVyYXRpb246ICR7dGhhdC5kdXJhdGlvbiA/PyAzfQp9KS5jYXRjaCh7fSk7CgpkZXN0cm95KHRoaXNCb3QpO2A7Cgpjb25zdCBhY3RpdmVNZXNzYWdlID0gY3JlYXRlKG1lc3NhZ2VCb3QpOwoKc2V0VGltZW91dCgoKT0+IGFjdGl2ZU1lc3NhZ2Uub25GYWRlKCksIG1lc3NhZ2VUaW1lKTsnALeP88UO4H8Qb25BbnlCb3REcmFnZ2luZwIEALeP88UOrt8BhRBAaWYgKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1cyAmJiB0aGF0LmJvdC5pZCA9PSBsaW5rcy5hYkJvdC5pZCkKewogICAgY29uc3QgYWN0aXZlRGltZW5zaW9uID0gbGlua3MucmVtZW1iZXIubWFza3MuYWJBY3RpdmVEaW1lbnNpb24gPz8gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbDsKICAgIGxldCBkcmFnQ29vcmRpbmF0b3JCb3QgPSBsaW5rcy5kcmFnQ29vcmQ7CgogICAgaWYgKCFkcmFnQ29vcmRpbmF0b3JCb3QpCiAgICB7CiAgICAgICAgY29uc3QgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kID0ge307CgogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2QuZGltZW5zaW9uID0gYWN0aXZlRGltZW5zaW9uOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZFthY3RpdmVEaW1lbnNpb25dID0gdHJ1ZTsKICAgICAgICBkcmFnQ29vcmRpbmF0b3JCb3RNb2RbYWN0aXZlRGltZW5zaW9uICsgIlgiXSA9IDA7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kW2FjdGl2ZURpbWVuc2lvbiArICJZIl0gPSAwOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZFthY3RpdmVEaW1lbnNpb24gKyAiWiJdID0gLTE7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLnBvaW50YWJsZSA9IGZhbHNlOwogICAgICAgIGRyYWdDb29yZGluYXRvckJvdE1vZC5jb2xvciA9ICJjbGVhciI7CiAgICAgICAgZHJhZ0Nvb3JkaW5hdG9yQm90TW9kLm9uQW55Qm90UG9pbnRlclVwID0gYEAgbGlua3MubWFuYWdlci5tYXNrcy5kcmFnQ29vcmQgPSBudWxsOyBzaG91dCgnYWJTdG9wRHJhZycsIHt4OiB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVgsIHk6IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WX0pOyBkZXN0cm95KHRoaXNCb3QpO2A7CgogICAgICAgIGRyYWdDb29yZGluYXRvckJvdCA9IGNyZWF0ZShkcmFnQ29vcmRpbmF0b3JCb3RNb2QpOwoKICAgICAgICBtYXNrcy5kcmFnQ29vcmQgPSBnZXRMaW5rKGRyYWdDb29yZGluYXRvckJvdCk7CgogICAgICAgIGNvbnN0IGRyYWdCb3RzID0gbGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzOwoKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy50cmFuc2Zvcm1lciA9IGRyYWdDb29yZGluYXRvckJvdC5pZDsKICAgICAgICBsaW5rcy5hYkJvdC5tYXNrcy5hYlN0b3BEcmFnID0gYEAgbWFza3MudHJhbnNmb3JtZXIgPSBudWxsOyBtYXNrcy5hYlN0b3BEcmFnID0gbnVsbDsgdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YID0gdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1YICsgdGhhdC54OyB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVkgPSB0YWdzLiR7YWN0aXZlRGltZW5zaW9ufVkgKyB0aGF0LnlgOwoKICAgICAgICBzZXRUYWdNYXNrKGRyYWdCb3RzLCAidHJhbnNmb3JtZXIiLCBkcmFnQ29vcmRpbmF0b3JCb3QuaWQsICJ0ZW1wTG9jYWwiKTsKICAgICAgICBzZXRUYWdNYXNrKGRyYWdCb3RzLCAiYWJTdG9wRHJhZyIsIGBAIG1hc2tzLnRyYW5zZm9ybWVyID0gbnVsbDsgbWFza3MuYWJTdG9wRHJhZyA9IG51bGw7IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCA9IHRhZ3MuJHthY3RpdmVEaW1lbnNpb259WCArIHRoYXQueDsgdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZID0gdGFncy4ke2FjdGl2ZURpbWVuc2lvbn1ZICsgdGhhdC55YCwgInRlbXBMb2NhbCIpOwogICAgfQoKICAgIGNvbnN0IHhDaGFuZ2UgPSB0aGF0LnRvLnggLSB0aGF0LmZyb20ueDsKICAgIGNvbnN0IHlDaGFuZ2UgPSB0aGF0LnRvLnkgLSB0aGF0LmZyb20ueTsKCiAgICBkcmFnQ29vcmRpbmF0b3JCb3QudGFnc1thY3RpdmVEaW1lbnNpb24gKyAiWCJdID0geENoYW5nZTsKICAgIGRyYWdDb29yZGluYXRvckJvdC50YWdzW2FjdGl2ZURpbWVuc2lvbiArICJZIl0gPSB5Q2hhbmdlOwogICAgZHJhZ0Nvb3JkaW5hdG9yQm90LnRhZ3NbYWN0aXZlRGltZW5zaW9uICsgIloiXSA9IC0xOwp9AA=="}]}