{"version":2,"updates":[{"id":0,"timestamp":1717699280950,"update":"AaAC+pHe5gIAJwEEYm90cyQzOTg4MDFmZS00YjM1LTRjZTQtODI2Zi0yMzgzNWMxYjlhYzUBJwD6kd7mAgAGc3lzdGVtAgQA+pHe5gIBFGFiLmFjdGlvbi5jcmVhdGVfYm90JwD6kd7mAgAIYWJBY3Rpb24CBAD6kd7mAhYEdHJ1ZScA+pHe5gIABGZvcm0CBAD6kd7mAhsHbm90aGluZycA+pHe5gIAC2Rlc2NyaXB0aW9uAgQA+pHe5gIjDUNyZWF0ZXMgYm90cy4nAPqR3uYCABBhYkdyaWRNZW51QWN0aW9uAgQA+pHe5gIx0gRAY29uc3QgZ3JpZEluZm9ybWF0aW9uID0gbGlua3MucmVtZW1iZXIudGFncy5hYkdyaWRGb2N1czsKY29uc3QgbmV3Qm90ID0ge307CgpuZXdCb3QuY3JlYXRvciA9IG51bGw7Cm5ld0JvdFtncmlkSW5mb3JtYXRpb24uZGltZW5zaW9uXSA9IHRydWU7Cm5ld0JvdFtncmlkSW5mb3JtYXRpb24uZGltZW5zaW9uICsgIlgiXSA9IGdyaWRJbmZvcm1hdGlvbi5wb3NpdGlvbi54OwpuZXdCb3RbZ3JpZEluZm9ybWF0aW9uLmRpbWVuc2lvbiArICJZIl0gPSBncmlkSW5mb3JtYXRpb24ucG9zaXRpb24ueTsKbmV3Qm90LmNvbG9yID0gbGlua3MucmVtZW1iZXIudGFncy5hYkJhc2VTdHJva2VDb2xvcjsKCmxldCBjcmVhdGVkQm90ID0gY3JlYXRlKG5ld0JvdCk7CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKCk7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90Lm1hc2tzLmxpbmVUbyA9IGNyZWF0ZWRCb3QuaWQ7CgpsaW5rcy5yZW1lbWJlci5tYXNrcy5hYkJvdEZvY3VzID0gIvCflJciICsgY3JlYXRlZEJvdC5pZDsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljayh7bWVudTogImJvdCJ9KTsnAPqR3uYCAA9hYkdyaWRNZW51TGFiZWwCBAD6kd7mAoIFA2JvdCcA+pHe5gIADmFiR3JpZE1lbnVJY29uAgQA+pHe5gKGBQdhZGRfYm94JwD6kd7mAgAIcmVtZW1iZXICBAD6kd7mAo4FKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAPqR3uYCAA1tYW5pZmVzdGF0aW9uAgQA+pHe5gK1BSjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwD6kd7mAgAIYWJJZ25vcmUCBAD6kd7mAtwFBHRydWUoAPqR3uYCAAxhYkJvdFZlcnNpb24BfZ4BJwD6kd7mAgATYWJHcmlkTWVudVNvcnRPcmRlcgIEAPqR3uYC4gUBMScBBGJvdHMkNTg0OWFmNTUtNWU4YS00OGQ2LTkxMDYtMTk5NDk4ZTllYzA4AScA+pHe5gLkBQZzeXN0ZW0CBAD6kd7mAuUFEWFiLmFjdGlvbi5kZXN0cm95JwD6kd7mAuQFCGFiQWN0aW9uAgQA+pHe5gL3BQR0cnVlJwD6kd7mAuQFBGZvcm0CBAD6kd7mAvwFB25vdGhpbmcnAPqR3uYC5AUPYWJCb3RNZW51QWN0aW9uAgQA+pHe5gKEBoEBQGNvbnN0IHRhcmdldEJvdCA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiQm90Rm9jdXM7CgpkZXN0cm95KHRhcmdldEJvdCk7CgpzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKCk7JwD6kd7mAuQFDmFiQm90TWVudUxhYmVsAgQA+pHe5gKGBwdkZXN0cm95JwD6kd7mAuQFDWFiQm90TWVudUljb24CBAD6kd7mAo4HDmRlbGV0ZV9mb3JldmVyJwD6kd7mAuQFEmFiQm90TWVudVNvcnRPcmRlcgIEAPqR3uYCnQcDMTAwJwD6kd7mAuQFCHJlbWVtYmVyAgQA+pHe5gKhByjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwD6kd7mAuQFDW1hbmlmZXN0YXRpb24CBAD6kd7mAsgHKPCflJdkY2E1ZDk4Ny1jNGQ4LTQ2ZTQtYjYwYy1kYWE3YjJmNGRkYWQnAPqR3uYC5AUIYWJJZ25vcmUCBAD6kd7mAu8HBHRydWUoAPqR3uYC5AUMYWJCb3RWZXJzaW9uAX2eAScA+pHe5gLkBQ5hYkJvdE1lbnVDb2xvcgIEAPqR3uYC9QcHI0Q5MzAzMCcBBGJvdHMkNzE3NTY0NWMtNGI1My00NDU0LTg3MTYtZmMwZTY4ZGIyNjY1AScA+pHe5gL9BwZzeXN0ZW0CBAD6kd7mAv4HD2FiLmFjdGlvbi5sb2dpbicA+pHe5gL9BwhhYkFjdGlvbgIEAPqR3uYCjggEdHJ1ZSgA+pHe5gL9BwxhYkJvdFZlcnNpb24BfQgnAPqR3uYC/QcIYWJJZ25vcmUCBAD6kd7mApQIBHRydWUnAPqR3uYC/QcEZm9ybQIEAPqR3uYCmQgHbm90aGluZycA+pHe5gL9Bw9hYkNvcmVNZW51Q29sb3ICBAD6kd7mAqEIByNGMkI3MDUnAPqR3uYC/QcTYWJDb3JlTWVudVNvcnRPcmRlcgIEAPqR3uYCqQgCLTUnAPqR3uYC/QcQYWJDb3JlTWVudUFjdGlvbgIEAPqR3uYCrAgsQG9zLmdvVG9VUkwobGlua3MucmVtZW1iZXIudGFncy5hYkF1dGhTaXRlKTsnAPqR3uYC/QcUYWJDb3JlTWVudU9uR2VuZXJhdGUCBAD6kd7mAtkInQJAYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsKCmlmICghbGlua3MucmVtZW1iZXIudGFncy5hYkF1dGhTaXRlKQp7CiAgICBkZXN0cm95KHRoaXNCb3QpOwp9Cgp0YWdzLmxhYmVsID0gImJ1eSAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eTsKCmlmICghYXV0aEJvdCkKewogICAgcmV0dXJuOwp9CmVsc2UgaWYgKGF1dGhCb3QudGFncy5zdWJzY3JpcHRpb25UaWVyID09ICJGcmVlUGxheSIpCnsKICAgIHJldHVybjsKfQoKZGVzdHJveSh0aGlzQm90KTsnAPqR3uYC/QcOYWJDb3JlTWVudUljb24CBAD6kd7mAvcKDmFjY291bnRfY2lyY2xlJwD6kd7mAv0HCHJlbWVtYmVyAgQA+pHe5gKGCyjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwEEYm90cyRiMWU3MTU2NC04ZDM5LTRmZTItYjkxYi0wZjEwNWJlYzRmYjIBJwD6kd7mAq0LBnN5c3RlbQIEAPqR3uYCrgsOYWIuYWN0aW9uLm5vdGUnAPqR3uYCrQsIYWJBY3Rpb24CBAD6kd7mAr0LBHRydWUoAPqR3uYCrQsMYWJCb3RWZXJzaW9uAX2PAScA+pHe5gKtCw5hYkdyaWRNZW51SWNvbgIEAPqR3uYCwwsNc3RpY2t5X25vdGVfMicA+pHe5gKtCwRmb3JtAgQA+pHe5gLRCwdub3RoaW5nJwD6kd7mAq0LD2FiR3JpZE1lbnVMYWJlbAIEAPqR3uYC2QsEbm90ZScA+pHe5gKtCwhhYklnbm9yZQIEAPqR3uYC3gsEdHJ1ZScA+pHe5gKtCw1tYW5pZmVzdGF0aW9uAgQA+pHe5gLjCyjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwD6kd7mAq0LCHJlbWVtYmVyAgQA+pHe5gKKDCjwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwD6kd7mAq0LEGFiR3JpZE1lbnVBY3Rpb24CBAD6kd7mArEMqgRAY29uc3QgZ3JpZEluZm9ybWF0aW9uID0gbGlua3MucmVtZW1iZXIudGFncy5hYkdyaWRGb2N1czsKY29uc3QgbmV3Qm90ID0ge307CgpuZXdCb3QuY3JlYXRvciA9IG51bGw7Cm5ld0JvdFtncmlkSW5mb3JtYXRpb24uZGltZW5zaW9uXSA9IHRydWU7Cm5ld0JvdFtncmlkSW5mb3JtYXRpb24uZGltZW5zaW9uICsgIlgiXSA9IGdyaWRJbmZvcm1hdGlvbi5wb3NpdGlvbi54OwpuZXdCb3RbZ3JpZEluZm9ybWF0aW9uLmRpbWVuc2lvbiArICJZIl0gPSBncmlkSW5mb3JtYXRpb24ucG9zaXRpb24ueTsKCmxldCBjcmVhdGVkQm90ID0gY3JlYXRlKHRhZ3Mubm90ZU1vZCwgbmV3Qm90KTsKCnNob3V0KCJhYk1lbnVSZWZyZXNoIik7CgpsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soKTsKCmxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QubWFza3MubGluZVRvID0gY3JlYXRlZEJvdC5pZDsKCmxpbmtzLnJlbWVtYmVyLm1hc2tzLmFiQm90Rm9jdXMgPSAi8J+UlyIgKyBjcmVhdGVkQm90LmlkOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKHttZW51OiAiYm90In0pOycA+pHe5gKtCxNhYkdyaWRNZW51U29ydE9yZGVyAgQA+pHe5gLaEAEyJwD6kd7mAq0LB25vdGVNb2QCBAD6kd7mAtwQkBfwn6esewogICAgImFiTm90ZSI6IHRydWUsCiAgICAic2NhbGVYIjogMSwKICAgICJzY2FsZVkiOiAxLAogICAgInNjYWxlIjogMSwKICAgICJvcmllbnRhdGlvbk1vZGUiOiAiYmlsbGJvYXJkIiwKICAgICJjb2xvciI6ICIjRkNDNDAwIiwKICAgICJtYXhMT0RUaHJlc2hvbGQiOiAwLjEsCiAgICAib25DcmVhdGUiOiAiQCBzZXRUaW1lb3V0KCgpID0+IHdoaXNwZXIodGhpc0JvdCwgJ2FiTm90ZVJlZnJlc2gnKSwgMjUpOyIsCiAgICAib25NYXhMT0RFbnRlciI6ICJAc2V0VGFnTWFzayh0aGlzQm90LCBcIkxPRFN0YXRlXCIsIFwiRGV0YWlsc1wiLCBcInRlbXBMb2NhbFwiKTtcbndoaXNwZXIodGhpc0JvdCwgXCJhYk5vdGVSZWZyZXNoXCIpOyIsCiAgICAib25NYXhMT0RFeGl0IjogIkBcbnNldFRhZ01hc2sodGhpc0JvdCwgXCJMT0RTdGF0ZVwiLCBcIk5vdGVcIiwgXCJ0ZW1wTG9jYWxcIik7XG53aGlzcGVyKHRoaXNCb3QsIFwiYWJOb3RlUmVmcmVzaFwiKTtcbiIsCiAgICAib25Cb3RDaGFuZ2VkIjogIkBcbmxldCBjaGFuZ2UgPSB0aGF0LnRhZ3NbMF07XG5cbmlmIChjaGFuZ2UgPT0gXCJOb3RlXCIgfHwgY2hhbmdlID09IFwiRGV0YWlsc1wiKSBcbntcbiAgICB3aGlzcGVyKHRoaXNCb3QsIFwiYWJOb3RlUmVmcmVzaFwiKTtcbn0iLAogICAgImxhYmVsV29yZFdyYXBNb2RlIjogImJyZWFrV29yZHMiLAogICAgIm9uQ2xpY2siOiAiQGNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZShcImtleWJvYXJkXCIsIFwiU2hpZnRcIik7XG5cbmlmIChzdGF0ZSlcbntcbiAgICByZXR1cm47XG59XG5lbHNlXG57XG4gICAgaWYgKHRhZ3MuTE9EU3RhdGUgPT0gbnVsbCB8fCB0YWdzLkxPRFN0YXRlID09IFwiTm90ZVwiKSBcbiAgICB7XG4gICAgICAgIHZhciBjdXJyZW50TE9EID0gXCJOb3RlXCI7XG4gICAgICAgIHZhciB0ZXh0TE9EID0gXCJub3RlXCI7XG4gICAgfVxuICAgIGVsc2UgXG4gICAge1xuICAgICAgICB2YXIgY3VycmVudExPRCA9IFwiRGV0YWlsc1wiO1xuICAgICAgICB2YXIgdGV4dExPRCA9IFwiZGV0YWlsc1wiO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0xhYmVsID0gYXdhaXQgb3Muc2hvd0lucHV0KHRhZ3NbY3VycmVudExPRF0sIFxuICAgIHtcbiAgICAgICAgdGl0bGU6IGBlZGl0ICR7dGV4dExPRH0gdGV4dGBcbiAgICB9KTtcblxuICAgIGlmIChjdXJyZW50TE9EID09IFwiTm90ZVwiICYmIHRhZ3MuRGV0YWlscylcbiAgICB7XG4gICAgICAgIHNldFRhZ01hc2sodGhpc0JvdCwgXCJsYWJlbFwiLCBcIitcIiArIG5ld0xhYmVsLCBcInRlbXBMb2NhbFwiKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY3VycmVudExPRCA9PSBcIk5vdGVcIilcbiAgICB7XG4gICAgICAgIHNldFRhZ01hc2sodGhpc0JvdCwgXCJsYWJlbFwiLCBuZXdMYWJlbCwgXCJ0ZW1wTG9jYWxcIik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGN1cnJlbnRMT0QgPT0gXCJEZXRhaWxzXCIpXG4gICAge1xuICAgICAgICBzZXRUYWdNYXNrKHRoaXNCb3QsIFwibGFiZWxcIiwgXCIqXCIgKyBuZXdMYWJlbCwgXCJ0ZW1wTG9jYWxcIik7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIHNldFRhZ01hc2sodGhpc0JvdCwgXCJsYWJlbFwiLCBuZXdMYWJlbCwgXCJ0ZW1wTG9jYWxcIik7XG4gICAgfVxuXG4gICAgdGFnc1tjdXJyZW50TE9EXSA9IG5ld0xhYmVsO1xufSIsCiAgICAiYWJOb3RlUmVmcmVzaCI6ICJAZnVuY3Rpb24gbWFwKGlucHV0LCBtaW4xLCBtYXgxLCBtaW4yLCBtYXgyKSB7XG4gICAgcmV0dXJuIChpbnB1dCAtIG1pbjEpICogKG1heDIgLSBtaW4yKSAvIChtYXgxIC0gbWluMSkgKyBtaW4yO1xufVxuXG5pZiAodGFncy5MT0RTdGF0ZSA9PSBcIk5vdGVcIiB8fCB0YWdzLkxPRFN0YXRlID09IG51bGwpIFxue1xuICAgIGlmICh0YWdzLkRldGFpbHMgJiYgdGFncy5Ob3RlKSBcbiAgICB7XG4gICAgICAgIHZhciBuZXdMYWJlbCA9IFwiK1wiICsgdGFncy5Ob3RlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0YWdzLk5vdGUpIFxuICAgIHtcbiAgICAgICAgdmFyIG5ld0xhYmVsID0gdGFncy5Ob3RlO1xuICAgIH1cbiAgICBlbHNlIGlmICh0YWdzLkRldGFpbHMpIFxuICAgIHtcbiAgICAgICAgdmFyIG5ld0xhYmVsID0gXCIrXCI7XG4gICAgfVxuICAgIGVsc2UgXG4gICAge1xuICAgICAgICB2YXIgbmV3TGFiZWwgPSBcIiBcIjtcbiAgICB9XG59XG5lbHNlIGlmICh0YWdzLkxPRFN0YXRlID09IFwiRGV0YWlsc1wiKSBcbntcbiAgICBpZiAodGFncy5EZXRhaWxzKSBcbiAgICB7XG4gICAgICAgIHZhciBuZXdMYWJlbCA9IFwiKlwiICsgdGFncy5EZXRhaWxzO1xuICAgIH1cbiAgICBlbHNlIGlmICh0YWdzLk5vdGUpXG4gICAge1xuICAgICAgICB2YXIgbmV3TGFiZWwgPSBcIipcIiArIHRhZ3MuTm90ZTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgICAgdmFyIG5ld0xhYmVsID0gXCIqXCI7XG4gICAgfVxufVxuXG5pZiAobmV3TGFiZWwpXG57XG4gICAgc2V0VGFnTWFzayh0aGlzQm90LCBcImxhYmVsXCIsIG5ld0xhYmVsKTtcblxuICAgIGxldCBsZW5ndGhUZXN0ID0gbmV3TGFiZWwubGVuZ3RoO1xuXG4gICAgaWYoIW5ld0xhYmVsLmluY2x1ZGVzKFwiIFwiKSkgdGFncy5sYWJlbEZvbnRTaXplID0gbWFwKGxlbmd0aFRlc3QsIDEsIDI1LCAuNywgLjIpICogdGFncy5zY2FsZTtcbiAgICBlbHNlIGlmKGxlbmd0aFRlc3QgPCA0MCkgdGFncy5sYWJlbEZvbnRTaXplID0gbWFwKGxlbmd0aFRlc3QsIDEsIDMwLCAuOCwgLjMpICogdGFncy5zY2FsZTtcbiAgICBlbHNlIHRhZ3MubGFiZWxGb250U2l6ZSA9IG51bGw7XG4gICAgaWYodGFncy5sYWJlbEZvbnRTaXplIDw9IDApIHRhZ3MubGFiZWxGb250U2l6ZSA9IC4xO1xuICAgIFxufSIsCiAgICAib25EZXN0cm95IjogIkAgZGVzdHJveShnZXRCb3RzKCd0cmFuc2Zvcm1lcicsIHRoaXNCb3QuaWQpKTsiLAogICAgImxhYmVsRm9udFNpemUiOiAwLjgKfScBBGJvdHMkYjMzOWMxMTgtNDg5YS00NjZiLWJhOWYtYjA3YTVmOWI2NjRmAScA+pHe5gLrJwZzeXN0ZW0CBAD6kd7mAuwnD2FiLmFjdGlvbi5wYXN0ZSgA+pHe5gLrJwhhYkFjdGlvbgF4JwD6kd7mAusnBGZvcm0CBAD6kd7mAv0nB25vdGhpbmcnAPqR3uYC6ycLZGVzY3JpcHRpb24CBAD6kd7mAoUoK2FiIHNraWxsIHVzZWQgZm9yIGNvcHlpbmcgYW5kIHBhc3RpbmcgYm90cy4nAPqR3uYC6ycHb25QYXN0ZQIEAPqR3uYCsSjiB0BpZiAoIWJ1aWxkZXJWZXJzaW9uKQp7CiAgICByZXR1cm47Cn0KCmNvbnN0IE1BQ1JPUyA9IFsKICAgIHsKICAgICAgICB0ZXN0OiAvKD86W+KAnOKAnV0pL2csCiAgICAgICAgcmVwbGFjZW1lbnQ6ICh2YWwpID0+ICciJywKICAgIH0sCiAgICB7CiAgICAgICAgdGVzdDogLyg/OlvigJjigJldKS9nLAogICAgICAgIHJlcGxhY2VtZW50OiAodmFsKSA9PiAiJyIsCiAgICB9LApdOwoKbGV0IGZvcm1hdHRlZENvcHkgPSByZXBsYWNlTWFjcm9zKHRoYXQudGV4dCk7CmxldCBjb3B5Qm90ID0gSlNPTi5wYXJzZShmb3JtYXR0ZWRDb3B5KTsKbGV0IHBhc3RlZERhdGEgPSAhY29weUJvdC5zdGF0ZSA/IHtbY29weUJvdC5pZF06IGNvcHlCb3R9IDogY29weUJvdC5zdGF0ZTsKbGV0IGRpbU1vZCA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJGb2N1c0RhdGE7CgppZiAoT2JqZWN0LmtleXMocGFzdGVkRGF0YSkubGVuZ3RoID09IDEgJiYgZGltTW9kKQp7CiAgICBwYXN0ZWREYXRhW2RpbU1vZC5kaW1lbnNpb25dID0gdHJ1ZTsKICAgIHBhc3RlZERhdGFbZGltTW9kLmRpbWVuc2lvbisiWCJdID0gZGltTW9kLng7CiAgICBwYXN0ZWREYXRhW2RpbU1vZC5kaW1lbnNpb24rIlkiXSA9IGRpbU1vZC55OwoKICAgIG9zLnRvYXN0KCJib3QgYWRkZWQgdG8gaW5zdCIpOwp9CmVsc2UKewogICAgb3MudG9hc3QoImJvdHMgYWRkZWQgdG8gaW5zdCIpOwp9CgphYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogcGFzdGVkIGRhdGEiKTsKCmxpbmtzLmNyZWF0ZS5hYkNyZWF0ZUJvdHMoe2JvdHM6IHBhc3RlZERhdGF9KTsKCmZ1bmN0aW9uIHJlcGxhY2VNYWNyb3ModGV4dCkgewogICAgaWYgKCF0ZXh0KSB7CiAgICAgICAgcmV0dXJuIHRleHQ7CiAgICB9CgogICAgZm9yIChsZXQgbSBvZiBNQUNST1MpIHsKICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKG0udGVzdCwgbS5yZXBsYWNlbWVudCk7CiAgICB9CgogICAgcmV0dXJuIHRleHQ7Cn0nAPqR3uYC6ycIcmVtZW1iZXICBAD6kd7mAowwKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAPqR3uYC6ycGY3JlYXRlAgQA+pHe5gKzMCjwn5SXMzRjM2MyMTAtNWJmMS00OWNmLWIxNTEtZWUyZDA3ZjBlNjczJwD6kd7mAusnCGFiSWdub3JlAgQA+pHe5gLaMAR0cnVlKAD6kd7mAusnDGFiQm90VmVyc2lvbgF9ngEnAPqR3uYC6ycJb25LZXlEb3duAgQA+pHe5gLgMKwJQGlmICghYnVpbGRlclZlcnNpb24gfHwgKCFsaW5rcy5yZW1lbWJlci5saW5rcy5hYkJvdEZvY3VzICYmICFsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMpKQp7CiAgICByZXR1cm47Cn0KCmlmICh0aGF0LmtleXMgPT0gImMiKQp7CiAgICBsZXQgbWV0YUlucHV0ID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiTWV0YSIpOwoKICAgIGlmICghbWV0YUlucHV0KQogICAgewogICAgICAgIG1ldGFJbnB1dCA9IG9zLmdldElucHV0U3RhdGUoImtleWJvYXJkIiwgIkNvbnRyb2wiKTsKICAgIH0KICAgIAogICAgaWYgKCFtZXRhSW5wdXQpCiAgICB7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGxldCBmb3JtYXR0ZWRGaWxlOwogICAgbGV0IHN0YXRlID0ge307CgogICAgaWYgKGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiQm90Rm9jdXMpCiAgICB7CiAgICAgICAgbGV0IHNlbGVjdGVkQm90ID0gbGlua3MucmVtZW1iZXIubGlua3MuYWJCb3RGb2N1czsKCiAgICAgICAgc3RhdGVbc2VsZWN0ZWRCb3QuaWRdID0gc2VsZWN0ZWRCb3Q7CgogICAgICAgIGFiLmxvZyhhYlJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiBjb3BpZWQgYSBib3QgdG8gY2xpcGJvYXJkIik7CiAgICB9CiAgICBlbHNlIGlmIChsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMpCiAgICB7CiAgICAgICAgbGV0IHNlbGVjdGVkQm90cyA9IGxpbmtzLnJlbWVtYmVyLmxpbmtzLmFiTXVsdGlwbGVCb3RGb2N1czsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RlZEJvdHMubGVuZ3RoOyBpKyspCiAgICAgICAgewogICAgICAgICAgICBzdGF0ZVtzZWxlY3RlZEJvdHNbaV0uaWRdID0gc2VsZWN0ZWRCb3RzW2ldOwogICAgICAgIH0KCiAgICAgICAgYWIubG9nKGFiUmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6IGNvcGllZCBtdWx0aXBsZSBib3RzIHRvIGNsaXBib2FyZCIpOwogICAgfQoKICAgIGxldCBuZXdGaWxlID0ge307CiAgICBuZXdGaWxlLnZlcnNpb24gPSAxOwogICAgbmV3RmlsZS5zdGF0ZSA9IHN0YXRlOwoKICAgIGZvcm1hdHRlZEZpbGUgPSBKU09OLnN0cmluZ2lmeShuZXdGaWxlKTsKCiAgICBvcy5zZXRDbGlwYm9hcmQoZm9ybWF0dGVkRmlsZSk7CgogICAgb3MudG9hc3QoImJvdCBjb3BpZWQgdG8gY2xpcGJvYXJkIik7Cn0nAQRib3RzJGJkYWJkNmMwLTg5ZjktNGY3NS1iMzVjLTI2ZjRlYzUyMDdkNgEnAPqR3uYCjToGc3lzdGVtAgQA+pHe5gKOOhBhYi5hY3Rpb24ucmVwb3J0JwD6kd7mAo06BGZvcm0CBAD6kd7mAp86B25vdGhpbmcnAPqR3uYCjToQYWJDb3JlTWVudUFjdGlvbgIEAPqR3uYCpzoRQG9zLnJlcG9ydEluc3QoKTsnAPqR3uYCjToTYWJDb3JlTWVudVNvcnRPcmRlcgIEAPqR3uYCuToDMTAxJwD6kd7mAo06D2FiQ29yZU1lbnVDb2xvcgIEAPqR3uYCvToHI0YyQjcwNScA+pHe5gKNOg5hYkNvcmVNZW51SWNvbgIEAPqR3uYCxToEZmxhZycA+pHe5gKNOg9hYkNvcmVNZW51TGFiZWwCBAD6kd7mAso6BnJlcG9ydCcA+pHe5gKNOghhYkFjdGlvbgIEAPqR3uYC0ToEdHJ1ZScA+pHe5gKNOghhYklnbm9yZQIEAPqR3uYC1joEdHJ1ZSgA+pHe5gKNOgxhYkJvdFZlcnNpb24BfQ8nAQRib3RzJGM2OGM1YjgyLWMwYTctNGE1YS05MTA0LTVkZDhlMzJhZTRlMgEnAPqR3uYC3DoGc3lzdGVtAgQA+pHe5gLdOhRhYi5hY3Rpb24ub3Blbl9zaGVldCcA+pHe5gLcOgtkZXNjcmlwdGlvbgIEAPqR3uYC8joUU2tpbGwgdG8gb3BlbiBzaGVldC4nAPqR3uYC3DoIYWJBY3Rpb24CBAD6kd7mAoc7BHRydWUnAPqR3uYC3DoEZm9ybQIEAPqR3uYCjDsHbm90aGluZycA+pHe5gLcOhBhYkNvcmVNZW51QWN0aW9uAgQA+pHe5gKUO/UCQGNvbnN0IGN1cnJlbnRJbnN0ID0gb3MuZ2V0Q3VycmVudEluc3QoKTsKY29uc3QgY3VycmVudERpbSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBY3RpdmVEaW1lbnNpb247CmNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKCmlmIChzdGF0ZSkgCnsKICAgIG9zLm9wZW5VUkwoY29uZmlnQm90LnRhZ3MucGVybWFsaW5rICsgYCZzaGVldFBvcnRhbD0ke2N1cnJlbnREaW19YCk7Cn0KZWxzZQp7CiAgICBjb25maWdCb3QudGFncy5zaGVldFBvcnRhbCA9IGN1cnJlbnREaW07Cn0KCmFiLmxvZyhhYlJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyBgOiBvcGVuZWQgJHtjdXJyZW50RGltfSBzaGVldGApOycA+pHe5gLcOghyZW1lbWJlcgIEAPqR3uYCij4o8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycA+pHe5gLcOg9hYkNvcmVNZW51TGFiZWwCBAD6kd7mArE+Cm9wZW4gc2hlZXQnAPqR3uYC3DoPYWJCb3RNZW51QWN0aW9uAgQA+pHe5gK8PvECQGNvbnN0IGN1cnJlbnRJbnN0ID0gb3MuZ2V0Q3VycmVudEluc3QoKTsKY29uc3QgY3VycmVudERpbSA9IGxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QudGFncy5saW5lVG87CmNvbnN0IHN0YXRlID0gb3MuZ2V0SW5wdXRTdGF0ZSgia2V5Ym9hcmQiLCAiU2hpZnQiKTsKCmlmIChzdGF0ZSkgCnsKICAgIG9zLm9wZW5VUkwoY29uZmlnQm90LnRhZ3MucGVybWFsaW5rICsgYCZzaGVldFBvcnRhbD0ke2N1cnJlbnREaW19YCk7Cn0KZWxzZQp7CiAgICBjb25maWdCb3QudGFncy5zaGVldFBvcnRhbCA9IGN1cnJlbnREaW07Cn0KCmFiLmxvZyhhYlJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiBvcGVuZWQgYm90IHNoZWV0Iik7JwD6kd7mAtw6DmFiQm90TWVudUxhYmVsAgQA+pHe5gKuQQ5vcGVuIGJvdCBzaGVldCcA+pHe5gLcOg1tYW5pZmVzdGF0aW9uAgQA+pHe5gK9QSjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwD6kd7mAtw6DWFiQm90TWVudUljb24CBAD6kd7mAuRBCnRhYmxlX3ZpZXcnAPqR3uYC3DoOYWJDb3JlTWVudUljb24CBAD6kd7mAu9BCnRhYmxlX3ZpZXcnAPqR3uYC3DoSYWJCb3RNZW51U29ydE9yZGVyAgQA+pHe5gL6QQExJwD6kd7mAtw6CGFiSWdub3JlAgQA+pHe5gL8QQR0cnVlKAD6kd7mAtw6DGFiQm90VmVyc2lvbgF9ngEnAPqR3uYC3DoXYWJNdWx0aXBsZUJvdE1lbnVBY3Rpb24CBAD6kd7mAoJClARAY29uc3QgY3VycmVudEluc3QgPSBvcy5nZXRDdXJyZW50SW5zdCgpOwpjb25zdCBjdXJyZW50RGltID0gImFiTXVsdGlwbGVTZWxlY3QiOwoKY29uZmlnQm90LnRhZ3Muc2hlZXRQb3J0YWwgPSBjdXJyZW50RGltOwoKc2V0VGFnTWFzayhsaW5rcy5yZW1lbWJlci5saW5rcy5hYk11bHRpcGxlQm90Rm9jdXMsIGN1cnJlbnREaW0sIHRydWUsICJ0ZW1wTG9jYWwiKTsKCm1hc2tzLmN1cnJlbnRTaGVldEJvdHMgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiTXVsdGlwbGVCb3RGb2N1czsKbWFza3Mub25Qb3J0YWxDaGFuZ2VkID0gYEAgaWYgKHRoYXQuZGltZW5zaW9uICE9ICJhYk11bHRpcGxlU2VsZWN0IiAmJiB0aGF0LnBvcnRhbCA9PSAic2hlZXRQb3J0YWwiKQp7CiAgICBjbGVhclRhZ01hc2tzKGxpbmtzLmN1cnJlbnRTaGVldEJvdHMpOwoKICAgIGNsZWFyVGFnTWFza3ModGhpc0JvdCk7Cn0gYDsKCmFiLmxvZyhhYlJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHkgKyAiOiBvcGVuZWQgbXVsdGlwbGUgc2VsZWN0IHNoZWV0Iik7JwD6kd7mAtw6FmFiTXVsdGlwbGVCb3RNZW51TGFiZWwCBAD6kd7mApdGGm9wZW4gbXVsdGlwbGUgc2VsZWN0IHNoZWV0JwD6kd7mAtw6FWFiTXVsdGlwbGVCb3RNZW51SWNvbgIEAPqR3uYCskYKdGFibGVfdmlldycA+pHe5gLcOhRhYkNvcmVNZW51T25HZW5lcmF0ZQIEAPqR3uYCvUaAAkBsZXQgY3VycmVudERpbSA9IGxpbmtzLnJlbWVtYmVyLnRhZ3MuYWJBY3RpdmVEaW1lbnNpb247Cgp0YWdzLmxhYmVsID0gInNoZWV0UG9ydGFsPSIgKyBjdXJyZW50RGltOwoKdGFncy5vbktleURvd24gPSBgQCBpZih0aGF0LmtleXMgPT0gIlNoaWZ0Iil7bWFza3MubGFiZWwgPSB0YWdzLmxhYmVsICsgIiBpbiBuZXcgdGFiIjt9YDsKdGFncy5vbktleVVwID0gYEAgaWYodGhhdC5rZXlzID09ICJTaGlmdCIpe21hc2tzLmxhYmVsID0gbnVsbDt9YDsnAPqR3uYC3DoTYWJCb3RNZW51T25HZW5lcmF0ZQIEAPqR3uYCvkiYAkBsZXQgc2VsZWN0ZWRCb3QgPSBsaW5rcy5tYW5pZmVzdGF0aW9uLmxpbmtzLmFiQm90LnRhZ3MubGluZVRvOwoKdGFncy5sYWJlbCA9ICJzaGVldFBvcnRhbD0iICsgc2VsZWN0ZWRCb3Quc3Vic3RyaW5nKDAsIDQpOwoKdGFncy5vbktleURvd24gPSBgQCBpZih0aGF0LmtleXMgPT0gIlNoaWZ0Iil7bWFza3MubGFiZWwgPSB0YWdzLmxhYmVsICsgIiBpbiBuZXcgdGFiIjt9YDsKdGFncy5vbktleVVwID0gYEAgaWYodGhhdC5rZXlzID09ICJTaGlmdCIpe21hc2tzLmxhYmVsID0gbnVsbDt9YDsnAQRib3RzJGVjODVjMWQ2LTlmMWEtNDBkNC04MmUxLTViZDY4MDM0OWMyNwEnAPqR3uYC10oGc3lzdGVtAgQA+pHe5gLYSg1hYi5hY3Rpb24uYXNrJwD6kd7mAtdKBGZvcm0CBAD6kd7mAuZKB25vdGhpbmcnAPqR3uYC10oGYXNrR1BUAgQA+pHe5gLuSvIRQGlmICghdGFncy5ncHRBY3RpdmUgfHwgYXV0aEJvdC50YWdzLnByaXZhY3lGZWF0dXJlcy5hbGxvd0FJID09IGZhbHNlKQp7CiAgICBvcy50b2FzdCgiQUkgbm90IGF1dGhvcml6ZWQgZm9yIHRoaXMgYWNjb3VudCIpOwogICAgCiAgICByZXR1cm47Cn0gCgpjb25zb2xlLmxvZygiQVNLIiwgdGhhdCk7CgpsZXQgaW5xdWlyeSA9IHRoYXQuaW5xdWlyeSA/PyB0aGF0OwoKY29uc3QgcHJvbXB0ID0gIXRoYXQucHJvbXB0ID8gdGFncy5wcm9tcHRfY29yZSA6IHRhZ3NbInByb21wdF8iICsgdGhhdC5wcm9tcHRdOwoKYWIubG9nKGFiUmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6IHRoaW5raW5nIGFib3V0ICIgKyBpbnF1aXJ5KTsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWJCb3RDaGF0KHttZXNzYWdlOiAidGhpbmtpbmcgYWJvdXQgIiArIGlucXVpcnl9KTsKCmlmICh0aGF0LnByb21wdCA9PSAiZ3JpZCIpCnsKICAgIGlucXVpcnkgPSBpbnF1aXJ5ICsgYC4gQm90IG11c3QgaW5jbHVkZSB7JHt0aGF0LmRhdGEuZGltZW5zaW9ufTogdHJ1ZSwgJHt0aGF0LmRhdGEuZGltZW5zaW9ufVg6ICR7dGhhdC5kYXRhLmRpbWVuc2lvblh9LCAke3RoYXQuZGF0YS5kaW1lbnNpb259WToke3RoYXQuZGF0YS5kaW1lbnNpb25ZfX0uYAp9CmVsc2UgaWYgKHRoYXQucHJvbXB0ID09ICJib3QiKQp7CiAgICBpbnF1aXJ5ID0gaW5xdWlyeSArIGAuIEJvdCB0byBiZSBtb2RpZmllZCBoYXMgdGhlIGlkIG9mOiBgICsgdGhhdC5kYXRhLmJvdC5pZDsKfQplbHNlIGlmICh0aGF0LnByb21wdCA9PSAiY29yZSIpCnsKICAgIC8vQ0hFQ0sgSUYgSVQgSVMgQ09OVkVSU0FUSU9OQUwsIGFuZCBpZiBpdCBpcyBjaGFuZ2UgUHJvbXB0CiAgICBjb25zdCBjb252ZXJzYXRpb25Qcm9tcHQgPSB0YWdzLmNvbnZlcnNhdGlvblByb21wdCArIGlucXVpcnk7CiAgICBjb25zdCBjb252ZXJzYXRpb25DaGVjayA9IGF3YWl0IGFpLmNoYXQoY29udmVyc2F0aW9uUHJvbXB0KTsKCiAgICBpZiAoY29udmVyc2F0aW9uQ2hlY2sgPT0gInRydWUiKQogICAgewogICAgICAgIGNvbnN0IGNoYXR0aW5nUHJvbXB0ID0gYFlvdSBhcmUgYW4gQUkgYnVpbGRlciBhZ2VudCBjYWxsZWQgJHthYlJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHl9IG1lYW50IHRvIGhlbHAgcGVvcGxlIGJ1aWxkIGFuZCBsZWFybiBpbnNpZGUgb2YgY2FzdWFsT1MgKGEgd2ViIGJhc2VkIGphdmFzY3JpcHQgYW5kIHR5cGVzY3JpcHQgZW52aXJvbm1lbnQpLgogICAgICAgIAogICAgICAgIFBsZWFzZSBiZSBraW5kIGNvdXJ0ZW91cyBhbmQgZnJpZW5kbHkgd2hpbGUgeW91IGFuc3dlciB0aGUgZm9sbG93aW5nIGlucXVpcnkgdG8gdGhlIGJlc3Qgb2YgeW91ciBhYmlsaXR5LgogICAgICAgIAogICAgICAgIFJVTEVTOgogICAgICAgIDEuIEFsd2F5cyBiZSB3YXJtIGFuZCBmcmllbmRseS4KICAgICAgICAyLiBCZSBhcyBoZWxwZnVsIGFzIHlvdSBjYW4gd2l0aG91dCBpbnZlbnRpbmcgaWRlYXMuCiAgICAgICAgMy4gQmUgZW5jb3VyYWdpbmcuCiAgICAgICAgCiAgICAgICAgSU5RVUlSWTogYCArIGlucXVpcnk7CiAgICAgICAgY29uc3QgY2hhdHRpbmcgPSBhd2FpdCBhaS5jaGF0KGNoYXR0aW5nUHJvbXB0KTsKCiAgICAgICAgYWIubG9nKGFiUmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6ICIgKyBjaGF0dGluZyk7CgogICAgICAgIGxpbmtzLm1hbmlmZXN0YXRpb24uYWJCb3RDaGF0KHttZXNzYWdlOiBjaGF0dGluZywgZHVyYXRpb246IDd9KTsKCiAgICAgICAgbGlua3MubWFuaWZlc3RhdGlvbi5hYkNsaWNrKCk7CgogICAgICAgIHJldHVybjsKICAgIH0KfQoKY29uc3QgYW5zd2VyID0gYXdhaXQgdGhpc0JvdC5zdWJtaXRSZXF1ZXN0R1BUKHtpbnF1aXJ5OiBpbnF1aXJ5LCBwcm9tcHQ6IHByb21wdH0pOwoKbGV0IG5ld0Fuc3dlciA9IGFuc3dlcjsKCmlmIChhbnN3ZXIuaW5kZXhPZigiYGBgIikgIT0gLTEpCnsKICAgIG5ld0Fuc3dlciA9IGFuc3dlci5zdWJzdHJpbmcoYW5zd2VyLmluZGV4T2YoImBgYCIpLCBhbnN3ZXIubGFzdEluZGV4T2YoImBgYCIpKTsKCiAgICBuZXdBbnN3ZXIgPSBuZXdBbnN3ZXIucmVwbGFjZUFsbCgnamF2YXNjcmlwdCcsICIiKTsKCiAgICBuZXdBbnN3ZXIgPSBuZXdBbnN3ZXIucmVwbGFjZUFsbCgiYGBgIiwgIiIpOwp9CgphYi5sb2coYWJSZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5ICsgIjogIiArIG5ld0Fuc3dlcik7Cgpvcy5ydW4obmV3QW5zd2VyKTsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOwoKcmV0dXJuOygA+pHe5gLXSglncHRBY3RpdmUBeCcA+pHe5gLXShBzdWJtaXRSZXF1ZXN0R1BUAgQA+pHe5gLiXJMGQGxldCBzeXN0ZW1Qcm9tcHQgPSB0aGF0LnByb21wdCA/IHRoYXQucHJvbXB0IDogdGFncy5wcm9tcHRfY29yZTsKCnN5c3RlbVByb21wdCA9IHN5c3RlbVByb21wdCArIHRoYXQuaW5xdWlyeTsKCmlmIChhdXRoQm90LnRhZ3MucHJpdmFjeUZlYXR1cmVzLmFsbG93QUkgPT0gZmFsc2UpCnsKICAgIG9zLnRvYXN0KCJBSSBub3QgYXV0aG9yaXplZCBvbiB0aGlzIGFjY291bnQiKTsKCiAgICByZXR1cm47Cn0KCmxldCBjdXJyZW50RXhwZXJpZW5jZUJvdHMgPSBnZXRCb3RzKGJ5TW9kKHtzcGFjZTogInNoYXJlZCIsIGFiSWdub3JlOiBudWxsfSkpOwoKaWYgKGN1cnJlbnRFeHBlcmllbmNlQm90cy5sZW5ndGggPiAwKQp7CiAgICBzeXN0ZW1Qcm9tcHQgPSBzeXN0ZW1Qcm9tcHQgKyAiIFRoZXNlIGFyZSB0aGUgYm90cyB0aGF0IGN1cnJlbnRseSBleGlzdCBpbiB0aGUgZXhwZXJpZW5jZTogIiArIGN1cnJlbnRFeHBlcmllbmNlQm90czsKfQoKbGV0IG5ld1N0YXR1c0JhciA9IGF3YWl0IGxpbmtzLmlucHV0LmFiUHJvZ3Jlc3NCYXIoYGFza2luZyAke2xpbmtzLnJlbWVtYmVyLnRhZ3MuYWJCdWlsZGVySWRlbnRpdHl9YCk7Cgpjb25zdCBhaVJlc3AgPSBhd2FpdCBhaS5jaGF0KHN5c3RlbVByb21wdCwgewogICAgbW9kZWw6IHRoYXQubW9kZWwgPz8gImdwdC00byIsCiAgICB0ZW1wZXJhdHVyZTogMCwKICAgIHRvcFA6IDEsCiAgICBwcmVzZW5jZVBlbmFsdHk6IDAuNiwKICAgIGZyZXF1ZW5jeVBlbmFsdHk6IDAKfSk7CgpkZXN0cm95KG5ld1N0YXR1c0Jhcik7CgpyZXR1cm4gYWlSZXNwOycA+pHe5gLXSgZwcm9tcHQCBAD6kd7mAvZioCJUaGUgZm9sbG93aW5nIGlzIGEgY29udmVyc2F0aW9uIHdpdGggYWIuIGFiIGlzIGEgaGVscGZ1bCwgY2xldmVyLCBhbmQgY2FwYWJsZSBBSS4gYWIgd2lsbCByZXNwb25kIHdpdGggdGhlIGNvcnJlY3QgamF2YXNjcmlwdCBpbXBsZW1lbnRhdGlvbiAoY29kZSkgb2YgdGhlIHJlcXVlc3RlZCBhY3Rpb24uCgpIZXJlIGlzIGEgYnJpZWYgbGlzdCBvZiB0aGluZ3MgYWIgY2FuIGRvOgotIENyZWF0ZSBib3RzCgpCb3RzIGFyZSBhIGNvbGxlY3Rpb24gb2YgdGFncywgYW5kIHRoZXkgY2FuIGJlIGNyZWF0ZWQgdXNpbmcgdGhlIGNyZWF0ZSgpIGZ1bmN0aW9uLgpUaGUgY3JlYXRlKCkgZnVuY3Rpb24gaXMgdXNlZCB0byBjcmVhdGUgb25lIG9yIG11bHRpcGxlIGJvdHMgb2JqZWN0cy4KY3JlYXRlKCkgcmV0dXJucyBhIGJvdCBvYmplY3Q7IGl0IGRvZXMgbm90IG5lZWQgdG8gYmUgc3RvcmVkIGluIGEgdmFyaWFibGUgb3IgY29uc3QuIAoKSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgcmVkIGJvdCBpbiB0aGUgaG9tZSBkaW1lbnNpb246CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIGNvbG9yOiAicmVkIiwKICAgIGZvcm06ICJjdWJlIgp9KTsKYGBgCgpBcyB5b3UgY2FuIHNlZSwgdGhlIGV4YW1wbGUgYWJvdmUgY3JlYXRlcyBhIGJvdCB3aXRoIHRoZSBgaG9tZWAgdGFnIHNldCB0byBgdHJ1ZWAgYW5kIHRoZSBgY29sb3JgIHRhZyBzZXQgdG8gYHJlZGAuClVubGVzcyBzcGVjaWZpZWQgb3RoZXJ3aXNlLCBhYiBzaG91bGQgY3JlYXRlIGJvdHMgd2l0aCB0aGUgYGhvbWVgIHRhZyBzZXQgdG8gYHRydWVgLgoKRGltZW5zaW9ucyBhcmUgdGFncyB3aGljaCBlbmQgdXAgYmVpbmcgdmlzdWFsaXplZCBpbiAzRCBzcGFjZS4gSW4gYWRkaXRpb24gdG8gYmVpbmcgYSB0YWcsIGBob21lYCBpcyBhbHNvIGEgZGltZW5zaW9uLgpZb3UgY2FuIGNvbnRyb2wgdGhlIHBvc2l0aW9uIHRoYXQgYSBib3QgaXMgcmVuZGVyZWQgYXQgYnkgdXNpbmcgdGhlIGB7ZGltZW5zaW9ufVBvc2l0aW9uYCB0YWcsIHdoZXJlIGB7ZGltZW5zaW9ufWAgaXMgcmVwbGFjZWQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgZGltZW5zaW9uLgpIZXJlIGlzIGFuIGV4YW1wbGUgb2YgdXNpbmcgdGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIHRvIG1ha2UgYSBib3QgYXQgcG9zaXRpb24gKDMsIDIpIGluIHRoZSBob21lIGRpbWVuc2lvbjoKYGBgCmNyZWF0ZSh7CiAgICBob21lOiB0cnVlLAogICAgaG9tZVBvc2l0aW9uOiAn4p6h77iPMywxJwp9KTsKYGBgCgpMaXN0ZW5lcnMgYXJlIHRhZ3Mgd2hpY2ggY29udGFpbiBKYXZhU2NyaXB0IGFuZCByZXNwb25kIHRvIGNlcnRhaW4gZXZlbnRzLiBUaGV5IHdvcmsgbGlrZSBub3JtYWwgdGFncywgZXhjZXB0IHRoZXkgbmVlZCB0byBoYXZlIGEgYEBgIHN5bWJvbCBhdCB0aGUgc3RhcnQgb2YgdGhlIHRhZyB2YWx1ZS4KSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgYm90IHdpdGggYSBgb25DbGlja2AgbGlzdGVuZXI6CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIG9uQ2xpY2s6IGBAb3MudG9hc3QoIkhlbGxvLCB3b3JsZCEiKTtgCn0pOwpgYGAKCkZvciBleGFtcGxlIGlmIGFza2VkIGZvciBhIHByb2NlZHVyYWwgZm9yZXN0IHRoZSBjb2RlIHJldHVybmVkIHdvdWxkIGJlIHNvbWV0aGluZyBsaWtlIHRoaXM6CgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBvbkNsaWNrOiBgQHsKICAgICAgICBjb25zdCBlbGVtZW50cyA9IFsndHJlZScsICdidXNoJywgJ2Zsb3dlcicsICdyb2NrJywgJ3JhYmJpdCcsICdmb3gnLCAnd2F0ZXInXTsKICAgICAgICBjb25zdCBjb2xvcnMgPSBbJ2dyZWVuJywgJ2RhcmtncmVlbicsICdnb2xkJywgJ2dyYXknLCAnYnJvd24nLCAnb3JhbmdlJywgJ2JsdWUnXTsKICAgICAgICBjb25zdCBpbnRlcmFjdGlvblNvdW5kcyA9IFsnd2luZCBpbiB0aGUgYnJhbmNoZXMnLCAncnVzdGxpbmcgbGVhdmVzJywgJ2NyaWNrZXQgY2hpcnBpbmcnLCAncmFpbiBwYXR0ZXJpbmcnLCAndGh1bXBpbmcnLCAneWlwcGluZycsICdzcGxhc2hpbmcnXTsKICAgICAgICBjb25zdCBzY2FsZXNYID0gWzAuOSwgMS4yLCAwLjEsIDEsIDAuMjUsIDAuMywgMV07CiAgICAgICAgY29uc3Qgc2NhbGVzWSA9IFswLjksIDEuMiwgMC4xLCAxLCAwLjQsIDAuNywgMV07CiAgICAgICAgY29uc3Qgc2NhbGVzWiA9IFszLCAwLjc1LCAwLjIsIDAuNSwgMC41LCAwLjYsIDAuMDFdOwogICAgICAgIAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIAogICAgICAgIHsKICAgICAgICAgICAgbGV0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZWxlbWVudHMubGVuZ3RoKTsKICAgICAgICAgICAgbGV0IHBvc2l0aW9uWDsKICAgICAgICAgICAgbGV0IHBvc2l0aW9uWTsKICAgICAgICAKICAgICAgICAgICBpZiAoZWxlbWVudHNbcmFuZG9tSW5kZXhdID09ICd3YXRlcicpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChnZXRCb3QoJ2xhYmVsJywgJ3dhdGVyJykpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3NpYmxlV2F0ZXJDb25uZWN0aW9ucyA9IGdldEJvdHMoJ2xhYmVsJywgJ3dhdGVyJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZVdhdGVyQm90ID0gcG9zc2libGVXYXRlckNvbm5lY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlV2F0ZXJDb25uZWN0aW9ucy5sZW5ndGgpXTsKICAgICAgICAgICAgICAgICAgICBsZXQgY29pbkZsaXAgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKDAsMSkpOwogICAgICAgICAgICAgICAgICAgIGxldCByYW5kb21EaXJlY3Rpb24gPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gLTEgOiAxOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChjb2luRmxpcCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVg7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWSA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVkgKyByYW5kb21EaXJlY3Rpb247CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVggKyByYW5kb21EaXJlY3Rpb247CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWSA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25ZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7CiAgICAgICAgICAgICAgICBwb3NpdGlvblkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApOwogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgIGNyZWF0ZSh7CiAgICAgICAgICAgICAgICBob21lOiB0cnVlLAogICAgICAgICAgICAgICAgaG9tZVBvc2l0aW9uOiAn4p6h77iPJyArIHBvc2l0aW9uWCArICcsJyArIHBvc2l0aW9uWSwKICAgICAgICAgICAgICAgIHRpcExhYmVsOiBlbGVtZW50c1tyYW5kb21JbmRleF0sCiAgICAgICAgICAgICAgICBvblBvaW50ZXJFbnRlcjogIkAgb3MudGlwKHRhZ3MudGlwTGFiZWwpIjsKICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvcnNbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgc2NhbGVYOiBzY2FsZXNYW3JhbmRvbUluZGV4XSwKICAgICAgICAgICAgICAgIHNjYWxlWTogc2NhbGVzWVtyYW5kb21JbmRleF0sCiAgICAgICAgICAgICAgICBzY2FsZVo6IHNjYWxlc1pbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgb25DbGljazogIkAgb3MudGlwKCdZb3UgaGVhciAiICsgaW50ZXJhY3Rpb25Tb3VuZHNbcmFuZG9tSW5kZXhdICsgIicpOyIKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfWAKfSk7CmBgYAoKUGxlYXNlIHJldHVybiBvbmx5IHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBjb2RlIGFzIGEgcmVzcG9uc2UuJwD6kd7mAtdKCHJlbWVtYmVyAgQA+pHe5gKPhQEo8J+Ul2U1MzgwYTZiLThiNGQtNGE4Yi04YjA0LTU4ZTFlYjAzZTVlNycA+pHe5gLXShBhYkNvcmVNZW51QWN0aW9uAgQA+pHe5gK2hQH9CkBjb25zdCBpbnF1aXJ5ID0gdGhhdC5tZXNzYWdlID8/IHRoYXQ7CmNvbnN0IGJhc2VJbnF1aXJ5ID0gaW5xdWlyeTsKY29uc3QgbWVudSA9IHRoYXQubWVudSA/PyAiY29yZSI7CmNvbnN0IHNwYWNlQ2hlY2sgPSBpbnF1aXJ5LmluZGV4T2YoIiAiKTsKY29uc3QgbWVudUJvdHMgPSBnZXRCb3RzKGNvbmZpZ0JvdC50YWdzLm1lbnVQb3J0YWwsIHRydWUpOwoKd2hpc3BlcihtZW51Qm90cywgImFiTWVudVJlZnJlc2giKTsKCmFiLmxvZygidXNlcjogIiArIGlucXVpcnkpOwoKaWYgKCFjb25maWdCb3QudGFncy50YWdQb3J0YWwgJiYgbGlua3MucmVtZW1iZXIudGFncy5hYkF3YWtlU3RhdGUgJiYgdGhhdC5tZXNzYWdlICE9ICIubG9nIikKewogICAgbGlua3MuaW5wdXQub25DaGF0KHttZXNzYWdlOiAiLmxvZyJ9KTsKfQoKaWYgKGlucXVpcnlbMF0gPT0gIi4iKQp7CiAgICBsaW5rcy5pbnB1dC5vbkNoYXQoe21lc3NhZ2U6IGlucXVpcnl9KTsKfQplbHNlIGlmIChzcGFjZUNoZWNrID09IC0xKQp7CiAgICBsZXQgYXNrSm9pbklEID0gaW5xdWlyeS5yZXBsYWNlQWxsKCItIiwgIiIpOwogICAgbGV0IGFzayA9IGF3YWl0IGxpbmtzLnNlYXJjaC5vbkxvb2t1cEFza0lEKHthc2tJRDogYXNrSm9pbklEfSk7CgogICAgaWYgKGFzay5zdWNjZXNzICYmIGFzay5kYXRhLnVybCkKICAgIHsKICAgICAgICBsaW5rcy5sZWFybi5hYkpvaW5Ib3N0KHtkYXRhOiBhc2suZGF0YX0pOwogICAgfQogICAgZWxzZSBpZiAoIWFzay5zdWNjZXNzKQogICAgewogICAgICAgIGFzayA9IGF3YWl0IGxpbmtzLnNlYXJjaC5vbkxvb2t1cEFCRWdncyh7YWJJRDogYmFzZUlucXVpcnksIGluaXRpYWxCb290OiB0aGF0LmluaXRpYWxCb290LCBhdXRvSGF0Y2g6IHRoYXQuYXV0b0hhdGNofSk7CiAgICB9Cn0KZWxzZQp7CiAgICBhd2FpdCBvcy5yZXF1ZXN0QXV0aEJvdCgpOwoKICAgIGlmICghYXV0aEJvdCkKICAgIHsKICAgICAgICBvcy50b2FzdCgicGxlYXNlIHNpZ24gaW4gdG8gYWNjZXNzIGFkdmFuY2VkIEFJIGZlYXR1cmVzIik7CgogICAgICAgIGxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOwogICAgfQogICAgZWxzZSBpZiAoYXV0aEJvdC50YWdzLnN1YnNjcmlwdGlvblRpZXIgPT0gIkZyZWVQbGF5IikKICAgIHsKICAgICAgICBvcy50b2FzdCgicGxlYXNlIGNoZWNrIHlvdXIgc3Vic2NyaXB0aW9uIGluIG9yZGVyIHRvIGFjY2VzcyBhZHZhbmNlZCBBSSBmZWF0dXJlcyIpOwoKICAgICAgICBsaW5rcy5tYW5pZmVzdGF0aW9uLmFiQ2xpY2soKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBtYXNrcy5ncHRBY3RpdmUgPSB0cnVlOwoKICAgICAgICBhd2FpdCB0aGlzQm90LmFza0dQVCh7aW5xdWlyeTogaW5xdWlyeSwgcHJvbXB0OiBtZW51LCBkYXRhOiB0aGF0fSk7CiAgICB9Cn0nAPqR3uYC10oUYWJDb3JlTWVudU9uR2VuZXJhdGUCBAD6kd7mArSQAagDQHRhZ3Mub25TdWJtaXQgPSBgQCBsaW5rcy5iYXNlU2tpbGwuYWJDb3JlTWVudUFjdGlvbih7bWVzc2FnZTogdGhhdC50ZXh0LCBtZW51OiAiY29yZSJ9KTtgOwp0YWdzLmZvcm0gPSAiaW5wdXQiOwoKaWYgKCFhdXRoQm90KQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlIGlmIChhdXRoQm90LnRhZ3Muc3Vic2NyaXB0aW9uVGllciA9PSAiRnJlZVBsYXkiKQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5Owp9CicA+pHe5gLXShNhYkNvcmVNZW51U29ydE9yZGVyAgQA+pHe5gLdkwEDMTAyJwD6kd7mAtdKEGFiR3JpZE1lbnVBY3Rpb24CBAD6kd7mAuGTAQ5ALy9wbGFjZWhvbGRlcicA+pHe5gLXShRhYkdyaWRNZW51T25HZW5lcmF0ZQIEAPqR3uYC8JMBswVAdGFncy5kaW1lbnNpb24gPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiR3JpZEZvY3VzLmRpbWVuc2lvbjsKdGFncy5kaW1lbnNpb25YID0gbGlua3MucmVtZW1iZXIudGFncy5hYkdyaWRGb2N1cy5wb3NpdGlvbi54Owp0YWdzLmRpbWVuc2lvblkgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiR3JpZEZvY3VzLnBvc2l0aW9uLnk7CnRhZ3Mub25TdWJtaXQgPSBgQGxpbmtzLmJhc2VTa2lsbC5hYkNvcmVNZW51QWN0aW9uKHttZXNzYWdlOiB0aGF0LnRleHQsIG1lbnU6ICJncmlkIiwgZGltZW5zaW9uOiB0YWdzLmRpbWVuc2lvbiwgZGltZW5zaW9uWDogdGFncy5kaW1lbnNpb25YLCBkaW1lbnNpb25ZOiB0YWdzLmRpbWVuc2lvbll9KTtgOwp0YWdzLmZvcm0gPSAiaW5wdXQiOwoKaWYgKCFhdXRoQm90KQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlIGlmIChhdXRoQm90LnRhZ3Muc3Vic2NyaXB0aW9uVGllciA9PSAiRnJlZVBsYXkiKQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5Owp9JwD6kd7mAtdKDW1hbmlmZXN0YXRpb24CBAD6kd7mAqSZASjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwD6kd7mAtdKE2FiR3JpZE1lbnVTb3J0T3JkZXICBAD6kd7mAsuZAQMxMDInAPqR3uYC10oPYWJHcmlkTWVudUxhYmVsAgQA+pHe5gLPmQEGYXNrIGFiJwD6kd7mAtdKD2FiQ29yZU1lbnVMYWJlbAIEAPqR3uYC1pkBBmFzayBhYicA+pHe5gLXSg5hYkNvcmVNZW51SWNvbgIEAPqR3uYC3ZkBBGN1YmUnAPqR3uYC10oOYWJHcmlkTWVudUljb24CBAD6kd7mAuKZAQRjdWJlJwD6kd7mAtdKCmVkaXRQcm9tcHQCBAD6kd7mAueZAYcIQHNob3V0KCJhYk1lbnVSZWZyZXNoIik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYk1lbnUiOwoKbGV0IHByb21wdE1lbnVCdXR0b24gPSB7fTsKCnByb21wdE1lbnVCdXR0b24uYWJNZW51ID0gdHJ1ZTsKcHJvbXB0TWVudUJ1dHRvbi5hYk1lbnVSZWZyZXNoID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwpwcm9tcHRNZW51QnV0dG9uLm1hbmlmZXN0YXRpb24gPSB0YWdzLm1hbmlmZXN0YXRpb247CnByb21wdE1lbnVCdXR0b24ucmVtZW1iZXIgPSB0YWdzLnJlbWVtYmVyOwpwcm9tcHRNZW51QnV0dG9uLmdwdEJvdCA9ICLwn5SXIiArIHRoaXNCb3QuaWQ7CnByb21wdE1lbnVCdXR0b24ubGFiZWwgPSAibG9hZCBwcm9tcHQiOwpwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNsb3VkX2Rvd25sb2FkIjsKcHJvbXB0TWVudUJ1dHRvbi5vbkNsaWNrID0gIkAgbGlua3MuZ3B0Qm90LnVwZGF0ZVByb21wdCgnbG9hZCcpOyI7CgpsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihwcm9tcHRNZW51QnV0dG9uKTsKCnByb21wdE1lbnVCdXR0b24ubGFiZWwgPSAic2F2ZSBwcm9tcHQiOwpwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImJhY2t1cCI7CnByb21wdE1lbnVCdXR0b24ub25DbGljayA9ICJAIGxpbmtzLmdwdEJvdC51cGRhdGVQcm9tcHQoJ3NhdmUnKTsiOwoKbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7CgptYXNrcy5vbkdyaWRDbGljayA9IGBAIGNvbmZpZ0JvdC5tYXNrcy50YWdQb3J0YWwgPSBudWxsOwoKdGFnUG9ydGFsQm90Lm1hc2tzLnRhZ1BvcnRhbEFuY2hvclBvaW50ID0gbnVsbDsKYDsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3JQb2ludCA9ICJ0b3AiOwoKY29uZmlnQm90Lm1hc2tzLnRhZ1BvcnRhbCA9IHRoaXNCb3QuaWQgKyAiLnByb21wdF9jb3JlIjsKCmlmIChjb25maWdCb3QubWFza3MudGFnUG9ydGFsU3BhY2UpCnsKICAgIGNvbmZpZ0JvdC5tYXNrcy50YWdQb3J0YWxTcGFjZSA9IG51bGw7Cn0nAPqR3uYC10oEbWVudQIEAPqR3uYC7aEBKPCflJdiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2InAPqR3uYC10oMdXBkYXRlUHJvbXB0AgQA+pHe5gKUogHLCEBzaG91dCgiYWJNZW51UmVmcmVzaCIpOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAiYWJNZW51IjsKCmxldCBwcm9tcHRNZW51QnV0dG9uID0ge307Cgpwcm9tcHRNZW51QnV0dG9uLmFiTWVudSA9IHRydWU7CnByb21wdE1lbnVCdXR0b24uZm9ybSA9ICJpbnB1dCI7CnByb21wdE1lbnVCdXR0b24uYWJNZW51UmVmcmVzaCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKcHJvbXB0TWVudUJ1dHRvbi5tYW5pZmVzdGF0aW9uID0gdGFncy5tYW5pZmVzdGF0aW9uOwpwcm9tcHRNZW51QnV0dG9uLnJlbWVtYmVyID0gdGFncy5yZW1lbWJlcjsKcHJvbXB0TWVudUJ1dHRvbi5ncHRCb3QgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwoKaWYgKHRoYXQgPT0gImxvYWQiKQp7CiAgICBwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gImxvYWQgcHJvbXB0IjsKICAgIHByb21wdE1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiY2xvdWRfZG93bmxvYWQiOwogICAgcHJvbXB0TWVudUJ1dHRvbi5vblN1Ym1pdCA9ICJAIGxpbmtzLmdwdEJvdC5sb2FkUHJvbXB0KHRoYXQudGV4dCk7IjsKfQplbHNlCnsKICAgIHByb21wdE1lbnVCdXR0b24ubGFiZWwgPSAic2F2ZSBwcm9tcHQiOwogICAgcHJvbXB0TWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJiYWNrdXAiOwogICAgcHJvbXB0TWVudUJ1dHRvbi5vblN1Ym1pdCA9ICJAIGxpbmtzLmdwdEJvdC5zYXZlUHJvbXB0KHRoYXQudGV4dCk7IjsKfQoKbGlua3MubWVudS5hYkNyZWF0ZU1lbnVCdXR0b24ocHJvbXB0TWVudUJ1dHRvbik7Cgpwcm9tcHRNZW51QnV0dG9uLmZvcm0gPSBudWxsOwpwcm9tcHRNZW51QnV0dG9uLmxhYmVsID0gIiAgIjsKcHJvbXB0TWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJjZW50ZXIiOwpwcm9tcHRNZW51QnV0dG9uLmNvbG9yID0gIiNmMjQ3MjciOwpwcm9tcHRNZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNhbmNlbCI7CnByb21wdE1lbnVCdXR0b24ub25TdWJtaXQgPSBudWxsOwpwcm9tcHRNZW51QnV0dG9uLm9uQ2xpY2sgPSAiQCBsaW5rcy5ncHRCb3QuZWRpdFByb21wdCgpOyI7CgpsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihwcm9tcHRNZW51QnV0dG9uKTsnAPqR3uYC10oKbG9hZFByb21wdAIEAPqR3uYC3qoB2gNAYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsKCmlmIChhdXRoQm90LnRhZ3MucHJpdmFjeUZlYXR1cmVzLmFsbG93UHVibGljRGF0YSA9PSBmYWxzZSkKewogICAgb3MudG9hc3QoIm5vdCBhdXRob3JpemVkIik7CgogICAgcmV0dXJuOwp9Cgpjb25zdCBwcm9tcHROYW1lID0gImdwdF9wcm9tcHRfIiArIHRoYXQ7CmNvbnN0IG5ld1Byb21wdCA9IGF3YWl0IG9zLmdldERhdGEobGlua3MucmVtZW1iZXIudGFncy5hYlJlY29yZEtleSwgcHJvbXB0TmFtZSk7CgppZiAoIW5ld1Byb21wdC5zdWNjZXNzKQp7CiAgICBvcy50b2FzdCgibm8gcHJvbXB0IGZvdW5kIGJ5IHRoYXQgbmFtZSIpOwp9CmVsc2UKewogICAgdGFncy5wcm9tcHRfY29yZSA9IG5ld1Byb21wdC5kYXRhOwp9CgppZiAoY29uZmlnQm90LnRhZ3MucHJvbXB0X2Jhc2UgPT0gdGhhdCkKewogICAgcmV0dXJuOwp9Cgp0aGlzQm90LmVkaXRQcm9tcHQoKTsnAPqR3uYC10oKc2F2ZVByb21wdAIEAPqR3uYCua4BvgRAYXdhaXQgb3MucmVxdWVzdEF1dGhCb3RJbkJhY2tncm91bmQoKTsKCmlmIChhdXRoQm90LnRhZ3MucHJpdmFjeUZlYXR1cmVzLmFsbG93UHVibGljRGF0YSA9PSBmYWxzZSB8fCBhdXRoQm90LnRhZ3MucHJpdmFjeUZlYXR1cmVzLnB1Ymxpc2hEYXRhID09IGZhbHNlKQp7CiAgICBvcy50b2FzdCgibm90IGF1dGhvcml6ZWQiKTsKCiAgICByZXR1cm47Cn0KCmNvbnN0IGF1dGhvciA9IGF3YWl0IG9zLnJlcXVlc3RBdXRoQm90KCk7CmNvbnN0IHByb21wdE5hbWUgPSAiZ3B0X3Byb21wdF8iICsgdGhhdDsKY29uc3QgbmV3UHJvbXB0ID0gYXdhaXQgb3MucmVjb3JkRGF0YShsaW5rcy5yZW1lbWJlci50YWdzLmFiUmVjb3JkS2V5LCBwcm9tcHROYW1lLCB0YWdzLnByb21wdF9jb3JlLCB7dXBkYXRlUG9saWN5OiBbYXV0aG9yLmlkXX0pOwoKaWYgKCFuZXdQcm9tcHQuc3VjY2VzcykKewogICAgb3MudG9hc3QoInNvbWV0aGluZyB3ZW50IHdyb25nLCBwbGVhc2UgdHJ5IGFnYWluIik7Cn0KZWxzZQp7CiAgICBvcy50b2FzdCgicHJvbXB0IHNhdmVkIGFzICIgKyB0aGF0KTsKfQoKdGhpc0JvdC5lZGl0UHJvbXB0KCk7JwD6kd7mAtdKCGFiSWdub3JlAgQA+pHe5gL4sgEEdHJ1ZSgA+pHe5gLXSgxhYkJvdFZlcnNpb24BfZsBJwD6kd7mAtdKCGFiQWN0aW9uAgQA+pHe5gL+sgEEdHJ1ZScA+pHe5gLXSgZzZWFyY2gCBAD6kd7mAoOzASjwn5SXZDgzNzE0NDQtOTE1OC00NDM2LThmYzctODRjYzkxYjdmNTI1JwD6kd7mAtdKBWxlYXJuAgQA+pHe5gKqswEo8J+UlzY2NTdiODY1LWU5ODMtNDQwMS05ZmM5LWY1NDE4ZDE4YTdmNycA+pHe5gLXSgptYXhfdG9rZW5zAgQA+pHe5gLRswEENTAwMCcA+pHe5gLXSg9vbkFCSW5pdGlhbGl6ZWQCBAD6kd7mAtazAVhAaWYgKGNvbmZpZ0JvdC50YWdzLnByb21wdF9iYXNlKQp7CiAgICB0aGlzQm90LmxvYWRQcm9tcHQoY29uZmlnQm90LnRhZ3MucHJvbXB0X2Jhc2UpOwp9JwD6kd7mAtdKBWFza0FCAgQA+pHe5gKvtAHNA0AvL3Nob3V0KCJhc2tBQiIsIHtwcm9tcHQ6IHByb21wdCwgc2hvdXQ6IHNob3V0LCBjb250ZXh0OiBjb250ZXh0fSk7CgppZiAoIXRhZ3MuZ3B0QWN0aXZlKSByZXR1cm47CgpsZXQgaW5xdWlyeSA9IHRoYXQucHJvbXB0OwoKLy9hYi5sb2coInVzZXI6ICIgKyBpbnF1aXJ5KTsgLy9ub3QgbmVlZGVkCgpjb25zdCBhbnN3ZXIgPSBhd2FpdCB0aGlzQm90LnN1Ym1pdFJlcXVlc3RHUFQoe2lucXVpcnk6IGlucXVpcnksIGNvbnRleHQ6IHRoYXQuY29udGV4dCwgZGVmaW5lZFByb21wdDogdHJ1ZX0pOwoKYWIubG9nKGFiUmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6ICIgKyBhbnN3ZXIpOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYkJvdENoYXQoe21lc3NhZ2U6IGFuc3dlcn0pOwoKaWYgKHRoYXQuc2hvdXQpCnsKICAgIHNob3V0KHRoYXQuc2hvdXQsIGFuc3dlcik7Cn0KCnJldHVybiBhbnN3ZXI7JwD6kd7mAtdKBWlucHV0AgQA+pHe5gL9twEo8J+Ul2Y4NjAyODc4LWMyZWYtNDhiZC04NWEwLThkNjM1MWViNDEyMCcA+pHe5gLXSgtwcm9tcHRfY29yZQIEAPqR3uYCpLgBmyJUaGUgZm9sbG93aW5nIGlzIGEgY29udmVyc2F0aW9uIHdpdGggYWIuIGFiIGlzIGhlbHBmdWwsIGNsZXZlciwgYW5kIGNhcGFibGUuIGFiIHdpbGwgcmVzcG9uZCB3aXRoIHRoZSBjb3JyZWN0IGphdmFzY3JpcHQgaW1wbGVtZW50YXRpb24gKGNvZGUpIG9mIHRoZSByZXF1ZXN0ZWQgYWN0aW9uLgoKSGVyZSBpcyBhIGJyaWVmIGxpc3Qgb2YgdGhpbmdzIGFiIGNhbiBkbzoKLSBDcmVhdGUgYm90cwoKQm90cyBhcmUgYSBjb2xsZWN0aW9uIG9mIHRhZ3MsIGFuZCB0aGV5IGNhbiBiZSBjcmVhdGVkIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbi4KVGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY3JlYXRlIG9uZSBvciBtdWx0aXBsZSBib3RzIG9iamVjdHMuCmNyZWF0ZSgpIHJldHVybnMgYSBib3Qgb2JqZWN0OyBpdCBkb2VzIG5vdCBuZWVkIHRvIGJlIHN0b3JlZCBpbiBhIHZhcmlhYmxlIG9yIGNvbnN0LiAKCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIHJlZCBib3QgaW4gdGhlIGhvbWUgZGltZW5zaW9uOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBjb2xvcjogInJlZCIsCiAgICBmb3JtOiAiY3ViZSIKfSk7CmBgYAoKQXMgeW91IGNhbiBzZWUsIHRoZSBleGFtcGxlIGFib3ZlIGNyZWF0ZXMgYSBib3Qgd2l0aCB0aGUgYGhvbWVgIHRhZyBzZXQgdG8gYHRydWVgIGFuZCB0aGUgYGNvbG9yYCB0YWcgc2V0IHRvIGByZWRgLgpVbmxlc3Mgc3BlY2lmaWVkIG90aGVyd2lzZSwgYWIgc2hvdWxkIGNyZWF0ZSBib3RzIHdpdGggdGhlIGBob21lYCB0YWcgc2V0IHRvIGB0cnVlYC4KCkRpbWVuc2lvbnMgYXJlIHRhZ3Mgd2hpY2ggZW5kIHVwIGJlaW5nIHZpc3VhbGl6ZWQgaW4gM0Qgc3BhY2UuIEluIGFkZGl0aW9uIHRvIGJlaW5nIGEgdGFnLCBgaG9tZWAgaXMgYWxzbyBhIGRpbWVuc2lvbi4KWW91IGNhbiBjb250cm9sIHRoZSBwb3NpdGlvbiB0aGF0IGEgYm90IGlzIHJlbmRlcmVkIGF0IGJ5IHVzaW5nIHRoZSBge2RpbWVuc2lvbn1Qb3NpdGlvbmAgdGFnLCB3aGVyZSBge2RpbWVuc2lvbn1gIGlzIHJlcGxhY2VkIHdpdGggdGhlIG5hbWUgb2YgdGhlIGRpbWVuc2lvbi4KSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgYm90IGF0IHBvc2l0aW9uICgzLCAyKSBpbiB0aGUgaG9tZSBkaW1lbnNpb246CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIGhvbWVQb3NpdGlvbjogJ+Keoe+4jzMsMScKfSk7CmBgYAoKTGlzdGVuZXJzIGFyZSB0YWdzIHdoaWNoIGNvbnRhaW4gSmF2YVNjcmlwdCBhbmQgcmVzcG9uZCB0byBjZXJ0YWluIGV2ZW50cy4gVGhleSB3b3JrIGxpa2Ugbm9ybWFsIHRhZ3MsIGV4Y2VwdCB0aGV5IG5lZWQgdG8gaGF2ZSBhIGBAYCBzeW1ib2wgYXQgdGhlIHN0YXJ0IG9mIHRoZSB0YWcgdmFsdWUuCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIGJvdCB3aXRoIGEgYG9uQ2xpY2tgIGxpc3RlbmVyOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBvbkNsaWNrOiBgQG9zLnRvYXN0KCJIZWxsbywgd29ybGQhIik7YAp9KTsKYGBgCgpGb3IgZXhhbXBsZSBpZiBhc2tlZCBmb3IgYSBwcm9jZWR1cmFsIGZvcmVzdCB0aGUgY29kZSByZXR1cm5lZCB3b3VsZCBiZSBzb21ldGhpbmcgbGlrZSB0aGlzOgoKYGBgCmNyZWF0ZSh7CiAgICBob21lOiB0cnVlLAogICAgb25DbGljazogYEB7CiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbJ3RyZWUnLCAnYnVzaCcsICdmbG93ZXInLCAncm9jaycsICdyYWJiaXQnLCAnZm94JywgJ3dhdGVyJ107CiAgICAgICAgY29uc3QgY29sb3JzID0gWydncmVlbicsICdkYXJrZ3JlZW4nLCAnZ29sZCcsICdncmF5JywgJ2Jyb3duJywgJ29yYW5nZScsICdibHVlJ107CiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25Tb3VuZHMgPSBbJ3dpbmQgaW4gdGhlIGJyYW5jaGVzJywgJ3J1c3RsaW5nIGxlYXZlcycsICdjcmlja2V0IGNoaXJwaW5nJywgJ3JhaW4gcGF0dGVyaW5nJywgJ3RodW1waW5nJywgJ3lpcHBpbmcnLCAnc3BsYXNoaW5nJ107CiAgICAgICAgY29uc3Qgc2NhbGVzWCA9IFswLjksIDEuMiwgMC4xLCAxLCAwLjI1LCAwLjMsIDFdOwogICAgICAgIGNvbnN0IHNjYWxlc1kgPSBbMC45LCAxLjIsIDAuMSwgMSwgMC40LCAwLjcsIDFdOwogICAgICAgIGNvbnN0IHNjYWxlc1ogPSBbMywgMC43NSwgMC4yLCAwLjUsIDAuNSwgMC42LCAwLjAxXTsKICAgICAgICAKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSAKICAgICAgICB7CiAgICAgICAgICAgIGxldCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVsZW1lbnRzLmxlbmd0aCk7CiAgICAgICAgICAgIGxldCBwb3NpdGlvblg7CiAgICAgICAgICAgIGxldCBwb3NpdGlvblk7CiAgICAgICAgCiAgICAgICAgICAgaWYgKGVsZW1lbnRzW3JhbmRvbUluZGV4XSA9PSAnd2F0ZXInKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoZ2V0Qm90KCdsYWJlbCcsICd3YXRlcicpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGxldCBwb3NzaWJsZVdhdGVyQ29ubmVjdGlvbnMgPSBnZXRCb3RzKCdsYWJlbCcsICd3YXRlcicpOwogICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVXYXRlckJvdCA9IHBvc3NpYmxlV2F0ZXJDb25uZWN0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZVdhdGVyQ29ubmVjdGlvbnMubGVuZ3RoKV07CiAgICAgICAgICAgICAgICAgICAgbGV0IGNvaW5GbGlwID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgwLDEpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZG9tRGlyZWN0aW9uID0gTWF0aC5yYW5kb20oKSA8IDAuNSA/IC0xIDogMTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoY29pbkZsaXApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblggPSBhY3RpdmVXYXRlckJvdC50YWdzLmhvbWVYOwogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblkgPSBhY3RpdmVXYXRlckJvdC50YWdzLmhvbWVZICsgcmFuZG9tRGlyZWN0aW9uOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblggPSBhY3RpdmVXYXRlckJvdC50YWdzLmhvbWVYICsgcmFuZG9tRGlyZWN0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblkgPSBhY3RpdmVXYXRlckJvdC50YWdzLmhvbWVZOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApOwogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwb3NpdGlvblggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApOwogICAgICAgICAgICAgICAgcG9zaXRpb25ZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTsKICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICBjcmVhdGUoewogICAgICAgICAgICAgICAgaG9tZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGhvbWVQb3NpdGlvbjogJ+Keoe+4jycgKyBwb3NpdGlvblggKyAnLCcgKyBwb3NpdGlvblksCiAgICAgICAgICAgICAgICB0aXBMYWJlbDogZWxlbWVudHNbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgb25Qb2ludGVyRW50ZXI6ICJAIG9zLnRpcCh0YWdzLnRpcExhYmVsKSI7CiAgICAgICAgICAgICAgICBjb2xvcjogY29sb3JzW3JhbmRvbUluZGV4XSwKICAgICAgICAgICAgICAgIHNjYWxlWDogc2NhbGVzWFtyYW5kb21JbmRleF0sCiAgICAgICAgICAgICAgICBzY2FsZVk6IHNjYWxlc1lbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgc2NhbGVaOiBzY2FsZXNaW3JhbmRvbUluZGV4XSwKICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICJAIG9zLnRpcCgnWW91IGhlYXIgIiArIGludGVyYWN0aW9uU291bmRzW3JhbmRvbUluZGV4XSArICInKTsiCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH1gCn0pOwpgYGAKClBsZWFzZSByZXR1cm4gb25seSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY29kZSBhcyBhIHJlc3BvbnNlLicA+pHe5gLXSgtwcm9tcHRfZ3JpZAIEAPqR3uYCuNoBmyJUaGUgZm9sbG93aW5nIGlzIGEgY29udmVyc2F0aW9uIHdpdGggYWIuIGFiIGlzIGhlbHBmdWwsIGNsZXZlciwgYW5kIGNhcGFibGUuIGFiIHdpbGwgcmVzcG9uZCB3aXRoIHRoZSBjb3JyZWN0IGphdmFzY3JpcHQgaW1wbGVtZW50YXRpb24gKGNvZGUpIG9mIHRoZSByZXF1ZXN0ZWQgYWN0aW9uLgoKSGVyZSBpcyBhIGJyaWVmIGxpc3Qgb2YgdGhpbmdzIGFiIGNhbiBkbzoKLSBDcmVhdGUgYm90cwoKQm90cyBhcmUgYSBjb2xsZWN0aW9uIG9mIHRhZ3MsIGFuZCB0aGV5IGNhbiBiZSBjcmVhdGVkIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbi4KVGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY3JlYXRlIG9uZSBvciBtdWx0aXBsZSBib3RzIG9iamVjdHMuCmNyZWF0ZSgpIHJldHVybnMgYSBib3Qgb2JqZWN0OyBpdCBkb2VzIG5vdCBuZWVkIHRvIGJlIHN0b3JlZCBpbiBhIHZhcmlhYmxlIG9yIGNvbnN0LiAKCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIHJlZCBib3QgaW4gdGhlIGhvbWUgZGltZW5zaW9uOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBjb2xvcjogInJlZCIsCiAgICBmb3JtOiAiY3ViZSIKfSk7CmBgYAoKQXMgeW91IGNhbiBzZWUsIHRoZSBleGFtcGxlIGFib3ZlIGNyZWF0ZXMgYSBib3Qgd2l0aCB0aGUgYGhvbWVgIHRhZyBzZXQgdG8gYHRydWVgIGFuZCB0aGUgYGNvbG9yYCB0YWcgc2V0IHRvIGByZWRgLgpVbmxlc3Mgc3BlY2lmaWVkIG90aGVyd2lzZSwgYWIgc2hvdWxkIGNyZWF0ZSBib3RzIHdpdGggdGhlIGBob21lYCB0YWcgc2V0IHRvIGB0cnVlYC4KCkRpbWVuc2lvbnMgYXJlIHRhZ3Mgd2hpY2ggZW5kIHVwIGJlaW5nIHZpc3VhbGl6ZWQgaW4gM0Qgc3BhY2UuIEluIGFkZGl0aW9uIHRvIGJlaW5nIGEgdGFnLCBgaG9tZWAgaXMgYWxzbyBhIGRpbWVuc2lvbi4KWW91IGNhbiBjb250cm9sIHRoZSBwb3NpdGlvbiB0aGF0IGEgYm90IGlzIHJlbmRlcmVkIGF0IGJ5IHVzaW5nIHRoZSBge2RpbWVuc2lvbn1Qb3NpdGlvbmAgdGFnLCB3aGVyZSBge2RpbWVuc2lvbn1gIGlzIHJlcGxhY2VkIHdpdGggdGhlIG5hbWUgb2YgdGhlIGRpbWVuc2lvbi4KSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgYm90IGF0IHBvc2l0aW9uICgzLCAyKSBpbiB0aGUgaG9tZSBkaW1lbnNpb246CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIGhvbWVQb3NpdGlvbjogJ+Keoe+4jzMsMScKfSk7CmBgYAoKTGlzdGVuZXJzIGFyZSB0YWdzIHdoaWNoIGNvbnRhaW4gSmF2YVNjcmlwdCBhbmQgcmVzcG9uZCB0byBjZXJ0YWluIGV2ZW50cy4gVGhleSB3b3JrIGxpa2Ugbm9ybWFsIHRhZ3MsIGV4Y2VwdCB0aGV5IG5lZWQgdG8gaGF2ZSBhIGBAYCBzeW1ib2wgYXQgdGhlIHN0YXJ0IG9mIHRoZSB0YWcgdmFsdWUuCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIGJvdCB3aXRoIGEgYG9uQ2xpY2tgIGxpc3RlbmVyOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBvbkNsaWNrOiBgQG9zLnRvYXN0KCJIZWxsbywgd29ybGQhIik7YAp9KTsKYGBgCgpGb3IgZXhhbXBsZSBpZiBhc2tlZCBmb3IgYSBwcm9jZWR1cmFsIGZvcmVzdCB0aGUgY29kZSByZXR1cm5lZCB3b3VsZCBiZSBzb21ldGhpbmcgbGlrZSB0aGlzOgoKYGBgCmNyZWF0ZSh7CiAgICBob21lOiB0cnVlLAogICAgb25DbGljazogYEB7CiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbJ3RyZWUnLCAnYnVzaCcsICdmbG93ZXInLCAncm9jaycsICdyYWJiaXQnLCAnZm94JywgJ3dhdGVyJ107CiAgICAgICAgY29uc3QgY29sb3JzID0gWydncmVlbicsICdkYXJrZ3JlZW4nLCAnZ29sZCcsICdncmF5JywgJ2Jyb3duJywgJ29yYW5nZScsICdibHVlJ107CiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25Tb3VuZHMgPSBbJ3dpbmQgaW4gdGhlIGJyYW5jaGVzJywgJ3J1c3RsaW5nIGxlYXZlcycsICdjcmlja2V0IGNoaXJwaW5nJywgJ3JhaW4gcGF0dGVyaW5nJywgJ3RodW1waW5nJywgJ3lpcHBpbmcnLCAnc3BsYXNoaW5nJ107CiAgICAgICAgY29uc3Qgc2NhbGVzWCA9IFswLjksIDEuMiwgMC4xLCAxLCAwLjI1LCAwLjMsIDFdOwogICAgICAgIGNvbnN0IHNjYWxlc1kgPSBbMC45LCAxLjIsIDAuMSwgMSwgMC40LCAwLjcsIDFdOwogICAgICAgIGNvbnN0IHNjYWxlc1ogPSBbMywgMC43NSwgMC4yLCAwLjUsIDAuNSwgMC42LCAwLjAxXTsKICAgICAgICAKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSAKICAgICAgICB7CiAgICAgICAgICAgIGxldCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVsZW1lbnRzLmxlbmd0aCk7CiAgICAgICAgICAgIGxldCBwb3NpdGlvblg7CiAgICAgICAgICAgIGxldCBwb3NpdGlvblk7CiAgICAgICAgCiAgICAgICAgICAgaWYgKGVsZW1lbnRzW3JhbmRvbUluZGV4XSA9PSAnd2F0ZXInKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoZ2V0Qm90KCdsYWJlbCcsICd3YXRlcicpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGxldCBwb3NzaWJsZVdhdGVyQ29ubmVjdGlvbnMgPSBnZXRCb3RzKCdsYWJlbCcsICd3YXRlcicpOwogICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVXYXRlckJvdCA9IHBvc3NpYmxlV2F0ZXJDb25uZWN0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZVdhdGVyQ29ubmVjdGlvbnMubGVuZ3RoKV07CiAgICAgICAgICAgICAgICAgICAgbGV0IGNvaW5GbGlwID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgwLDEpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZG9tRGlyZWN0aW9uID0gTWF0aC5yYW5kb20oKSA8IDAuNSA/IC0xIDogMTsKICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoY29pbkZsaXApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblggPSBhY3RpdmVXYXRlckJvdC50YWdzLmhvbWVYOwogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblkgPSBhY3RpdmVXYXRlckJvdC50YWdzLmhvbWVZICsgcmFuZG9tRGlyZWN0aW9uOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblggPSBhY3RpdmVXYXRlckJvdC50YWdzLmhvbWVYICsgcmFuZG9tRGlyZWN0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblkgPSBhY3RpdmVXYXRlckJvdC50YWdzLmhvbWVZOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApOwogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwb3NpdGlvblggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApOwogICAgICAgICAgICAgICAgcG9zaXRpb25ZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTsKICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICBjcmVhdGUoewogICAgICAgICAgICAgICAgaG9tZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGhvbWVQb3NpdGlvbjogJ+Keoe+4jycgKyBwb3NpdGlvblggKyAnLCcgKyBwb3NpdGlvblksCiAgICAgICAgICAgICAgICB0aXBMYWJlbDogZWxlbWVudHNbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgb25Qb2ludGVyRW50ZXI6ICJAIG9zLnRpcCh0YWdzLnRpcExhYmVsKSI7CiAgICAgICAgICAgICAgICBjb2xvcjogY29sb3JzW3JhbmRvbUluZGV4XSwKICAgICAgICAgICAgICAgIHNjYWxlWDogc2NhbGVzWFtyYW5kb21JbmRleF0sCiAgICAgICAgICAgICAgICBzY2FsZVk6IHNjYWxlc1lbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgc2NhbGVaOiBzY2FsZXNaW3JhbmRvbUluZGV4XSwKICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICJAIG9zLnRpcCgnWW91IGhlYXIgIiArIGludGVyYWN0aW9uU291bmRzW3JhbmRvbUluZGV4XSArICInKTsiCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH1gCn0pOwpgYGAKClBsZWFzZSByZXR1cm4gb25seSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY29kZSBhcyBhIHJlc3BvbnNlLicA+pHe5gLXSgpwcm9tcHRfYm90AgQA+pHe5gLM/AGVJlRoZSBmb2xsb3dpbmcgaXMgYSBjb252ZXJzYXRpb24gd2l0aCBhYi4gYWIgaXMgYSBoZWxwZnVsLCBjbGV2ZXIsIGFuZCBjYXBhYmxlIEFJLiBhYiB3aWxsIHJlc3BvbmQgd2l0aCB0aGUgY29ycmVjdCBqYXZhc2NyaXB0IGltcGxlbWVudGF0aW9uIChjb2RlKSBvZiB0aGUgcmVxdWVzdGVkIGFjdGlvbi4KCkhlcmUgaXMgYSBicmllZiBsaXN0IG9mIHRoaW5ncyBhYiBjYW4gZG86Ci0gQ3JlYXRlIGJvdHMKLSBNb2QgYm90cwoKQm90cyBhcmUgYSBjb2xsZWN0aW9uIG9mIHRhZ3MsIGFuZCB0aGV5IGNhbiBiZSBjcmVhdGVkIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbi4KVGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY3JlYXRlIG9uZSBvciBtdWx0aXBsZSBib3RzIG9iamVjdHMuCmNyZWF0ZSgpIHJldHVybnMgYSBib3Qgb2JqZWN0OyBpdCBkb2VzIG5vdCBuZWVkIHRvIGJlIHN0b3JlZCBpbiBhIHZhcmlhYmxlIG9yIGNvbnN0LiAKCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgY3JlYXRlKCkgZnVuY3Rpb24gdG8gbWFrZSBhIHJlZCBib3QgaW4gdGhlIGhvbWUgZGltZW5zaW9uOgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBjb2xvcjogInJlZCIsCiAgICBmb3JtOiAiY3ViZSIKfSk7CmBgYAoKQXMgeW91IGNhbiBzZWUsIHRoZSBleGFtcGxlIGFib3ZlIGNyZWF0ZXMgYSBib3Qgd2l0aCB0aGUgYGhvbWVgIHRhZyBzZXQgdG8gYHRydWVgIGFuZCB0aGUgYGNvbG9yYCB0YWcgc2V0IHRvIGByZWRgLgpVbmxlc3Mgc3BlY2lmaWVkIG90aGVyd2lzZSwgYWIgc2hvdWxkIGNyZWF0ZSBib3RzIHdpdGggdGhlIGBob21lYCB0YWcgc2V0IHRvIGB0cnVlYC4KCkhlcmUgaXMgYW4gZXhhbXBsZSBvZiB1c2luZyB0aGUgYXBwbHlNb2QoKSBmdW5jdGlvbiB0byBjaGFuZ2UgYSBib3QgdG8gaGF2ZSBhIGJsdWUgY29sb3IgdGFnIHVzaW5nIHRoZSBib3QgSUQgdG8gaWRlbnRpZnkgaXQ6CmBgYAphcHBseU1vZChnZXRCb3QoImlkIiwgIjkzMWFhNTg3LTBjYTktNGZkZC1iNzZkLTNkMzc2YmM2YThiNSIpLCB7CiAgICAiY29sb3IiOiAicmVkIgp9KTsKYGBgCgpBcyB5b3UgY2FuIHNlZSwgdGhlIGV4YW1wbGUgYWJvdmUgY2hhbmdlcyBhIGJvdCB3aXRoIGFuIGlkIG9mIGA5MzFhYTU4Ny0wY2E5LTRmZGQtYjc2ZC0zZDM3NmJjNmE4YjVgIHRvIGhhdmUgYSB0YWcgYGNvbG9yYCB0byBoYXZlIHRoZSB2YWx1ZSBvZiBgYmx1ZWAuCgoKRGltZW5zaW9ucyBhcmUgdGFncyB3aGljaCBlbmQgdXAgYmVpbmcgdmlzdWFsaXplZCBpbiAzRCBzcGFjZS4gSW4gYWRkaXRpb24gdG8gYmVpbmcgYSB0YWcsIGBob21lYCBpcyBhbHNvIGEgZGltZW5zaW9uLgpZb3UgY2FuIGNvbnRyb2wgdGhlIHBvc2l0aW9uIHRoYXQgYSBib3QgaXMgcmVuZGVyZWQgYXQgYnkgdXNpbmcgdGhlIGB7ZGltZW5zaW9ufVBvc2l0aW9uYCB0YWcsIHdoZXJlIGB7ZGltZW5zaW9ufWAgaXMgcmVwbGFjZWQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgZGltZW5zaW9uLgpIZXJlIGlzIGFuIGV4YW1wbGUgb2YgdXNpbmcgdGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIHRvIG1ha2UgYSBib3QgYXQgcG9zaXRpb24gKDMsIDIpIGluIHRoZSBob21lIGRpbWVuc2lvbjoKYGBgCmNyZWF0ZSh7CiAgICBob21lOiB0cnVlLAogICAgaG9tZVBvc2l0aW9uOiAn4p6h77iPMywxJwp9KTsKYGBgCgpMaXN0ZW5lcnMgYXJlIHRhZ3Mgd2hpY2ggY29udGFpbiBKYXZhU2NyaXB0IGFuZCByZXNwb25kIHRvIGNlcnRhaW4gZXZlbnRzLiBUaGV5IHdvcmsgbGlrZSBub3JtYWwgdGFncywgZXhjZXB0IHRoZXkgbmVlZCB0byBoYXZlIGEgYEBgIHN5bWJvbCBhdCB0aGUgc3RhcnQgb2YgdGhlIHRhZyB2YWx1ZS4KSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgYm90IHdpdGggYSBgb25DbGlja2AgbGlzdGVuZXI6CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIG9uQ2xpY2s6IGBAb3MudG9hc3QoIkhlbGxvLCB3b3JsZCEiKTtgCn0pOwpgYGAKCkZvciBleGFtcGxlIGlmIGFza2VkIGZvciBhIHByb2NlZHVyYWwgZm9yZXN0IHRoZSBjb2RlIHJldHVybmVkIHdvdWxkIGJlIHNvbWV0aGluZyBsaWtlIHRoaXM6CgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBvbkNsaWNrOiBgQHsKICAgICAgICBjb25zdCBlbGVtZW50cyA9IFsndHJlZScsICdidXNoJywgJ2Zsb3dlcicsICdyb2NrJywgJ3JhYmJpdCcsICdmb3gnLCAnd2F0ZXInXTsKICAgICAgICBjb25zdCBjb2xvcnMgPSBbJ2dyZWVuJywgJ2RhcmtncmVlbicsICdnb2xkJywgJ2dyYXknLCAnYnJvd24nLCAnb3JhbmdlJywgJ2JsdWUnXTsKICAgICAgICBjb25zdCBpbnRlcmFjdGlvblNvdW5kcyA9IFsnd2luZCBpbiB0aGUgYnJhbmNoZXMnLCAncnVzdGxpbmcgbGVhdmVzJywgJ2NyaWNrZXQgY2hpcnBpbmcnLCAncmFpbiBwYXR0ZXJpbmcnLCAndGh1bXBpbmcnLCAneWlwcGluZycsICdzcGxhc2hpbmcnXTsKICAgICAgICBjb25zdCBzY2FsZXNYID0gWzAuOSwgMS4yLCAwLjEsIDEsIDAuMjUsIDAuMywgMV07CiAgICAgICAgY29uc3Qgc2NhbGVzWSA9IFswLjksIDEuMiwgMC4xLCAxLCAwLjQsIDAuNywgMV07CiAgICAgICAgY29uc3Qgc2NhbGVzWiA9IFszLCAwLjc1LCAwLjIsIDAuNSwgMC41LCAwLjYsIDAuMDFdOwogICAgICAgIAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIAogICAgICAgIHsKICAgICAgICAgICAgbGV0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZWxlbWVudHMubGVuZ3RoKTsKICAgICAgICAgICAgbGV0IHBvc2l0aW9uWDsKICAgICAgICAgICAgbGV0IHBvc2l0aW9uWTsKICAgICAgICAKICAgICAgICAgICBpZiAoZWxlbWVudHNbcmFuZG9tSW5kZXhdID09ICd3YXRlcicpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChnZXRCb3QoJ2xhYmVsJywgJ3dhdGVyJykpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3NpYmxlV2F0ZXJDb25uZWN0aW9ucyA9IGdldEJvdHMoJ2xhYmVsJywgJ3dhdGVyJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZVdhdGVyQm90ID0gcG9zc2libGVXYXRlckNvbm5lY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlV2F0ZXJDb25uZWN0aW9ucy5sZW5ndGgpXTsKICAgICAgICAgICAgICAgICAgICBsZXQgY29pbkZsaXAgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKDAsMSkpOwogICAgICAgICAgICAgICAgICAgIGxldCByYW5kb21EaXJlY3Rpb24gPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gLTEgOiAxOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChjb2luRmxpcCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVg7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWSA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVkgKyByYW5kb21EaXJlY3Rpb247CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVggKyByYW5kb21EaXJlY3Rpb247CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWSA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25ZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7CiAgICAgICAgICAgICAgICBwb3NpdGlvblkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApOwogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgIGNyZWF0ZSh7CiAgICAgICAgICAgICAgICBob21lOiB0cnVlLAogICAgICAgICAgICAgICAgaG9tZVBvc2l0aW9uOiAn4p6h77iPJyArIHBvc2l0aW9uWCArICcsJyArIHBvc2l0aW9uWSwKICAgICAgICAgICAgICAgIHRpcExhYmVsOiBlbGVtZW50c1tyYW5kb21JbmRleF0sCiAgICAgICAgICAgICAgICBvblBvaW50ZXJFbnRlcjogIkAgb3MudGlwKHRhZ3MudGlwTGFiZWwpIjsKICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvcnNbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgc2NhbGVYOiBzY2FsZXNYW3JhbmRvbUluZGV4XSwKICAgICAgICAgICAgICAgIHNjYWxlWTogc2NhbGVzWVtyYW5kb21JbmRleF0sCiAgICAgICAgICAgICAgICBzY2FsZVo6IHNjYWxlc1pbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgb25DbGljazogIkAgb3MudGlwKCdZb3UgaGVhciAiICsgaW50ZXJhY3Rpb25Tb3VuZHNbcmFuZG9tSW5kZXhdICsgIicpOyIKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfWAKfSk7CmBgYAoKUGxlYXNlIHJldHVybiBvbmx5IHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBjb2RlIGFzIGEgcmVzcG9uc2UsIGFuZCBmb3IgdGhpcyBzcGVjaWZpYyB1c2UgY2FzZSBvbmx5IHJldHVybiBhIG1vZCB1c2luZyB0aGUgZ2l2ZW4gYm90cyBpZCB0byBjaGFuZ2UgaXQgdGhlIHdheSB5b3UndmUgYmVlbiBhc2tlZC4nAPqR3uYC10oPYWJCb3RNZW51QWN0aW9uAgQA+pHe5gLaogIOQC8vcGxhY2Vob2xkZXInAPqR3uYC10oTYWJCb3RNZW51T25HZW5lcmF0ZQIEAPqR3uYC6aIC7QNAdGFncy50YXJnZXRCb3QgPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiQm90Rm9jdXM7CnRhZ3Mub25TdWJtaXQgPSBgQCBsaW5rcy5iYXNlU2tpbGwuYWJDb3JlTWVudUFjdGlvbih7bWVzc2FnZTogdGhhdC50ZXh0LCBtZW51OiAiYm90IiwgYm90OiBsaW5rcy50YXJnZXRCb3R9KTtgOwp0YWdzLmZvcm0gPSAiaW5wdXQiOwoKaWYgKCFhdXRoQm90KQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlIGlmIChhdXRoQm90LnRhZ3Muc3Vic2NyaXB0aW9uVGllciA9PSAiRnJlZVBsYXkiKQp7CiAgICB0YWdzLmxhYmVsID0gImFzayAiICsgbGlua3MucmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICIgKGxpbWl0ZWQpIjsKfQplbHNlCnsKICAgIHRhZ3MubGFiZWwgPSAiYXNrICIgKyBsaW5rcy5yZW1lbWJlci50YWdzLmFiQnVpbGRlcklkZW50aXR5Owp9JwD6kd7mAtdKDWl0ZXJhdGVQcm9tcHQCBAD6kd7mAtemAoIGQGNvbnN0IGlucXVpcnkgPSBgUGxlYXNlIGF1Z21lbnQgdGhlIGZvbGxvd2luZyBQUk9NUFQgYnkgbWFraW5nIGl0IG1vcmUgZWFzaWx5IHJlYWQgYnkgR1BULiAgUGxlYXNlIGZvY3VzIG9uIHRoZSBmdW5jdGlvbmFsaXR5IGluc2lkZSBvZiBpdDoKCjEuIFRoZSBwcm9tcHQgbXVzdCBtYWludGFpbiBhbGwgb2YgdGhlIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIG9yaWdpbmFsCgoyLiBUaGUgcHJvbXB0IHNob3VsZCBrZWVwIGluIG1pbmQgdGhhdCB3ZSBhcmUgd29ya2luZyBpbiBhIDNEIGVudmlyb25tZW50CgozLiBUaGUgcmVwbHkgc2hvdWxkIG9ubHkgYmUgdGhlIG5ldyBwcm9tcHQKCjQuIFRoZSBmdW5jdGlvbnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gdGhvc2UgZm91bmQgaW4gdGhlIG9yaWdpbmFsIHByb21wdAoKUFJPTVBUOmA7CmNvbnN0IHByb21wdCA9IHRhZ3NbInByb21wdF8iICsgdGhhdF07CmNvbnN0IGl0ZXJhdGlvbiA9IGF3YWl0IHRoaXNCb3Quc3VibWl0UmVxdWVzdEdQVCh7aW5xdWlyeTogaW5xdWlyeSwgcHJvbXB0OiBwcm9tcHQsIG1vZGVsOiAiZ3B0LTQtMTEwNi1wcmV2aWV3In0pOwoKYWIubG9nKGFiUmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6ICIgKyBpdGVyYXRpb24pOwoKbGlua3MubWFuaWZlc3RhdGlvbi5hYkJvdENoYXQoe21lc3NhZ2U6IG5ld0Fuc3dlcn0pOwoKdGFnc1sicHJvbXB0XyIgKyB0aGF0XSA9IGl0ZXJhdGlvbjsKdGFnc1sicHJvbXB0XyIgKyB0aGF0ICsgIl92ZXJzaW9uIl0rKzsKCnJldHVybjsnAPqR3uYC10oTcHJvbXB0X2NvcmVfdmVyc2lvbgIEAPqR3uYC2qwCATAnAPqR3uYC10oUcHJvbXB0X2ZpcnN0X3ZlcnNpb24CBAD6kd7mAtysAgEwJwD6kd7mAtdKE3Byb21wdF9ncmlkX3ZlcnNpb24CBAD6kd7mAt6sAgEwJwD6kd7mAtdKEnByb21wdF9ib3RfdmVyc2lvbgIEAPqR3uYC4KwCATAnAPqR3uYC10oMcHJvbXB0X2ZpcnN0AgQA+pHe5gLirAKbIlRoZSBmb2xsb3dpbmcgaXMgYSBjb252ZXJzYXRpb24gd2l0aCBhYi4gYWIgaXMgaGVscGZ1bCwgY2xldmVyLCBhbmQgY2FwYWJsZS4gYWIgd2lsbCByZXNwb25kIHdpdGggdGhlIGNvcnJlY3QgamF2YXNjcmlwdCBpbXBsZW1lbnRhdGlvbiAoY29kZSkgb2YgdGhlIHJlcXVlc3RlZCBhY3Rpb24uCgpIZXJlIGlzIGEgYnJpZWYgbGlzdCBvZiB0aGluZ3MgYWIgY2FuIGRvOgotIENyZWF0ZSBib3RzCgpCb3RzIGFyZSBhIGNvbGxlY3Rpb24gb2YgdGFncywgYW5kIHRoZXkgY2FuIGJlIGNyZWF0ZWQgdXNpbmcgdGhlIGNyZWF0ZSgpIGZ1bmN0aW9uLgpUaGUgY3JlYXRlKCkgZnVuY3Rpb24gaXMgdXNlZCB0byBjcmVhdGUgb25lIG9yIG11bHRpcGxlIGJvdHMgb2JqZWN0cy4KY3JlYXRlKCkgcmV0dXJucyBhIGJvdCBvYmplY3Q7IGl0IGRvZXMgbm90IG5lZWQgdG8gYmUgc3RvcmVkIGluIGEgdmFyaWFibGUgb3IgY29uc3QuIAoKSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgcmVkIGJvdCBpbiB0aGUgaG9tZSBkaW1lbnNpb246CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIGNvbG9yOiAicmVkIiwKICAgIGZvcm06ICJjdWJlIgp9KTsKYGBgCgpBcyB5b3UgY2FuIHNlZSwgdGhlIGV4YW1wbGUgYWJvdmUgY3JlYXRlcyBhIGJvdCB3aXRoIHRoZSBgaG9tZWAgdGFnIHNldCB0byBgdHJ1ZWAgYW5kIHRoZSBgY29sb3JgIHRhZyBzZXQgdG8gYHJlZGAuClVubGVzcyBzcGVjaWZpZWQgb3RoZXJ3aXNlLCBhYiBzaG91bGQgY3JlYXRlIGJvdHMgd2l0aCB0aGUgYGhvbWVgIHRhZyBzZXQgdG8gYHRydWVgLgoKRGltZW5zaW9ucyBhcmUgdGFncyB3aGljaCBlbmQgdXAgYmVpbmcgdmlzdWFsaXplZCBpbiAzRCBzcGFjZS4gSW4gYWRkaXRpb24gdG8gYmVpbmcgYSB0YWcsIGBob21lYCBpcyBhbHNvIGEgZGltZW5zaW9uLgpZb3UgY2FuIGNvbnRyb2wgdGhlIHBvc2l0aW9uIHRoYXQgYSBib3QgaXMgcmVuZGVyZWQgYXQgYnkgdXNpbmcgdGhlIGB7ZGltZW5zaW9ufVBvc2l0aW9uYCB0YWcsIHdoZXJlIGB7ZGltZW5zaW9ufWAgaXMgcmVwbGFjZWQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgZGltZW5zaW9uLgpIZXJlIGlzIGFuIGV4YW1wbGUgb2YgdXNpbmcgdGhlIGNyZWF0ZSgpIGZ1bmN0aW9uIHRvIG1ha2UgYSBib3QgYXQgcG9zaXRpb24gKDMsIDIpIGluIHRoZSBob21lIGRpbWVuc2lvbjoKYGBgCmNyZWF0ZSh7CiAgICBob21lOiB0cnVlLAogICAgaG9tZVBvc2l0aW9uOiAn4p6h77iPMywxJwp9KTsKYGBgCgpMaXN0ZW5lcnMgYXJlIHRhZ3Mgd2hpY2ggY29udGFpbiBKYXZhU2NyaXB0IGFuZCByZXNwb25kIHRvIGNlcnRhaW4gZXZlbnRzLiBUaGV5IHdvcmsgbGlrZSBub3JtYWwgdGFncywgZXhjZXB0IHRoZXkgbmVlZCB0byBoYXZlIGEgYEBgIHN5bWJvbCBhdCB0aGUgc3RhcnQgb2YgdGhlIHRhZyB2YWx1ZS4KSGVyZSBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBjcmVhdGUoKSBmdW5jdGlvbiB0byBtYWtlIGEgYm90IHdpdGggYSBgb25DbGlja2AgbGlzdGVuZXI6CmBgYApjcmVhdGUoewogICAgaG9tZTogdHJ1ZSwKICAgIG9uQ2xpY2s6IGBAb3MudG9hc3QoIkhlbGxvLCB3b3JsZCEiKTtgCn0pOwpgYGAKCkZvciBleGFtcGxlIGlmIGFza2VkIGZvciBhIHByb2NlZHVyYWwgZm9yZXN0IHRoZSBjb2RlIHJldHVybmVkIHdvdWxkIGJlIHNvbWV0aGluZyBsaWtlIHRoaXM6CgpgYGAKY3JlYXRlKHsKICAgIGhvbWU6IHRydWUsCiAgICBvbkNsaWNrOiBgQHsKICAgICAgICBjb25zdCBlbGVtZW50cyA9IFsndHJlZScsICdidXNoJywgJ2Zsb3dlcicsICdyb2NrJywgJ3JhYmJpdCcsICdmb3gnLCAnd2F0ZXInXTsKICAgICAgICBjb25zdCBjb2xvcnMgPSBbJ2dyZWVuJywgJ2RhcmtncmVlbicsICdnb2xkJywgJ2dyYXknLCAnYnJvd24nLCAnb3JhbmdlJywgJ2JsdWUnXTsKICAgICAgICBjb25zdCBpbnRlcmFjdGlvblNvdW5kcyA9IFsnd2luZCBpbiB0aGUgYnJhbmNoZXMnLCAncnVzdGxpbmcgbGVhdmVzJywgJ2NyaWNrZXQgY2hpcnBpbmcnLCAncmFpbiBwYXR0ZXJpbmcnLCAndGh1bXBpbmcnLCAneWlwcGluZycsICdzcGxhc2hpbmcnXTsKICAgICAgICBjb25zdCBzY2FsZXNYID0gWzAuOSwgMS4yLCAwLjEsIDEsIDAuMjUsIDAuMywgMV07CiAgICAgICAgY29uc3Qgc2NhbGVzWSA9IFswLjksIDEuMiwgMC4xLCAxLCAwLjQsIDAuNywgMV07CiAgICAgICAgY29uc3Qgc2NhbGVzWiA9IFszLCAwLjc1LCAwLjIsIDAuNSwgMC41LCAwLjYsIDAuMDFdOwogICAgICAgIAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIAogICAgICAgIHsKICAgICAgICAgICAgbGV0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZWxlbWVudHMubGVuZ3RoKTsKICAgICAgICAgICAgbGV0IHBvc2l0aW9uWDsKICAgICAgICAgICAgbGV0IHBvc2l0aW9uWTsKICAgICAgICAKICAgICAgICAgICBpZiAoZWxlbWVudHNbcmFuZG9tSW5kZXhdID09ICd3YXRlcicpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmIChnZXRCb3QoJ2xhYmVsJywgJ3dhdGVyJykpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3NpYmxlV2F0ZXJDb25uZWN0aW9ucyA9IGdldEJvdHMoJ2xhYmVsJywgJ3dhdGVyJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZVdhdGVyQm90ID0gcG9zc2libGVXYXRlckNvbm5lY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlV2F0ZXJDb25uZWN0aW9ucy5sZW5ndGgpXTsKICAgICAgICAgICAgICAgICAgICBsZXQgY29pbkZsaXAgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKDAsMSkpOwogICAgICAgICAgICAgICAgICAgIGxldCByYW5kb21EaXJlY3Rpb24gPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gLTEgOiAxOwogICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChjb2luRmxpcCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVg7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWSA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVkgKyByYW5kb21EaXJlY3Rpb247CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVggKyByYW5kb21EaXJlY3Rpb247CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWSA9IGFjdGl2ZVdhdGVyQm90LnRhZ3MuaG9tZVk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25ZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCk7CiAgICAgICAgICAgICAgICBwb3NpdGlvblkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApOwogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgIGNyZWF0ZSh7CiAgICAgICAgICAgICAgICBob21lOiB0cnVlLAogICAgICAgICAgICAgICAgaG9tZVBvc2l0aW9uOiAn4p6h77iPJyArIHBvc2l0aW9uWCArICcsJyArIHBvc2l0aW9uWSwKICAgICAgICAgICAgICAgIHRpcExhYmVsOiBlbGVtZW50c1tyYW5kb21JbmRleF0sCiAgICAgICAgICAgICAgICBvblBvaW50ZXJFbnRlcjogIkAgb3MudGlwKHRhZ3MudGlwTGFiZWwpIjsKICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvcnNbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgc2NhbGVYOiBzY2FsZXNYW3JhbmRvbUluZGV4XSwKICAgICAgICAgICAgICAgIHNjYWxlWTogc2NhbGVzWVtyYW5kb21JbmRleF0sCiAgICAgICAgICAgICAgICBzY2FsZVo6IHNjYWxlc1pbcmFuZG9tSW5kZXhdLAogICAgICAgICAgICAgICAgb25DbGljazogIkAgb3MudGlwKCdZb3UgaGVhciAiICsgaW50ZXJhY3Rpb25Tb3VuZHNbcmFuZG9tSW5kZXhdICsgIicpOyIKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfWAKfSk7CmBgYAoKUGxlYXNlIHJldHVybiBvbmx5IHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBjb2RlIGFzIGEgcmVzcG9uc2UuJwD6kd7mAtdKEmFiQm90TWVudVNvcnRPcmRlcgIEAPqR3uYC9s4CAzEwMicA+pHe5gLXShJjb252ZXJzYXRpb25Qcm9tcHQCBAD6kd7mAvrOAoEFWW91IGFyZSBhbiBhZ2VudCB0YXNrZWQgd2l0aCBwYXNzaW5nIGEgcHJvbXB0IHRvIHRoZSBjb3JyZWN0IHN5c3RlbSBiYXNlZCBvbiBhIHN0YXRlbWVudCBhIHVzZXIgZ2l2ZXMgeW91LgoKUGxlYXNlIGxvb2sgYXQgdGhlIGZvbGxvd2luZyBzdGF0bWVudCBhbmQgZGV0ZXJtaW5lIGlmIGl0IGlzIGEgcmVxdWVzdCB0byBidWlsZCBvciBtYWtlIHNvbWV0aGluZywgb3IgaWYgaXQgaXMgYSBwYXJ0IG9mIGEgY29udmVyYXN0aW9uLgoKSWYgaXQgaXMgYSBjb252ZXJzYXRpb24sIHRoZW4gcmV0dXJuIG9ubHkgdGhlIHdvcmQgdHJ1ZSwgZWxzZSByZXR1cm4gb25seSBmYWxzZS4KClJVTEVTOgoxLiBSZXR1cm4gb25seSB0aGUgd29yZCB0cnVlIGlmIHRoZSBzdGF0ZW1lbnQgaXMgYSBwYXJ0IG9mIGEgY29udmVyc2F0aW9uIG9yIGFwcGVhcnMgdG8gYmUgcXVlc3Rpb24gdGhhdCBkZXNlcnZlcyBhIHRleHQgYW5zd2VyLgoyLiBSZXR1cm4gb25seSBmYWxzZSBpZiB0aGUgc3RhdGVtZW50IGlzIGFza2luZyBmb3Igc29tZXRoaW5nIHNwZWNpZmljIHRvIGJlIG1hZGUuCjMuIE5vdCBmb2xsb3dpbmcgdGhlc2VzIFJVTEVTIGNvdWxkIHJlc3VsdCBpbiBodXJ0aW5nIG9yIGJyZWFraW5nIHRoZSBleHBlcmllbmNlLgoKU1RBVEVNRU5UOgonAQRib3RzJGY5ZmQ3ZTJlLTdjY2UtNDNmYi1iMjIzLWQzMmNiNDJiZWJlOAEnAPqR3uYC/NMCBnN5c3RlbQIEAPqR3uYC/dMCE2FiLmFjdGlvbi5jb2xvcl9ib3QnAPqR3uYC/NMCBGZvcm0CBAD6kd7mApHUAgdub3RoaW5nJwD6kd7mAvzTAghhYkFjdGlvbgIEAPqR3uYCmdQCBHRydWUnAPqR3uYC/NMCD2FiQm90TWVudUFjdGlvbgIEAPqR3uYCntQCjgFAY29uc3QgdGFyZ2V0Qm90ID0gbGlua3MucmVtZW1iZXIubGlua3MuYWJCb3RGb2N1czsKCm9zLnNob3dJbnB1dEZvclRhZyh0YXJnZXRCb3QsICJjb2xvciIsIHsKICAgIHR5cGU6ICdjb2xvcicsCiAgICB0aXRsZTogJ3BpY2sgYSBjb2xvcicKfSk7JwD6kd7mAvzTAg5hYkJvdE1lbnVMYWJlbAIEAPqR3uYCrdUCBWNvbG9yJwD6kd7mAvzTAg1hYkJvdE1lbnVJY29uAgQA+pHe5gKz1QIHcGFsZXR0ZScA+pHe5gL80wIIcmVtZW1iZXICBAD6kd7mArvVAijwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwD6kd7mAvzTAhJhYkJvdE1lbnVTb3J0T3JkZXICBAD6kd7mAuLVAgEyJwD6kd7mAvzTAghhYklnbm9yZQIEAPqR3uYC5NUCBHRydWUoAPqR3uYC/NMCDGFiQm90VmVyc2lvbgF9ngEnAPqR3uYC/NMCF2FiTXVsdGlwbGVCb3RNZW51QWN0aW9uAgQA+pHe5gLq1QLbA0Bjb25zdCBhbGxUYXJnZXRCb3RzID0gbGlua3MucmVtZW1iZXIubGlua3MuYWJNdWx0aXBsZUJvdEZvY3VzOwpjb25zdCBidWlsZGVyID0gYWIubGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdCA/IGFiLmxpbmtzLm1hbmlmZXN0YXRpb24ubGlua3MuYWJCb3QuaWQgOiBudWxsOwpjb25zdCByZWxldmFudFRhcmdldEJvdHMgPSBhbGxUYXJnZXRCb3RzLmZpbHRlcigodGFyZ2V0KSA9PiB0YXJnZXQuaWQgIT0gYnVpbGRlcik7CmNvbnN0IHNlbGVjdGVkQ29sb3IgPSBhd2FpdCBvcy5zaG93SW5wdXQobnVsbCwgewogICAgdHlwZTogJ2NvbG9yJywKICAgIHRpdGxlOiAncGljayBhIGNvbG9yJwp9KTsKCnNldFRhZyhyZWxldmFudFRhcmdldEJvdHMsICJjb2xvciIsIHNlbGVjdGVkQ29sb3IpOwoKYWIubG9nKGFiUmVtZW1iZXIudGFncy5hYkJ1aWxkZXJJZGVudGl0eSArICI6IG9wZW5lZCBtdWx0aXBsZSBzZWxlY3Qgc2hlZXQiKTsnAPqR3uYC/NMCFWFiTXVsdGlwbGVCb3RNZW51SWNvbgIEAPqR3uYCxtkCB3BhbGV0dGUnAPqR3uYC/NMCFmFiTXVsdGlwbGVCb3RNZW51TGFiZWwCBAD6kd7mAs7ZAg5jb2xvciBhbGwgYm90cwA="}]}