{"version":2,"updates":[{"id":0,"timestamp":1703268375554,"update":"AbkC4OHmgAkAJwEEYm90cyQxMDE0MjU0Ni04YzM0LTRiZDYtYWQzNi0wYTE0NjE3OTNkMDkBJwDg4eaACQAEYWJJRAIEAODh5oAJARRhYnJ3X3Rlc3RfZXhwZXJpZW5jZScA4OHmgAkAEGVnZ0Zvcm1hdFZlcnNpb24CBADg4eaACRYkMDE3MGQ4YmEtMTdjMC00MmM2LTgwZTktMmIxNWQzY2Q3NWM3KADg4eaACQANdGFyZ2V0VmVyc2lvbgF9AScA4OHmgAkAB21hbmFnZXICBADg4eaACTwo8J+Ul2Q4MzcxNDQ0LTkxNTgtNDQzNi04ZmM3LTg0Y2M5MWI3ZjUyNScA4OHmgAkAB29uQ2xpY2sCBADg4eaACWMlQCBsaW5rcy5tYW5hZ2VyLmludGVyYWN0T3ZvKHRoaXNCb3QpOycA4OHmgAkACG9uQ3JlYXRlAgQA4OHmgAmJAZYEQGNvbnN0IHRhcmdldEFCID0gYXdhaXQgb3Muc2hvd0lucHV0KCdhYicsIHsKICAgIHRpdGxlOiAnYWIgbmFtZScKfSk7CgppZiAoIXRhcmdldEFCIHx8IHRhcmdldEFCID09ICJhYiIpCnsKICAgIG9zLnRvYXN0KCJubyB2YWxpZCBhYiBnaXZlbiIpOwoKICAgIGRlc3Ryb3kodGhpc0JvdCk7CgogICAgcmV0dXJuOwp9CgppZiAoIWF1dGhCb3QudGFncy5wcml2YWN5RmVhdHVyZXMucHVibGlzaERhdGEpCnsKICAgIG9zLnRvYXN0KCJub3QgYXV0aG9yaXplZCIpOwoKICAgIHJldHVybjsKfQoKY29uc3QgZ2V0UmVjb3JkID0gYXdhaXQgb3MuZ2V0RGF0YShsaW5rcy5yZW1lbWJlci50YWdzLmFiUmVjb3JkS2V5LCB0YXJnZXRBQiwgbGlua3MucmVtZW1iZXIudGFncy5hYkVuZHBvaW50KTsKCmlmICghZ2V0UmVjb3JkLnN1Y2Nlc3MpCnsKICAgIG9zLnRvYXN0KCJubyBhYiBmb3VuZCB3aXRoIHRoYXQgbmFtZSIpOwoKICAgIGRlc3Ryb3kodGhpc0JvdCk7CgogICAgcmV0dXJuOwp9CgphcHBseU1vZCh0aGlzQm90LCBnZXRSZWNvcmQuZGF0YSk7JwDg4eaACQAEZm9ybQIEAODh5oAJoAUDZWdnJwDg4eaACQAQcHJvZ3Jlc3NCYXJDb2xvcgIEAODh5oAJpAUHI0JGNUU2NicA4OHmgAkAGnByb2dyZXNzQmFyQmFja2dyb3VuZENvbG9yAgQA4OHmgAmsBQcjNTkyOTg5KADg4eaACQAJbGFiZWxTaXplAXw/AAAAJwDg4eaACQAKbGFiZWxDb2xvcgIEAODh5oAJtQUHIzQwNDA0MCcA4OHmgAkADm9uUG9pbnRlckVudGVyAgQA4OHmgAm9BS9Ab3MudG9hc3QodGFncy5hYklEICsgJyB2Jyt0YWdzLnRhcmdldFZlcnNpb24pOycA4OHmgAkADWxhYmVsUG9zaXRpb24CBADg4eaACe0FBWZyb250JwDg4eaACQAPb3JpZW50YXRpb25Nb2RlAgQA4OHmgAnzBQ5iaWxsYm9hcmRGcm9udCcA4OHmgAkACW9uRGVzdHJveQIEAODh5oAJggYjQGxpbmtzLm1hbmFnZXIubWFza3Mub3ZvQm90ID0gbnVsbDsnAODh5oAJAAlkaW1lbnNpb24CBADg4eaACaYGBGhvbWUnAODh5oAJAAZzeXN0ZW0CBADg4eaACasGDmFiLmZhY3RvcnkuZWdnJwDg4eaACQAJbGlzdGVuaW5nAgQA4OHmgAm6BgVmYWxzZScA4OHmgAkACWFiRmFjdG9yeQIEAODh5oAJwAYEdHJ1ZScA4OHmgAkACGFiSWdub3JlAgQA4OHmgAnFBgR0cnVlJwDg4eaACQAIcmVtZW1iZXICBADg4eaACcoGKPCflJdlNTM4MGE2Yi04YjRkLTRhOGItOGIwNC01OGUxZWIwM2U1ZTcnAODh5oAJAAtmYWN0b3J5SWNvbgIEAODh5oAJ8QYDZWdnJwDg4eaACQAFY29sb3ICBADg4eaACfUGByNGRkZGRkYoAODh5oAJAAxhYkJvdFZlcnNpb24BfRInAODh5oAJAA9hYk1lbnVTb3J0T3JkZXICBADg4eaACf4GATMnAQRib3RzJDE0ZTFmZGFjLWNmZDctNGU3ZS1iZGQxLTk2N2E0MDg1YTc1NQEnAODh5oAJgAcGc3lzdGVtAgQA4OHmgAmBBxJhYi5mYWN0b3J5Lm1hbmFnZXInAODh5oAJgAcEZm9ybQIEAODh5oAJlAcHbm90aGluZycA4OHmgAmABwhhYklnbm9yZQIEAODh5oAJnAcEdHJ1ZScA4OHmgAmABw5hYkFkZFRvRmFjdG9yeQIEAODh5oAJoQeHBkAvL3Nob3V0KCJhYkFkZFRvRmFjdG9yeSIsIHtkaW1lbnNpb246IGRpbWVuc2lvbiwgYm90OiBib3QsIGZhY3RvcnlJRDogZmFjdG9yeUlEfSk7CmxldCBmYWN0b3J5SUQ7CgppZiAodGhhdC5mYWN0b3J5SUQpCnsKICAgIGZhY3RvcnlJRCA9IHRoYXQuZmFjdG9yeUlEOwp9CmVsc2UKewogICAgZmFjdG9yeUlEID0gYXdhaXQgb3Muc2hvd0lucHV0KG51bGwsIHsKICAgICAgICB0aXRsZTogJ0FkZCBmYWN0b3J5IGlkJwogICAgfSk7Cn0KCmlmIChmYWN0b3J5SUQpCnsKICAgIGxldCBwcmV2aW91c0ZhY3RvcnlCb3QgPSBnZXRCb3QoInN5c3RlbSIsICJhYi5mYWN0b3J5LiIgKyBmYWN0b3J5SUQpOwogICAgCiAgICBpZihwcmV2aW91c0ZhY3RvcnlCb3QpCiAgICB7CiAgICAgICAgZGVzdHJveShwcmV2aW91c0ZhY3RvcnlCb3QpOwogICAgfQoKICAgIGxldCB0ZW1wbGF0ZUJvdCA9IHRoYXQuYm90OwogICAgbGV0IGZhY3RvcnlNb2QgPSB7fTsKCiAgICBmYWN0b3J5TW9kW3RoYXQuZGltZW5zaW9uXSA9IG51bGw7CiAgICBmYWN0b3J5TW9kLnN5c3RlbSA9ICJhYi5mYWN0b3J5LiIgKyBmYWN0b3J5SUQ7CiAgICBmYWN0b3J5TW9kLmxpc3RlbmluZyA9IGZhbHNlOwogICAgZmFjdG9yeU1vZC5hYkZhY3RvcnkgPSB0cnVlOwoKICAgIGNyZWF0ZSh0ZW1wbGF0ZUJvdCwgZmFjdG9yeU1vZCk7CgogICAgYWIubG9nKGZhY3RvcnlJRCArICIgYWRkZWQgdG8gZmFjdG9yeSIpOwoKICAgIG9zLnRvYXN0KCJhZGRlZCAiICsgZmFjdG9yeUlEICsgIiB0byBmYWN0b3J5Iik7Cn0nAODh5oAJgAcJYWJGYWN0b3J5AgQA4OHmgAmpDQR0cnVlJwDg4eaACYAHD2FiQm90TWVudUFjdGlvbgIEAODh5oAJrg24AUBjb25zdCBjdXJyZW50RGltID0gbGlua3MubWFuaWZlc3RhdGlvbi5saW5rcy5hYkJvdC50YWdzLmRpbWVuc2lvbjsKY29uc3QgdGFyZ2V0Qm90ID0gbGlua3MucmVtZW1iZXIubGlua3MuYWJCb3RGb2N1czsKCnRoaXNCb3QuYWJBZGRUb0ZhY3Rvcnkoe2RpbWVuc2lvbjogY3VycmVudERpbSwgYm90OiB0YXJnZXRCb3R9KTsnAODh5oAJgAcTYWJDcmVhdGVGcm9tRmFjdG9yeQIEAODh5oAJ5w62BkAvL3Nob3V0KCJhYkNyZWF0ZUZyb21GYWN0b3J5Iiwge2ZhY3RvcnlJRDogImZhY3RvcnlJRCIsIHBvc2l0aW9uOiB7ZGltZW5zaW9uOiAiZGltZW5zaW9uIiwgeDogIngiLCB5OiAieSJ9fSk7CmxldCBmdWxsTmFtZSA9ICJhYi5mYWN0b3J5LiIgKyB0aGF0LmZhY3RvcnlJRDsKbGV0IGZhY3RvcnlUZW1wbGF0ZSA9IGdldE1vZChnZXRCb3QoJ3N5c3RlbScsIGZ1bGxOYW1lKSk7CmxldCBwb3NpdGlvbkluZm8gPSB0aGF0LnBvc2l0aW9uOwoKaWYoIWZhY3RvcnlUZW1wbGF0ZSkKewogICAgY29uc29sZS5sb2coIm5vdCBmYWN0b3J5IGJvdCBmb3VuZCIpOwoKICAgIGFiLmxvZyhmdWxsTmFtZSArICIgY291bGQgbm90IGJlIGZvdW5kIikKCiAgICByZXR1cm47Cn0KCmFiLmxvZyhmdWxsTmFtZSArICIgY3JlYXRlZCBmcm9tIGZhY3RvcnkiKTsKCmxldCBuZXdCb3QgPSB7fQoKbmV3Qm90LmNyZWF0b3IgPSBudWxsOwpuZXdCb3RbcG9zaXRpb25JbmZvLmRpbWVuc2lvbl0gPSB0cnVlOwpuZXdCb3RbcG9zaXRpb25JbmZvLmRpbWVuc2lvbiArICJYIl0gPSBwb3NpdGlvbkluZm8ucG9zaXRpb24ueDsKbmV3Qm90W3Bvc2l0aW9uSW5mby5kaW1lbnNpb24gKyAiWSJdID0gcG9zaXRpb25JbmZvLnBvc2l0aW9uLnk7Cm5ld0JvdC5saXN0ZW5pbmcgPSBudWxsOwpuZXdCb3QuYWJJZ25vcmUgPSBudWxsOwpuZXdCb3Quc3lzdGVtID0gbnVsbDsKbmV3Qm90LmFiRmFjdG9yeSA9IG51bGw7Cm5ld0JvdC5hYk1lbnVTb3J0T3JkZXIgPSBudWxsOwoKY3JlYXRlKGZhY3RvcnlUZW1wbGF0ZSwgbmV3Qm90KTsKCmxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOycA4OHmgAmABxBhYkdyaWRNZW51QWN0aW9uAgQA4OHmgAmeFdcIQHNob3V0KCJhYk1lbnVSZWZyZXNoIik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJhYk1lbnUiOwoKbGlua3MubWVudS5tYXNrcy5vbkdyaWRDbGljayA9ICJAIHNob3V0KCdhYk1lbnVSZWZyZXNoJyk7IGxpbmtzLm1hbmlmZXN0YXRpb24uYWJDbGljaygpOyI7Cgpjb25zdCBmYWN0b3J5Qm90cyA9IGdldEJvdHMoImFiRmFjdG9yeSIpOwpjb25zdCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLmFiTWVudSA9IHRydWU7Cm1lbnVCdXR0b24uYWJNZW51UmVmcmVzaCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5ncmlkSW5mb3JtYXRpb24gPSBsaW5rcy5yZW1lbWJlci50YWdzLmFiR3JpZEZvY3VzOwptZW51QnV0dG9uLm1hbmFnZXIgPSAi8J+UlyIgKyB0aGlzQm90LmlkOwptZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLmFiQ3JlYXRlRnJvbUZhY3Rvcnkoe2ZhY3RvcnlJRDogdGFncy5sYWJlbCwgcG9zaXRpb246IHRhZ3MuZ3JpZEluZm9ybWF0aW9ufSk7IHNob3V0KCdhYk1lbnVSZWZyZXNoJyk7YDsKCmlmIChmYWN0b3J5Qm90cy5sZW5ndGggPCAyKQp7CiAgICByZXR1cm47IAp9Cgpmb3IgKGxldCBqID0gMDsgaiA8IGZhY3RvcnlCb3RzLmxlbmd0aDsgaisrKSAKewogICAgbGV0IGN1cnJlbnRGYWN0b3J5Qm90ID0gZmFjdG9yeUJvdHNbal07CiAgICBsZXQgY3VycmVudFN5c3RlbVRhZyA9IGN1cnJlbnRGYWN0b3J5Qm90LnRhZ3Muc3lzdGVtOwoKICAgIGlmIChjdXJyZW50U3lzdGVtVGFnID09IHRhZ3Muc3lzdGVtKQogICAgewogICAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIG1lbnVCdXR0b24uYWJNZW51U29ydE9yZGVyID0gY3VycmVudEZhY3RvcnlCb3QudGFncy5hYk1lbnVTb3J0T3JkZXI7CiAgICBtZW51QnV0dG9uLmxhYmVsID0gY3VycmVudFN5c3RlbVRhZy5zdWJzdHJpbmcoMTEpOwogICAgbWVudUJ1dHRvbi5jb2xvciA9IGN1cnJlbnRGYWN0b3J5Qm90LnRhZ3MuY29sb3I7CiAgICBtZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gY3VycmVudEZhY3RvcnlCb3QudGFncy5mYWN0b3J5SWNvbjsKCiAgICBsaW5rcy5tZW51LmFiQ3JlYXRlTWVudUJ1dHRvbihtZW51QnV0dG9uKTsKfScA4OHmgAmABw1tYW5pZmVzdGF0aW9uAgQA4OHmgAn0HSjwn5SXZGNhNWQ5ODctYzRkOC00NmU0LWI2MGMtZGFhN2IyZjRkZGFkJwDg4eaACYAHCHJlbWVtYmVyAgQA4OHmgAmbHijwn5SXZTUzODBhNmItOGI0ZC00YThiLThiMDQtNThlMWViMDNlNWU3JwDg4eaACYAHBG1lbnUCBADg4eaACcIeKPCflJdiMzBjNmM1ZC1hNGY3LTQyNjYtYmEzOC0zOTNkYzk1ZTFlY2InAODh5oAJgAcPYWJHcmlkTWVudUxhYmVsAgQA4OHmgAnpHgd0b29sYm94JwDg4eaACYAHDmFiR3JpZE1lbnVJY29uAgQA4OHmgAnxHgxjb25zdHJ1Y3Rpb24nAODh5oAJgAcTYWJHcmlkTWVudVNvcnRPcmRlcgIEAODh5oAJ/h4BMycA4OHmgAmABw1hYkJvdE1lbnVJY29uAgQA4OHmgAmAHwxjb25zdHJ1Y3Rpb24nAODh5oAJgAcOYWJCb3RNZW51TGFiZWwCBADg4eaACY0fDmFkZCB0byB0b29sYm94JwDg4eaACYAHEmFiQm90TWVudVNvcnRPcmRlcgIEAODh5oAJnB8BMycA4OHmgAmABw5hYkJvdE1lbnVDb2xvcgIEAODh5oAJnh8HIzU1RTY3OScA4OHmgAmABw9hYkdyaWRNZW51Q29sb3ICBADg4eaACaYfByM1NUU2NzkoAODh5oAJgAcMYWJCb3RWZXJzaW9uAX0YJwEEYm90cyQxZGQ1OTZlMS04ODI2LTQyNTctYjVkNi1kYzJhOWE1NzFkZjUBJwDg4eaACa8fBWNvbG9yAgQA4OHmgAmwHwcjN0I2NEZGJwDg4eaACa8fBGZvcm0CBADg4eaACbgfA2hleCgA4OHmgAmvHwVzY2FsZQF8P8AAACgA4OHmgAmvHwZzY2FsZVoBez+EeuFHrhR7JwDg4eaACa8fB29uQ2xpY2sCBADg4eaACb4fiQlAc2hvdXQoInBhZE1lbnVSZXNldCIpOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAicGFkTWVudSI7CgptYXNrcy5vbkdyaWRDbGljayA9IGBAIHNob3V0KCJwYWRNZW51UmVzZXQiKTtgOwptYXNrcy5wYWRNZW51UmVzZXQgPSBgQCBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CgpjbGVhclRhZ01hc2tzKHRoaXNCb3QpO2A7Cgpjb25zdCBwYWRMb2NhdGlvbnMgPSB0YWdzLnBhZExvY2F0aW9uczsKY29uc3QgbWVudUJ1dHRvbiA9IHt9OwoKbWVudUJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZW51QnV0dG9uLnBhZE1lbnUgPSB0cnVlOwptZW51QnV0dG9uLnBhZE1lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbWVudUJ1dHRvbi5jb2xvciA9IHRhZ3MuY29sb3I7Cm1lbnVCdXR0b24ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7CgppZiAocGFkTG9jYXRpb25zLmxlbmd0aCA+IDApCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAibWVldGluZ19yb29tIjsKICAgIG1lbnVCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm1hbmFnZXIucGFkR29Ub0xvY2F0aW9uKHRhZ3MubGFiZWwpO2A7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWRMb2NhdGlvbnMubGVuZ3RoOyBpKyspCiAgICB7CiAgICAgICAgbWVudUJ1dHRvbi5sYWJlbCA9IHBhZExvY2F0aW9uc1tpXTsKCiAgICAgICAgY3JlYXRlKG1lbnVCdXR0b24pOwogICAgfQp9CgptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImNlbnRlciI7Cm1lbnVCdXR0b24ubGFiZWwgPSAiICAgICI7Cm1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiaW9zX3NoYXJlIjsKbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgbGlua3MubWFuYWdlci5wYWRTaGFyZSgpO2A7CgpjcmVhdGUobWVudUJ1dHRvbik7CgppZiAoYnVpbGRlclZlcnNpb24pCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiZWRpdCI7CiAgICBtZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLnBhZEVkaXRNZW51KCk7YDsKCiAgICBjcmVhdGUobWVudUJ1dHRvbik7Cn0nAODh5oAJrx8Ob25Qb2ludGVyRW50ZXICBADg4eaACcgoIUAgbWFza3Muc2NhbGUgPSB0YWdzLnNjYWxlICsgMC4xOycA4OHmgAmvHw1vblBvaW50ZXJFeGl0AgQA4OHmgAnqKBlAIGNsZWFyVGFnTWFza3ModGhpc0JvdCk7JwDg4eaACa8fBnN5c3RlbQIEAODh5oAJhCkOYWIuZmFjdG9yeS5wYWQnAODh5oAJrx8PcGFkR29Ub0xvY2F0aW9uAgQA4OHmgAmTKaIFQGxldCB0YXJnZXRMb2NhdGlvbiA9IHRoYXQ7CmxldCB1cmxDaGVjayA9IGZhbHNlOwoKdHJ5IAp7CiAgICB0YXJnZXRMb2NhdGlvbiA9IG5ldyBVUkwodGhhdCk7CgogICAgdXJsQ2hlY2sgPSAhdXJsQ2hlY2s7Cn0KY2F0Y2ggKGUpIAp7CgogICAgb3MudG9hc3QoInRyYXZlbGxpbmcgbm93Iik7CgogICAgb3MuZ29Ub1VSTCgiLz9hYj0iICsgdGFyZ2V0TG9jYXRpb24pOwp9CgpsZXQgaW5zdENoZWNrID0gdGFyZ2V0TG9jYXRpb24uc2VhcmNoUGFyYW1zLmhhcygiaW5zdCIpOwpsZXQgYWJDaGVjayA9IHRhcmdldExvY2F0aW9uLnNlYXJjaFBhcmFtcy5oYXMoImFiIik7CgppZiAoaW5zdENoZWNrKQp7CiAgICBpZiAoYWJDaGVjaykKICAgIHsKICAgICAgICBvcy5nb1RvVVJMKCIvP2dyaWRQb3J0YWw9aG9tZSZpbnN0PSIgKyB0YXJnZXRMb2NhdGlvbi5zZWFyY2hQYXJhbXMuZ2V0KCJpbnN0IikgKyAiJmFiPSIgKyB0YXJnZXRMb2NhdGlvbi5zZWFyY2hQYXJhbXMuZ2V0KCJhYiIpKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBvcy5nb1RvVVJMKCIvP2dyaWRQb3J0YWw9aG9tZSZpbnN0PSIgKyB0YXJnZXRMb2NhdGlvbi5zZWFyY2hQYXJhbXMuZ2V0KCJpbnN0IikpOwogICAgfQogICAgCn0KZWxzZSAKewogICAgb3MudG9hc3QoIm5vdCBhIHJlY29nbml6ZWQgdXJsIik7Cn0nAODh5oAJrx8LcGFkRWRpdE1lbnUCBADg4eaACbYugQ9Ac2hvdXQoInBhZE1lbnVSZXNldCIpOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAicGFkTWVudSI7CgptYXNrcy5vbkdyaWRDbGljayA9IGBAIHNob3V0KCJwYWRNZW51UmVzZXQiKTtgOwptYXNrcy5wYWRNZW51UmVzZXQgPSBgQCBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CgpjbGVhclRhZ01hc2tzKHRoaXNCb3QpO2A7Cgpjb25zdCBwYWRMb2NhdGlvbnMgPSB0YWdzLnBhZExvY2F0aW9uczsKY29uc3QgbWVudUJ1dHRvbiA9IHt9OwoKbWVudUJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZW51QnV0dG9uLnBhZE1lbnVTb3J0T3JkZXIgPSAxMDA7Cm1lbnVCdXR0b24ucGFkTWVudVJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwptZW51QnV0dG9uLm1lbnVJdGVtU3R5bGUgPSB7ICJib3JkZXItcmFkaXVzIjogIjhweCIsICJtYXJnaW4tdG9wIjogIjNweCIgfTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJjZW50ZXIiOwptZW51QnV0dG9uLmNvbG9yID0gIiNENjZENUUiOwptZW51QnV0dG9uLm1hbmFnZXIgPSBnZXRMaW5rKHRoaXNCb3QpOwptZW51QnV0dG9uLmxhYmVsID0gIiAgICAiOwptZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImRlbGV0ZV9mb3JldmVyIjsKbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgbGlua3MubWFuYWdlci5wYWRSZW1vdmVMb2NhdGlvbnMoKTtgOwptZW51QnV0dG9uLm9wdGlvbkNsaWNrID0gYEAgaWYgKGdldEJvdChieU1vZCh7cGFkTG9jYXRpb25PcHRpb246IHRydWUsIGZvcm1BZGRyZXNzOiAiY2hlY2tfYm94In0pKSkKewogICAgdGFncy5wYWRNZW51ID0gdHJ1ZTsKfQplbHNlCnsKICAgIHRhZ3MucGFkTWVudSA9IGZhbHNlOwp9YDsKCmxldCBkZWxldGVCdXR0b24gPSBjcmVhdGUobWVudUJ1dHRvbik7CgptZW51QnV0dG9uLnBhZE1lbnUgPSB0cnVlOwptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImxlZnQiOwptZW51QnV0dG9uLmNvbG9yID0gdGFncy5jb2xvcjsKbWVudUJ1dHRvbi5kZWxldGVCdXR0b24gPSBnZXRMaW5rKGRlbGV0ZUJ1dHRvbik7CgppZiAocGFkTG9jYXRpb25zLmxlbmd0aCA+IDApIAp7CiAgICBtZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImNoZWNrX2JveF9vdXRsaW5lX2JsYW5rIjsKICAgIG1lbnVCdXR0b24ucGFkTG9jYXRpb25PcHRpb24gPSB0cnVlOwogICAgbWVudUJ1dHRvbi5vbkNsaWNrID0gYEAgaWYgKHRhZ3MuZm9ybUFkZHJlc3MgPT0gImNoZWNrX2JveF9vdXRsaW5lX2JsYW5rIikKICAgIHsKICAgICAgICB0YWdzLmZvcm1BZGRyZXNzID0gImNoZWNrX2JveCI7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgdGFncy5mb3JtQWRkcmVzcyA9ICJjaGVja19ib3hfb3V0bGluZV9ibGFuayI7CiAgICB9CiAgICAKICAgIGxpbmtzLmRlbGV0ZUJ1dHRvbi5vcHRpb25DbGljayh0aGlzQm90KTtgOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFkTG9jYXRpb25zLmxlbmd0aDsgaSsrKSAKICAgIHsKICAgICAgICBtZW51QnV0dG9uLnBhZE1lbnVTb3J0T3JkZXIgPSBpOwogICAgICAgIG1lbnVCdXR0b24ubGFiZWwgPSBwYWRMb2NhdGlvbnNbaV07CgogICAgICAgIGNyZWF0ZShtZW51QnV0dG9uKTsKICAgIH0KfQoKbWVudUJ1dHRvbi5vbkNsaWNrID0gbnVsbDsKbWVudUJ1dHRvbi5wYWRMb2NhdGlvbk9wdGlvbiA9IG51bGw7Cm1lbnVCdXR0b24ucGFkTWVudVNvcnRPcmRlciA9IC0xOwptZW51QnV0dG9uLmxhYmVsID0gIisiOwptZW51QnV0dG9uLmZvcm0gPSAiaW5wdXQiOwptZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gIm1lZXRpbmdfcm9vbSI7Cm1lbnVCdXR0b24ub25TdWJtaXQgPSBgQCBpZiAoIXRoYXQpCnsKICAgIHJldHVybjsKfQoKbGlua3MubWFuYWdlci5wYWRBZGRMb2NhdGlvbih0aGF0LnRleHQpO2A7CgpjcmVhdGUobWVudUJ1dHRvbik7JwDg4eaACa8fCHBhZFNoYXJlAgQA4OHmgAm4PWNAc2hvdXQoInBhZE1lbnVSZXNldCIpOwoKb3Muc2V0Q2xpcGJvYXJkKGNvbmZpZ0JvdC50YWdzLnVybCk7Cgpvcy50b2FzdCgidXJsIGNvcGllZCB0byBjbGlwYm9hcmQiKTsnAODh5oAJrx8OcGFkQWRkTG9jYXRpb24CBADg4eaACZw+hwFAc2hvdXQoInBhZE1lbnVSZXNldCIpOwoKbGV0IG5ld0FycmF5ID0gdGFncy5wYWRMb2NhdGlvbnM7CgpuZXdBcnJheS5wdXNoKHRoYXQpOwoKdGFncy5wYWRMb2NhdGlvbnMgPSBuZXdBcnJheTsKCnRoaXNCb3QucGFkRWRpdE1lbnUoKTsnAODh5oAJrx8ScGFkUmVtb3ZlTG9jYXRpb25zAgQA4OHmgAmkP+UDQGNvbnN0IHBhZE1lbnVPcHRpb25zID0gZ2V0Qm90cyhieU1vZCh7cGFkTG9jYXRpb25PcHRpb246IHRydWUsIGZvcm1BZGRyZXNzOiAiY2hlY2tfYm94IiwgcGFkTWVudTogdHJ1ZX0pKTsKY29uc3QgcmVtb3ZlVGFyZ2V0cyA9IFtdOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBwYWRNZW51T3B0aW9ucy5sZW5ndGg7IGkrKykKewogICAgcmVtb3ZlVGFyZ2V0cy5wdXNoKHBhZE1lbnVPcHRpb25zW2ldLnRhZ3MubGFiZWwpOwp9CgpzaG91dCgicGFkTWVudVJlc2V0Iik7Cgpjb25zdCBwYWRMb2NhdGlvbnMgPSB0YWdzLnBhZExvY2F0aW9uczsKCmZvciAobGV0IGogPSAwOyBqIDwgcmVtb3ZlVGFyZ2V0cy5sZW5ndGg7IGorKykKewogICAgbGV0IHRhcmdldEluZGV4ID0gcGFkTG9jYXRpb25zLmluZGV4T2YocmVtb3ZlVGFyZ2V0c1tqXSk7CgogICAgcGFkTG9jYXRpb25zLnNwbGljZSh0YXJnZXRJbmRleCwgMSk7Cn0KCnRoaXNCb3QucGFkRWRpdE1lbnUoKTsoAODh5oAJrx8MYWJCb3RWZXJzaW9uAX0IJwDg4eaACa8fCWFiRmFjdG9yeQIEAODh5oAJi0MEdHJ1ZScA4OHmgAmvHwhhYklnbm9yZQIEAODh5oAJkEMEdHJ1ZScA4OHmgAmvHwtmYWN0b3J5SWNvbgIEAODh5oAJlUMMbWVldGluZ19yb29tJwDg4eaACa8fCWxpc3RlbmluZwIEAODh5oAJokMFZmFsc2UnAODh5oAJrx8LdG9vbE1hbmFnZXICBADg4eaACahDKPCflJcxNGUxZmRhYy1jZmQ3LTRlN2UtYmRkMS05NjdhNDA4NWE3NTUnAODh5oAJrx8Ib25DcmVhdGUCBADg4eaACc9DUkBpZiAoIXRhZ3Muc3lzdGVtKQp7CiAgICBsZXQgYmFzZUFycmF5ID0gW107CgogICAgdGFncy5wYWRMb2NhdGlvbnMgPSBiYXNlQXJyYXk7Cn0nAODh5oAJrx8PYWJNZW51U29ydE9yZGVyAgQA4OHmgAmiRAExJwEEYm90cyRhNWUyZWVkZi1jZDE3LTRiZjgtYTk4Ni1kZDgyYWExZmQ4NTgBJwDg4eaACaREBWNvbG9yAgQA4OHmgAmlRAcjNjIyNzczJwDg4eaACaREBGZvcm0CBADg4eaACa1EBWhlbGl4JwDg4eaACaREBG1vZHMCBADg4eaACbNEGPCfp6x7ImNvbG9yIjogIiM2MjI3NzMifScA4OHmgAmkRAZzeXN0ZW0CBADg4eaACcpEDmFiLmZhY3RvcnkubW9kJwDg4eaACaRECWFiRmFjdG9yeQIEAODh5oAJ2UQEdHJ1ZScA4OHmgAmkRAhhYklnbm9yZQIEAODh5oAJ3kQEdHJ1ZScA4OHmgAmkRAlsaXN0ZW5pbmcCBADg4eaACeNEBWZhbHNlJwDg4eaACaREC2ZhY3RvcnlJY29uAgQA4OHmgAnpRAVoZWxpeCcA4OHmgAmkRAt0b29sTWFuYWdlcgIEAODh5oAJ70Qo8J+UlzE0ZTFmZGFjLWNmZDctNGU3ZS1iZGQxLTk2N2E0MDg1YTc1NScA4OHmgAmkRAdvbkNsaWNrAgQA4OHmgAmWRZMGQHNob3V0KCJtb2RNZW51UmVzZXQiKTsKCmNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gIm1vZE1lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgibW9kTWVudVJlc2V0Iik7YDsKbWFza3MubW9kTWVudVJlc2V0ID0gYEAgY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSBudWxsOwpjb25maWdCb3QubWFza3MudGFnUG9ydGFsID0gbnVsbDsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3IgPSBudWxsOwoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTtgOwoKbGV0IG1vZE1lbnVCb3QgPSB7fTsKCm1vZE1lbnVCb3Quc3BhY2UgPSAidGVtcExvY2FsIjsKbW9kTWVudUJvdC5tb2RNZW51ID0gdHJ1ZTsKbW9kTWVudUJvdC5sYWJlbCA9ICJlZGl0IG1vZCI7Cm1vZE1lbnVCb3QuZm9ybUFkZHJlc3MgPSAiZWRpdCI7Cm1vZE1lbnVCb3QuY29sb3IgPSB0YWdzLmNvbG9yOwptb2RNZW51Qm90Lm1vZERpbWVuc2lvbiA9IHRoaXNCb3QuaWQgKyAiLm1vZHMiOwptb2RNZW51Qm90Lm1vZE1lbnVSZXNldCA9IGBAIGRlc3Ryb3kodGhpc0JvdCk7YDsKbW9kTWVudUJvdC5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbW9kTWVudUJvdC5vbkNsaWNrID0gYEAgZGVzdHJveSh0aGlzQm90KTsKCmNvbmZpZ0JvdC5tYXNrcy50YWdQb3J0YWwgPSB0YWdzLm1vZERpbWVuc2lvbjsKCnRhZ1BvcnRhbEJvdC5tYXNrcy50YWdQb3J0YWxBbmNob3JQb2ludCA9ICJ0b3AiOwpgOwoKY3JlYXRlKG1vZE1lbnVCb3QpOycA4OHmgAmkRAZvbkRyb3ACBADg4eaACapL6QJAaWYgKHRoYXQuZHJhZ0JvdCAhPSB0aGlzQm90IHx8IHRoYXQudG8uYm90LnRhZ3MuYWJGYWN0b3J5KQp7CiAgICByZXR1cm47Cn0KCmFwcGx5TW9kKHRoYXQudG8uYm90LCB0YWdzLm1vZHMpOwoKbGV0IHByZXZpb2l1c0RpbWVuc2lvbiA9IHRoYXQuZnJvbS5kaW1lbnNpb247Cgp0YWdzW3RoYXQudG8uZGltZW5zaW9uXSA9IG51bGw7CnRhZ3NbcHJldmlvaXVzRGltZW5zaW9uXSA9IHRydWU7CnRhZ3NbcHJldmlvaXVzRGltZW5zaW9uICsgIlgiXSA9IHRoYXQuZnJvbS54Owp0YWdzW3ByZXZpb2l1c0RpbWVuc2lvbiArICJZIl0gPSB0aGF0LmZyb20ueTsKdGFnc1twcmV2aW9pdXNEaW1lbnNpb24gKyAiWiJdID0gdGhhdC5mcm9tLno7KADg4eaACaREDGFiQm90VmVyc2lvbgF9EicA4OHmgAmkRA9hYk1lbnVTb3J0T3JkZXICBADg4eaACZVOATQnAQRib3RzJGM0NGViYzdmLTNkZjctNGU4ZS05NzgxLTE0ZTJjZThlMzRjOAEnAODh5oAJl04LZmFjdG9yeUljb24CBADg4eaACZhOC2ludmVudG9yeV8yJwDg4eaACZdOBWNvbG9yAgQA4OHmgAmkTgcjOTA4QkZDKADg4eaACZdODGFiQm90VmVyc2lvbgF9FycA4OHmgAmXTgRmb3JtAgQA4OHmgAmtTgZjaXJjbGUoAODh5oAJl04Fc2NhbGUBfQInAODh5oAJl04LdG9vbE1hbmFnZXICBADg4eaACbVOKPCflJcxNGUxZmRhYy1jZmQ3LTRlN2UtYmRkMS05NjdhNDA4NWE3NTUnAODh5oAJl04Gc2NhbGVaAgQA4OHmgAncTgMwLjEnAODh5oAJl04Gc3lzdGVtAgQA4OHmgAngThNhYi5mYWN0b3J5LmJvdFN0b3JlJwDg4eaACZdOBm9uRHJvcAIEAODh5oAJ9E5/QGlmICh0aGF0LmRyYWdCb3QgPT0gdGhpc0JvdCB8fCB0aGF0LmRyYWdCb3QudGFncy5zcGFjZSAhPSAic2hhcmVkIikKewogICAgcmV0dXJuOwp9Cgp0aGlzQm90W3RhZ3Muc3RvcmVNb2RlICsgIk9uRHJvcCJdKHRoYXQpOycA4OHmgAmXThFib3RTdG9yZVJlamVjdEJvdAIEAODh5oAJ9E+KAkB0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbl0gPSBudWxsOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uXSA9IHRydWU7CnRoYXQuZHJhZ0JvdC50YWdzW3RoYXQuZnJvbS5kaW1lbnNpb24rIlgiXSA9IHRoYXQuZnJvbS54Owp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uKyJZIl0gPSB0aGF0LmZyb20ueTsKdGhhdC5kcmFnQm90LnRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbisiWiJdID0gdGhhdC5mcm9tLno7JwDg4eaACZdOCXN0b3JlTW9kZQIEAODh5oAJ/1EJdW5saW1pdGVkJwDg4eaACZdOD3VubGltaXRlZE9uRHJvcAIEAODh5oAJiVJlQGlmICh0YWdzLnRlbXBsYXRlKQp7CiAgICB0aGlzQm90LmJvdFN0b3JlUmVqZWN0Qm90KHRoYXQpOwoKICAgIHJldHVybjsKfQoKdGhpc0JvdC5hZGRUZW1wbGF0ZSh0aGF0KTsnAODh5oAJl04NbGltaXRlZE9uRHJvcAIEAODh5oAJ71KJAkBpZiAoKHRhZ3MuYm90U3RvcmVJRCAmJiB0aGF0LmRyYWdCb3QudGFncy5ib3RTdG9yZUlEICE9IHRhZ3MuYm90U3RvcmVJRCkgfHwgdGFncy5tYXhDb3VudCA9PSB0YWdzLmxhYmVsKQp7CiAgICB0aGlzQm90LmJvdFN0b3JlUmVqZWN0Qm90KHRoYXQpOwoKICAgIHJldHVybjsKfQoKdGFncy5sYWJlbCsrOwoKaWYgKHRhZ3MudGVtcGxhdGUpCnsKICAgIGRlc3Ryb3kodGhhdC5kcmFnQm90KTsKfQplbHNlCnsKICAgIHRoaXNCb3QuYWRkVGVtcGxhdGUodGhhdCk7Cn0nAODh5oAJl04LYWRkVGVtcGxhdGUCBADg4eaACflU4wtAdGFncy50ZW1wbGF0ZSA9IGdldExpbmsodGhhdC5kcmFnQm90KTsKCnRoYXQuZHJhZ0JvdC50YWdzLmxpc3RlbmluZyA9IGZhbHNlOwp0aGF0LmRyYWdCb3QudGFncy5wb2ludGFibGUgPSBmYWxzZTsKdGhhdC5kcmFnQm90LnRhZ3MudHJhbnNmb3JtZXIgPSB0aGlzQm90LmlkOwp0aGF0LmRyYWdCb3QudGFncy5jcmVhdG9yID0gdGhpc0JvdC5pZDsKdGhhdC5kcmFnQm90LnRhZ3MudHJhbnNmb3JtZXIgPSB0aGlzQm90LmlkOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJYIl0gPSAwOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJZIl0gPSAwOwp0aGF0LmRyYWdCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJaIl0gPSA1Owp0aGF0LmRyYWdCb3QudGFncy5zY2FsZSA9IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlID8gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGUgLyAyIDogMC41Owp0aGF0LmRyYWdCb3QudGFncy5zY2FsZVggPSB0aGF0LmRyYWdCb3QudGFncy5zY2FsZVggPyB0aGF0LmRyYWdCb3QudGFncy5zY2FsZVggLyAyIDogMTsKdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVZID0gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVZID8gdGhhdC5kcmFnQm90LnRhZ3Muc2NhbGVZIC8gMiA6IDE7CnRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWiA9IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWiA/IHRoYXQuZHJhZ0JvdC50YWdzLnNjYWxlWiAqIDEwIDogMTA7CgppZiAodGFncy5zdG9yZU1vZGUgPT0gImxpbWl0ZWQiKQp7CiAgICBsZXQgbmV3U3RvcmVJRCA9IHV1aWQoKTsKCiAgICB0YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwoKICAgIHRoYXQuZHJhZ0JvdC50YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwp9CgpsZXQgaGl0Qm94ID0ge307CgpoaXRCb3gudHJhbnNmb3JtZXIgPSB0aGlzQm90LmlkOwpoaXRCb3guY29sb3IgPSAiY2xlYXIiOwpoaXRCb3guZHJhZ2dhYmxlID0gZmFsc2U7CmhpdEJveC5tYW5hZ2VyID0gZ2V0TGluayh0aGlzQm90KTsKaGl0Qm94Lm9uRHJhZyA9IGBAIGxpbmtzLm1hbmFnZXIudGVtcGxhdGVEcmFnKHRoYXQpO2A7CmhpdEJveC5zY2FsZSA9IGxpbmtzLnRlbXBsYXRlLnRhZ3Muc2NhbGU7CmhpdEJveC5zY2FsZVggPSBsaW5rcy50ZW1wbGF0ZS50YWdzLnNjYWxlWDsKaGl0Qm94LnNjYWxlWSA9IGxpbmtzLnRlbXBsYXRlLnRhZ3Muc2NhbGVZOwpoaXRCb3guc2NhbGVaID0gbGlua3MudGVtcGxhdGUudGFncy5zY2FsZVo7CmhpdEJveFt0aGF0LnRvLmRpbWVuc2lvbl0gPSB0cnVlOwpoaXRCb3hbdGhhdC50by5kaW1lbnNpb24gKyAiWCJdID0gMDsKaGl0Qm94W3RoYXQudG8uZGltZW5zaW9uICsgIlkiXSA9IDA7CmhpdEJveFt0aGF0LnRvLmRpbWVuc2lvbiArICJaIl0gPSA1OwoKbGV0IG5ld0hpdGJveCA9IGNyZWF0ZShoaXRCb3gpOwoKbGlua3MuaGl0Qm94ID0gZ2V0TGluayhuZXdIaXRib3gpOwoKdGhpc0JvdC5pbml0aWF0ZUJvdFN0b3JlQW5pbWF0aW9uKCk7JwDg4eaACZdOB29uQ2xpY2sCBADg4eaACd1g/ApAc2hvdXQoImJvdFN0b3JlTWVudVJlc2V0Iik7Cgpjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9ICJib3RTdG9yZU1lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgiYm90U3RvcmVNZW51UmVzZXQiKTtgOwptYXNrcy5ib3RTdG9yZU1lbnVSZXNldCA9IGBAIGNvbmZpZ0JvdC5tYXNrcy5tZW51UG9ydGFsID0gbnVsbDsKCmNsZWFyVGFnTWFza3ModGhpc0JvdCk7YDsKCmxldCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lbnVCdXR0b24uYm90U3RvcmVNZW51ID0gdHJ1ZTsKbWVudUJ1dHRvbi5ib3RTdG9yZU1lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5tZW51SXRlbVN0eWxlID0geyJib3JkZXItcmFkaXVzIjoiOHB4IiwgIm1hcmdpbi10b3AiOiIzcHgifTsKbWVudUJ1dHRvbi5sYWJlbEFsaWdubWVudCA9ICJsZWZ0IjsKbWVudUJ1dHRvbi5jb2xvciA9IHRhZ3MuY29sb3I7Cm1lbnVCdXR0b24ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7Cm1lbnVCdXR0b24ub25DbGljayA9IGBAIHNob3V0KCJib3RTdG9yZU1lbnVSZXNldCIpOwogICAgCmxpbmtzLm1hbmFnZXIuY2hhbmdlU3RvcmVTdGF0ZSgpO2A7CgppZiAodGFncy5zdG9yZU1vZGUgPT0gInVubGltaXRlZCIpCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiaW52ZW50b3J5IjsKICAgIG1lbnVCdXR0b24ubGFiZWwgPSAiY2hhbmdlIHRvIGxpbWl0ZWQiOwoKICAgIGNyZWF0ZShtZW51QnV0dG9uKTsKfQplbHNlCnsKICAgIG1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiZmlsZV9jb3B5IjsKICAgIG1lbnVCdXR0b24ubGFiZWwgPSAiY2hhbmdlIHRvIHVubGltaXRlZCI7CgogICAgY3JlYXRlKG1lbnVCdXR0b24pOwoKICAgIG1lbnVCdXR0b24ubGFiZWwgPSAiICAgICI7CiAgICBtZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImNlbnRlciI7CiAgICBtZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLnRhZ3MudGVtcGxhdGVMb2NrID0gIWxpbmtzLm1hbmFnZXIudGFncy50ZW1wbGF0ZUxvY2sKICAgIAogICAgaWYgKGxpbmtzLm1hbmFnZXIudGFncy50ZW1wbGF0ZUxvY2spCiAgICB7CiAgICAgICAgdGFncy5mb3JtQWRkcmVzcyA9ICJsb2NrIjsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICB0YWdzLmZvcm1BZGRyZXNzID0gImxvY2tfb3BlbiI7CiAgICB9YDsKCiAgICBpZiAodGFncy50ZW1wbGF0ZUxvY2spCiAgICB7CiAgICAgICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJsb2NrIjsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBtZW51QnV0dG9uLmZvcm1BZGRyZXNzID0gImxvY2tfb3BlbiI7CiAgICB9CgogICAgY3JlYXRlKG1lbnVCdXR0b24pOwp9CgonAODh5oAJl04MdGVtcGxhdGVEcmFnAgQA4OHmgAnaa4EHQGlmICh0YWdzLnN0b3JlTW9kZSA9PSAibGltaXRlZCIpCnsKICAgIGlmICh0YWdzLmxhYmVsID09IDApCiAgICB7CiAgICAgICAgcmV0dXJuOwogICAgfQp9CgpsZXQgbmV3Qm90ID0gZ2V0TW9kKGxpbmtzLnRlbXBsYXRlKTsKCm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uXSA9IHRydWU7Cm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uICsgIlgiXSA9IHRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbiArICJYIl07Cm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uICsgIlkiXSA9IHRhZ3NbdGhhdC5mcm9tLmRpbWVuc2lvbiArICJZIl07Cm5ld0JvdFt0aGF0LmZyb20uZGltZW5zaW9uICsgIloiXSA9IDA7Cm5ld0JvdC5saXN0ZW5pbmcgPSBudWxsOwpuZXdCb3QucG9pbnRhYmxlID0gbnVsbDsKbmV3Qm90LnRyYW5zZm9ybWVyID0gbnVsbDsKbmV3Qm90LmNyZWF0b3IgPSBudWxsOwpuZXdCb3QudHJhbnNmb3JtZXIgPSBudWxsOwpuZXdCb3Quc2NhbGUgPSBuZXdCb3Quc2NhbGUgPT0gMC41ID8gbnVsbCA6IG5ld0JvdC5zY2FsZSAqIDI7Cm5ld0JvdC5zY2FsZVggPSBuZXdCb3Quc2NhbGVYID09IDEgPyBudWxsIDogbmV3Qm90LnNjYWxlWCAqIDI7Cm5ld0JvdC5zY2FsZVkgPSBuZXdCb3Quc2NhbGVZID09IDEgPyBudWxsIDogbmV3Qm90LnNjYWxlWSAqIDI7Cm5ld0JvdC5zY2FsZVogPSBuZXdCb3Quc2NhbGVaID09IDEwID8gbnVsbCA6IG5ld0JvdC5zY2FsZVogLyAxMDsKbmV3Qm90LmJvdFN0b3JlSUQgPSB0YWdzLmJvdFN0b3JlSUQ7CgpsZXQgY3JlYXRlZEJvdCA9IGNyZWF0ZShuZXdCb3QpOwoKb3MucmVwbGFjZURyYWdCb3QoY3JlYXRlZEJvdCk7CgppZiAodGFncy5zdG9yZU1vZGUgPT0gImxpbWl0ZWQiKQp7CiAgICB0aGlzQm90LnJlZHVjZUxpbWl0ZWRDb3VudCgpOwp9JwDg4eaACZdOEnJlZHVjZUxpbWl0ZWRDb3VudAIEAODh5oAJ3HKNAkB0YWdzLmxhYmVsLS07CgppZiAodGFncy5sYWJlbCA9PSAwICYmICF0YWdzLnRlbXBsYXRlTG9jaykKewogICAgY2xlYXJJbnRlcnZhbCh0YWdzLnN0b3JlSW50ZXJ2YWwpOwoKICAgIGRlc3Ryb3kobGlua3MudGVtcGxhdGUpOwogICAgZGVzdHJveShsaW5rcy5oaXRCb3gpOwoKICAgIHRhZ3MudGVtcGxhdGUgPSBudWxsOwogICAgdGFncy5oaXRCb3ggPSBudWxsOwogICAgdGFncy5ib3RTdG9yZUlEID0gbnVsbDsKICAgIG1hc2tzLnN0b3JlSW50ZXJ2YWwgPSBudWxsOwp9JwDg4eaACZdOCWFiRmFjdG9yeQIEAODh5oAJ6nQEdHJ1ZScA4OHmgAmXTghhYklnbm9yZQIEAODh5oAJ73QEdHJ1ZScA4OHmgAmXTglsaXN0ZW5pbmcCBADg4eaACfR0BWZhbHNlJwDg4eaACZdOEGNoYW5nZVN0b3JlU3RhdGUCBADg4eaACfp07QRAaWYgKHRhZ3Muc3RvcmVNb2RlID09ICJ1bmxpbWl0ZWQiKQp7CiAgICB0YWdzLnN0b3JlTW9kZSA9ICJsaW1pdGVkIjsKCiAgICBjb25zdCBtYXhDb3VudCA9IGF3YWl0IG9zLnNob3dJbnB1dCgxLCB7CiAgICAgICAgdGl0bGU6ICdjaG9vc2UgbWF4JwogICAgfSk7CgogICAgaWYgKCFtYXhDb3VudCkKICAgIHsKICAgICAgICBtYXhDb3VudCA9IDE7CiAgICB9CgogICAgdGFncy5tYXhDb3VudCA9IG1heENvdW50OwoKICAgIGlmICh0YWdzLnRlbXBsYXRlKQogICAgewogICAgICAgIGxldCBuZXdTdG9yZUlEID0gdXVpZCgpOwoKICAgICAgICB0YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwoKICAgICAgICBsaW5rcy50ZW1wbGF0ZS50YWdzLmJvdFN0b3JlSUQgPSBuZXdTdG9yZUlEOwoKICAgICAgICB0YWdzLmxhYmVsID0gMTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICB0YWdzLmxhYmVsID0gMDsKICAgIH0KfQplbHNlCnsKICAgIHRhZ3Muc3RvcmVNb2RlID0gInVubGltaXRlZCI7CgogICAgdGFncy5sYWJlbCA9IG51bGw7CiAgICB0YWdzLm1heENvdW50ID0gbnVsbDsKICAgIHRhZ3MudGVtcGxhdGVMb2NrID0gbnVsbDsKICAgIHRhZ3MuYm90U3RvcmVJRCA9IG51bGw7Cn0nAODh5oAJl04ZaW5pdGlhdGVCb3RTdG9yZUFuaW1hdGlvbgIEAODh5oAJ6HmLAUBpZiAoIXRhZ3Muc3RvcmVJbnRlcnZhbCkKewogICAgdGhpc0JvdC5hbmltYXRlQm90U3RvcmUoKTsKCiAgICBtYXNrcy5zdG9yZUludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpc0JvdC5hbmltYXRlQm90U3RvcmUoKSwgMjAwMCk7Cn0nAODh5oAJl04PYW5pbWF0ZUJvdFN0b3JlAgQA4OHmgAn0epoCQGxldCByb3RaID0gY29uZmlnQm90LnRhZ3MuZ3JpZFBvcnRhbCArICJSb3RhdGlvbloiOwpsZXQgdGFyZ2V0Um90YXRpb24gPSAzNjAgKiBNYXRoLlBJLzE4MDsKCmF3YWl0IGFuaW1hdGVUYWcobGlua3MudGVtcGxhdGUsIHJvdFosIHsKICAgIGZyb21WYWx1ZTogMCwKICAgIHRvVmFsdWU6IHRhcmdldFJvdGF0aW9uLAogICAgZWFzaW5nOnsKICAgICAgICBtb2RlOiAiaW5vdXQiLAogICAgICAgIHR5cGU6ICJsaW5lYXIiCiAgICB9LAogICAgZHVyYXRpb246IDIKfSkuY2F0Y2goZSA9PiB7fSk7JwDg4eaACZdOD29uSW5zdFN0cmVhbWluZwIEAODh5oAJj31AQGlmICh0YWdzLnRlbXBsYXRlKQp7CiAgICB0aGlzQm90LmluaXRpYXRlQm90U3RvcmVBbmltYXRpb24oKTsKfScA4OHmgAmXTglvbkRlc3Ryb3kCBADg4eaACdB9I0BjbGVhckludGVydmFsKHRhZ3Muc3RvcmVJbnRlcnZhbCk7JwDg4eaACZdOD2FiTWVudVNvcnRPcmRlcgIEAODh5oAJ9H0BNScBBGJvdHMkZDE0MDIwNGMtNTVjNy00ZWMzLTkzNTQtOTNhZTc2MjZhODM2ASgA4OHmgAn2fQZzY2FsZVoBez+EeuFHrhR7KADg4eaACfZ9BXNjYWxlAXs/44UeuFHrhScA4OHmgAn2fQVjb2xvcgIEAODh5oAJ+X0EZ3JheScA4OHmgAn2fQtzdHJva2VDb2xvcgIEAODh5oAJ/n0HIzVFNTg4MCcA4OHmgAn2fQlsaW5lQ29sb3ICBADg4eaACYZ+ByM1RTU4ODAoAODh5oAJ9n0IZHVyYXRpb24BfQEnAODh5oAJ9n0KZWFzaW5nVHlwZQIEAODh5oAJj34GbGluZWFyJwDg4eaACfZ9CmVhc2luZ01vZGUCBADg4eaACZZ+BWlub3V0JwDg4eaACfZ9CWxpbmVTdHlsZQIEAODh5oAJnH4EbGluZScA4OHmgAn2fQZzeXN0ZW0CBADg4eaACaF+EGFiLmZhY3RvcnkudHJhY2snAODh5oAJ9n0JYWJGYWN0b3J5AgQA4OHmgAmyfgR0cnVlJwDg4eaACfZ9CGFiSWdub3JlAgQA4OHmgAm3fgR0cnVlJwDg4eaACfZ9C3Rvb2xNYW5hZ2VyAgQA4OHmgAm8fijwn5SXMTRlMWZkYWMtY2ZkNy00ZTdlLWJkZDEtOTY3YTQwODVhNzU1JwDg4eaACfZ9C2ZhY3RvcnlJY29uAgQA4OHmgAnjfgh0aW1lbGluZSgA4OHmgAn2fQxhYkJvdFZlcnNpb24BfRInAODh5oAJ9n0Ib25DcmVhdGUCBADg4eaACe1+b0B0YWdzLmNvbG9yID0gImNsZWFyIjsKCmlmICghdGFncy5saW5lVG8pCnsKICAgIHRoaXNCb3QuYWRkVHJhY2tOb2RlKHtkaW1lbnNpb246IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWx9KTsKfScA4OHmgAn2fQxhZGRUcmFja05vZGUCBADg4eaACd1/1wVAbGV0IGJvdE1vZCA9IGdldE1vZCh0aGlzQm90KTsKCmJvdE1vZFt0aGF0LmRpbWVuc2lvbiArICJZIl0gPSBib3RNb2RbdGhhdC5kaW1lbnNpb24gKyAiWSJdIC0gMzsKCmJvdE1vZC5saW5lVG8gPSB0aGlzQm90LmlkOwpib3RNb2QuY3JlYXRvciA9IHRoaXNCb3QuaWQ7CgpsZXQgbm9kZTIgPSBjcmVhdGUoYm90TW9kKTsKCnRhZ3MubGluZVRvID0gbm9kZTIuaWQ7CnRhZ3MuY3JlYXRvciA9IG5vZGUyLmlkOwoKbGV0IG5vZGUzID0gY3JlYXRlKGJvdE1vZCk7Cgpib3RNb2RbdGhhdC5kaW1lbnNpb24gKyAiWCJdID0gYm90TW9kW3RoYXQuZGltZW5zaW9uICsgIlgiXSArIDM7CgpsZXQgbm9kZTQgPSBjcmVhdGUoYm90TW9kKTsKCm5vZGUzLnRhZ3MubGluZVRvID0gbm9kZTQuaWQ7Cm5vZGUzLnRhZ3MuY3JlYXRvciA9IG5vZGU0LmlkOwpub2RlNC50YWdzLmxpbmVUbyA9IG5vZGUzLmlkOwpub2RlNC50YWdzLmNyZWF0b3IgPSBub2RlMy5pZDsKCmxldCBub2RlNSA9IGNyZWF0ZShib3RNb2QpOwoKYm90TW9kW3RoYXQuZGltZW5zaW9uICsgIlkiXSA9IGJvdE1vZFt0aGF0LmRpbWVuc2lvbiArICJZIl0gLSAzOwoKbGV0IG5vZGU2ID0gY3JlYXRlKGJvdE1vZCk7Cgpub2RlNS50YWdzLmxpbmVUbyA9IG5vZGU2LmlkOwpub2RlNS50YWdzLmNyZWF0b3IgPSBub2RlNi5pZDsKbm9kZTYudGFncy5saW5lVG8gPSBub2RlNS5pZDsKbm9kZTYudGFncy5jcmVhdG9yID0gbm9kZTUuaWQ7JwDg4eaACfZ9C2FiVHJhY2tOb2RlAgQA4OHmgAm1hQEEdHJ1ZScA4OHmgAn2fQlsaXN0ZW5pbmcCBADg4eaACbqFAQVmYWxzZScA4OHmgAn2fQZvbkRyb3ACBADg4eaACcCFAZYFQGlmICh0aGF0LmRyYWdCb3QudGFncy5hYlRyYWNrTm9kZSkKewogICAgdGFnc1tjb25maWdCb3QudGFncy5ncmlkUG9ydGFsICsgIlgiXSA9IE1hdGgucm91bmQodGFnc1tjb25maWdCb3QudGFncy5ncmlkUG9ydGFsICsgIlgiXSk7CiAgICB0YWdzW2NvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgKyAiWSJdID0gTWF0aC5yb3VuZCh0YWdzW2NvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgKyAiWSJdKTsKCiAgICByZXR1cm47Cn0KZWxzZSBpZiAodGhhdC5kcmFnQm90LnRhZ3MuZmFjdG9yeUljb24gPT0gImhlbGl4IikKewogICAgdGhpc0JvdC5hcHBseU1vZFRvVHJhY2tOb2RlKHRoYXQpOwoKICAgIHRoYXQuZHJhZ0JvdC50YWdzW3RoYXQuZnJvbS5kaW1lbnNpb24gKyAiWCJdID0gdGhhdC5mcm9tLng7CiAgICB0aGF0LmRyYWdCb3QudGFnc1t0aGF0LmZyb20uZGltZW5zaW9uICsgIlkiXSA9IHRoYXQuZnJvbS55OwoKICAgIHJldHVybjsKfQoKdGhhdC5kcmFnQm90Lm1hc2tzLm9uRHJhZyA9ICJAIGNsZWFyVGltZW91dCh0YWdzLnRyYWNrVGltZW91dCk7IGNsZWFyQW5pbWF0aW9ucyh0aGlzQm90KTsiOwoKdGhpc0JvdC5hbmltYXRlVHJhY2soe2FuaW1hdGVkQm90OiB0aGF0LmRyYWdCb3QsIHRhcmdldE5vZGU6IGdldEJvdCgiaWQiLCB0YWdzLmxpbmVUbyl9KTsnAODh5oAJ9n0MYW5pbWF0ZVRyYWNrAgQA4OHmgAnXigGPDUBsZXQgY3VycmVudERpbSA9IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA/IGNvbmZpZ0JvdC50YWdzLm1hcFBvcnRhbCA6IGNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWw7CmxldCBhbmltYXRlZEJvdCA9IHRoYXQuYW5pbWF0ZWRCb3Q7CmxldCBuZXh0Tm9kZSA9IHRoYXQudGFyZ2V0Tm9kZTsKbGV0IG9yaWdpbk5vZGUgPSB0aGlzQm90OwoKaWYgKG5leHROb2RlLmlkID09IHRoaXNCb3QuaWQpCnsKICAgIGxldCBub2RlU3RhY2sgPSBnZXRCb3RzKGJ5TW9kKHthYlRyYWNrTm9kZTogdHJ1ZSwgW2N1cnJlbnREaW1dOiB0cnVlLCBbY3VycmVudERpbSArICJYIl06IHRhZ3NbY3VycmVudERpbSArICJYIl0sIFtjdXJyZW50RGltICsgIlkiXTogdGFnc1tjdXJyZW50RGltICsgIlkiXX0pKTsKCiAgICBpZiAobm9kZVN0YWNrLmxlbmd0aCA+PSAzKQogICAgewogICAgICAgIG9yaWdpbk5vZGUgPSBub2RlU3RhY2tbbWF0aC5yYW5kb21JbnQoMCwgbm9kZVN0YWNrLmxlbmd0aCldOwoKICAgICAgICBuZXh0Tm9kZSA9IGdldEJvdCgiaWQiLCBvcmlnaW5Ob2RlLnRhZ3MubGluZVRvKTsKICAgIH0KICAgIGVsc2UgaWYgKG5vZGVTdGFjay5sZW5ndGggPiAxKQogICAgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZVN0YWNrLmxlbmd0aDsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKG5vZGVTdGFja1tpXS5pZCAhPSB0aGlzQm90LmlkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBvcmlnaW5Ob2RlID0gbm9kZVN0YWNrW2ldOwoKICAgICAgICAgICAgICAgIG5leHROb2RlID0gZ2V0Qm90KCJpZCIsIG9yaWdpbk5vZGUudGFncy5saW5lVG8pOwoKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgZWxzZQogICAgewogICAgICAgIG5leHROb2RlID0gZ2V0Qm90KCJpZCIsIHRhZ3MubGluZVRvKTsKICAgIH0KfQoKYW5pbWF0ZWRCb3QubWFza3MudHJhY2tUaW1lb3V0ID0gc2V0VGltZW91dCgoKT0+IHdoaXNwZXIobmV4dE5vZGUsICJhbmltYXRlVHJhY2siLCB7YW5pbWF0ZWRCb3Q6IGFuaW1hdGVkQm90LCB0YXJnZXROb2RlOiBuZXh0Tm9kZX0pLCB0YWdzLmR1cmF0aW9uICogMTAwMCk7CgppZiAob3JpZ2luTm9kZS50YWdzLm1vZHMpCnsKICAgIGFwcGx5TW9kKGFuaW1hdGVkQm90LCBvcmlnaW5Ob2RlLnRhZ3MubW9kcyk7Cn0KCmF3YWl0IGFuaW1hdGVUYWcoYW5pbWF0ZWRCb3QsIHsKICAgIGZyb21WYWx1ZTogewogICAgICAgIFtjdXJyZW50RGltICsgIlgiXTogb3JpZ2luTm9kZS50YWdzW2N1cnJlbnREaW0gKyAiWCJdLAogICAgICAgIFtjdXJyZW50RGltICsgIlkiXTogb3JpZ2luTm9kZS50YWdzW2N1cnJlbnREaW0gKyAiWSJdCiAgICB9LAogICAgdG9WYWx1ZTogewogICAgICAgIFtjdXJyZW50RGltICsgIlgiXTogbmV4dE5vZGUudGFnc1tjdXJyZW50RGltICsgIlgiXSwKICAgICAgICBbY3VycmVudERpbSArICJZIl06IG5leHROb2RlLnRhZ3NbY3VycmVudERpbSArICJZIl0KICAgIH0sCiAgICBkdXJhdGlvbjogdGFncy5kdXJhdGlvbiwKICAgIGVhc2luZzp7CiAgICAgICAgdHlwZTogdGFncy5lYXNpbmdUeXBlLAogICAgICAgIG1vZGU6IHRhZ3MuZWFzaW5nTW9kZQogICAgfSwKICAgIHRhZ01hc2tTcGFjZTogInRlbXBMb2NhbCIKfSkuY2F0Y2goZSA9PiB7fSk7JwDg4eaACfZ9B29uQ2xpY2sCBADg4eaACeeXAc0IQHNob3V0KCJhYlRyYWNrTWVudVJlc2V0Iik7Cgpjb25zdCBtZW51VHlwZSA9IHRoYXQubWVudVR5cGUgPyB0aGF0Lm1lbnVUeXBlIDogImJhc2UiOwpjb25zdCBtZW51VGFnID0gdGFnc1ttZW51VHlwZSArICJBQlRyYWNrTWVudSJdOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAiYWJUcmFja01lbnUiOwoKbWFza3Mub25HcmlkQ2xpY2sgPSBgQCBzaG91dCgiYWJUcmFja01lbnVSZXNldCIpO2A7Cm1hc2tzLmFiVHJhY2tNZW51UmVzZXQgPSBgQCBjb25maWdCb3QubWFza3MubWVudVBvcnRhbCA9IG51bGw7CgpjbGVhclRhZ01hc2tzKHRoaXNCb3QpO2A7CgpsZXQgbWVudUJ1dHRvbiA9IHt9OwoKbWVudUJ1dHRvbi5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwptZW51QnV0dG9uLmFiVHJhY2tNZW51ID0gdHJ1ZTsKbWVudUJ1dHRvbi5hYlRyYWNrTWVudVJlc2V0ID0gIkAgZGVzdHJveSh0aGlzQm90KTsiOwptZW51QnV0dG9uLm1lbnVJdGVtU3R5bGUgPSB7ImJvcmRlci1yYWRpdXMiOiI4cHgiLCAibWFyZ2luLXRvcCI6IjNweCJ9OwptZW51QnV0dG9uLmxhYmVsQWxpZ25tZW50ID0gImxlZnQiOwptZW51QnV0dG9uLmxhYmVsQ29sb3IgPSAiI2ZmZmZmZiI7Cm1lbnVCdXR0b24uY29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yOwptZW51QnV0dG9uLm1hbmFnZXIgPSBnZXRMaW5rKHRoaXNCb3QpOwoKZm9yIChsZXQgaSA9IDA7IGkgPCB0YWdzW21lbnVUeXBlICsgIkFCVHJhY2tNZW51Il0ubGVuZ3RoOyBpKyspCnsKICAgIGNyZWF0ZShtZW51QnV0dG9uLCB0YWdzW21lbnVUeXBlICsgIkFCVHJhY2tNZW51Il1baV0pOwp9CgppZiAodGFncy5tb2RzKQp7CiAgICBtZW51QnV0dG9uLmxhYmVsID0gInJlbW92ZSBtb2QiOwogICAgbWVudUJ1dHRvbi5mb3JtQWRkcmVzcyA9ICJoZWxpeCI7CiAgICBtZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBsaW5rcy5tYW5hZ2VyLnRhZ3MubW9kcyA9IG51bGw7CiAgICBsaW5rcy5tYW5hZ2VyLnRhZ3MuY29sb3IgPSAiY2xlYXIiOwogICAgbGlua3MubWFuYWdlci50YWdzLmZvcm0gPSBudWxsOwogICAgCiAgICBzaG91dCgnYWJUcmFja01lbnVSZXNldCcpO2A7CgogICAgY3JlYXRlKG1lbnVCdXR0b24pOwp9JwDg4eaACfZ9D2Jhc2VBQlRyYWNrTWVudQIEAODh5oAJtaAB1QLwn6esW3sib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudXBkYXRlVHJhY2tEdXJhdGlvbigpOyIsICJmb3JtQWRkcmVzcyI6ICJhdl90aW1lciIsICJsYWJlbCI6ICJkdXJhdGlvbiJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLm9uQ2xpY2soe21lbnVUeXBlOiAnZWFzaW5nJ30pOyIsICJmb3JtQWRkcmVzcyI6ICJ0cmVuZGluZ19mbGF0IiwgImxhYmVsIjogImVhc2luZyB0eXBlIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIub25DbGljayh7bWVudVR5cGU6ICdtb2RlJ30pOyIsICJmb3JtQWRkcmVzcyI6ICJ0cmVuZGluZ191cCIsICJsYWJlbCI6ICJlYXNpbmcgbW9kZSJ9XScA4OHmgAn2fRN1cGRhdGVUcmFja0R1cmF0aW9uAgQA4OHmgAmJowGiAUBzaG91dCgiYWJUcmFja01lbnVSZXNldCIpOwoKbGV0IGlucHV0ID0gYXdhaXQgb3Muc2hvd0lucHV0KHRhZ3MuZHVyYXRpb24sIHsKICAgIHRpdGxlOiAiZHVyYXRpb24iCn0pOwoKaWYgKGlucHV0ICYmICFpc05hTihpbnB1dCkpCnsKICAgIHRhZ3MuZHVyYXRpb24gPSBpbnB1dDsKfScA4OHmgAn2fRFlYXNpbmdBQlRyYWNrTWVudQIEAODh5oAJrKQB7gnwn6esW3sib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAibGluZWFyIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAicXVhZHJhdGljIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiY3ViaWMifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWJUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJxdWFydGljIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAicXVpbnRpYyJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogInNpbnVzb2lkYWwifSwKeyJvbkNsaWNrIjogIkAgbGlua3MubWFuYWdlci50YWdzLmVhc2luZ1R5cGUgPSB0YWdzLmxhYmVsOyBzaG91dCgnYWJUcmFja01lbnVSZXNldCcpOyIsICJmb3JtQWRkcmVzcyI6ICJhcnJvd19yaWdodCIsICJsYWJlbCI6ICJleHBvbmVudGlhbCJ9LAp7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nVHlwZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogImNpcmN1bGFyIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdUeXBlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiZWxhc3RpYyJ9XScA4OHmgAn2fQ9tb2RlQUJUcmFja01lbnUCBADg4eaACZmuAZoD8J+nrFt7Im9uQ2xpY2siOiAiQCBsaW5rcy5tYW5hZ2VyLnRhZ3MuZWFzaW5nTW9kZSA9IHRhZ3MubGFiZWw7IHNob3V0KCdhYlRyYWNrTWVudVJlc2V0Jyk7IiwgImZvcm1BZGRyZXNzIjogImFycm93X3JpZ2h0IiwgImxhYmVsIjogImluIn0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdNb2RlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAib3V0In0sCnsib25DbGljayI6ICJAIGxpbmtzLm1hbmFnZXIudGFncy5lYXNpbmdNb2RlID0gdGFncy5sYWJlbDsgc2hvdXQoJ2FiVHJhY2tNZW51UmVzZXQnKTsiLCAiZm9ybUFkZHJlc3MiOiAiYXJyb3dfcmlnaHQiLCAibGFiZWwiOiAiaW5vdXQifV0nAODh5oAJ9n0TYXBwbHlNb2RUb1RyYWNrTm9kZQIEAODh5oAJsrEB9QFAbGV0IGJvdE1vZCA9IHRoYXQuZHJhZ0JvdC50YWdzLm1vZHM7Cgp0YWdzLm1vZHMgPSBib3RNb2Q7CnRhZ3MuY29sb3IgPSB0YWdzLnN0cm9rZUNvbG9yOwp0YWdzLmZvcm0gPSAic3ByaXRlIjsKdGFncy5mb3JtQWRkcmVzcyA9ICJodHRwczovL2J1aWxkZXItbHRtLWZpbGVzLnMzLmFtYXpvbmF3cy5jb20vYjYzNTJlZGI4ODU5OGExOTY5YTY0OGY3ZGQ2ZDQxODIzM2VmMTE1OWJkNzhiNzM3Y2YyMGEzZGE1NDA1ZDFjNC5wbmciOycA4OHmgAn2fQ9hYk1lbnVTb3J0T3JkZXICBADg4eaACaizAQEyJwEEYm90cyRlYjc1ZjU1YS0yYmI5LTQzNzItYmY4Yy1jY2JhYzg2MzkwZmYBJwDg4eaACaqzAQVjb2xvcgIEAODh5oAJq7MBByM3QjY0RkYnAODh5oAJqrMBCWRpbWVuc2lvbgIEAODh5oAJs7MBBGhvbWUnAODh5oAJqrMBBGZvcm0CBADg4eaACbizAQNoZXgoAODh5oAJqrMBBXNjYWxlAX0CJwDg4eaACaqzAQZzY2FsZVoCBADg4eaACb2zAQQwLjc1JwDg4eaACaqzAQdvbkNsaWNrAgQA4OHmgAnCswEaQHRoaXNCb3Qub3BlblBvcnRhbCh0aGF0KTsnAODh5oAJqrMBDm9uUG9pbnRlckVudGVyAgQA4OHmgAndswETQG1hc2tzLnNjYWxlID0gMi4xOycA4OHmgAmqswELb25Ecm9wRW50ZXICBADg4eaACfGzAWhAaWYgKHRoYXQuZHJhZ0JvdC5pZCAhPSB0aGlzQm90LmlkKSAvL01BWUJFIE1BS0UgQSBXQVkgRk9SIEFCIFRPIE5PVCBJTlRFUkFDVAp7CiAgICB0aGlzQm90Lm9uQ2xpY2soKTsKfScA4OHmgAmqswEGc3lzdGVtAgQA4OHmgAnatAERYWIuZmFjdG9yeS5wb3J0YWwnAODh5oAJqrMBDW9uUG9pbnRlckV4aXQCBADg4eaACey0ARRAbWFza3Muc2NhbGUgPSBudWxsOygA4OHmgAmqswEMYWJCb3RWZXJzaW9uAX0NJwDg4eaACaqzAQlhYkZhY3RvcnkCBADg4eaACYK1AQR0cnVlJwDg4eaACaqzAQhhYklnbm9yZQIEAODh5oAJh7UBBHRydWUnAODh5oAJqrMBC3Rvb2xNYW5hZ2VyAgQA4OHmgAmMtQEo8J+UlzE0ZTFmZGFjLWNmZDctNGU3ZS1iZGQxLTk2N2E0MDg1YTc1NScA4OHmgAmqswEJbGlzdGVuaW5nAgQA4OHmgAmztQEFZmFsc2UnAODh5oAJqrMBC2ZhY3RvcnlJY29uAgQA4OHmgAm5tQEFdG9waWMnAODh5oAJqrMBCm9wZW5Qb3J0YWwCBADg4eaACb+1AaUwQGNvbnN0IGN1cnJlbnREaW0gPSBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgPyBjb25maWdCb3QudGFncy5tYXBQb3J0YWwgOiBjb25maWdCb3QudGFncy5ncmlkUG9ydGFsOwpjb25zdCBhID0gTWF0aC5QSSAvIDY7CmNvbnN0IGhleFNjYWxlID0gNTsKY29uc3QgcG9ydGFsRGltZW5zaW9uID0gdGFncy5wb3J0YWxBZGRyZXNzOwoKbGV0IGhleCA9IHt9OwpsZXQgaGV4TnVtID0gMTsKCmhleC5zcGFjZSA9ICJ0ZW1wTG9jYWwiOwpoZXgucG9ydGFsUmVzZXQgPSAiQCBkZXN0cm95KHRoaXNCb3QpOyI7CmhleC5mb3JtID0gImhleCI7CmhleC5jb2xvciA9IHRhZ3MuY29sb3I7CmhleC5vcmlnaW4gPSB0aGlzQm90LmlkOwpoZXgucG9ydGFsSGV4ID0gdHJ1ZTsKaGV4W2N1cnJlbnREaW0rIloiXSA9IC0xOwpoZXguYW5jaG9yUG9pbnQgPSAidG9wIjsKaGV4LnNjYWxlID0gNC41OwpoZXhbY3VycmVudERpbV0gPSB0cnVlOwpoZXgucG9pbnRhYmxlID0gZmFsc2U7CmhleC5zY2FsZVogPSAwLjAxOwpoZXguYW5pbWF0ZSA9IGBAIGFuaW1hdGVUYWcodGhpc0JvdCwgInNjYWxlIiwgewogICAgZnJvbVZhbHVlOiB0YWdzLnNjYWxlLAogICAgdG9WYWx1ZTogW3RoYXRdLAogICAgZWFzaW5nOiB7CiAgICAgICAgdHlwZTogInF1YWRyYXRpYyIsCiAgICAgICAgbW9kZTogIm91dCIKICAgIH0sCiAgICBkdXJhdGlvbjogMC4zCn0pLmNhdGNoKGUgPT4geyB9KTtgOwoKbGV0IGRpbWVuc2lvbkJvdHMgPSBnZXRCb3RzKHBvcnRhbERpbWVuc2lvbiwgdHJ1ZSk7CmxldCByaW5nTnVtOwoKaWYgKGRpbWVuc2lvbkJvdHMubGVuZ3RoID4gMCkKewogICAgbGV0IHhQYXJhbWV0ZXIgPSBkaW1lbnNpb25Cb3RzLnNvcnQoKGEsIGIpPT4gTWF0aC5hYnMoYi50YWdzW3BvcnRhbERpbWVuc2lvbisiWCJdKSAtIE1hdGguYWJzKGEudGFnc1twb3J0YWxEaW1lbnNpb24rIlgiXSkpWzBdLnRhZ3NbcG9ydGFsRGltZW5zaW9uKyJYIl07CiAgICBsZXQgeVBhcmFtZXRlciA9IGRpbWVuc2lvbkJvdHMuc29ydCgoYSwgYik9PiBNYXRoLmFicyhiLnRhZ3NbcG9ydGFsRGltZW5zaW9uKyJZIl0pIC0gTWF0aC5hYnMoYS50YWdzW3BvcnRhbERpbWVuc2lvbisiWSJdKSlbMF0udGFnc1twb3J0YWxEaW1lbnNpb24rIlkiXTsKCgogICAgbGV0IGRpc3RhbmNlID0gTWF0aC5mbG9vcihNYXRoLnNxcnQoTWF0aC5wb3coTWF0aC5mbG9vcihNYXRoLmFicyh4UGFyYW1ldGVyIC0gMCkpLCAyKSArIE1hdGgucG93KE1hdGguZmxvb3IoTWF0aC5hYnMoeVBhcmFtZXRlciAtIDApKSwgMikpIC8gaGV4U2NhbGUpICsgMTsKICAgIHJpbmdOdW0gPSA2ICogKGRpc3RhbmNlKSooZGlzdGFuY2UrMSkvMiArIDE7CgogICAgaWYgKHJpbmdOdW0gPiAzOTcpCiAgICB7CiAgICAgICAgcmluZ051bSA9IDM5NzsKICAgIH0KfQplbHNlCnsKICAgIHJpbmdOdW0gPSA3Owp9CgptYXNrcy5zY2FsZSA9IDAuMTsKbWFza3MucG9pbnRhYmxlID0gZmFsc2U7CgpsZXQgcHJldmlvdXNIZXg7Cgpmb3IgKGxldCBpID0gMDsgaSA8IHJpbmdOdW07IGkrKykKewogICAgaWYgKGkgIT0gMCkKICAgIHsKICAgICAgICBsZXQgZW1wdHlQb3MgPSBhd2FpdCBjaGVja0hleFBvcyhwcmV2aW91c0hleCwgY3VycmVudERpbSk7CgogICAgICAgIGlmIChlbXB0eVBvcyA9PSAwIHx8IGVtcHR5UG9zID09IDMpCiAgICAgICAgewogICAgICAgICAgICB2YXIgeCA9IHByZXZpb3VzSGV4LnRhZ3NbY3VycmVudERpbSsiWCJdOwogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIGZsaXBYID0gMTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChlbXB0eVBvcyA9PSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgZmxpcFkgPSAwOwogICAgICAgICAgICAgICAgdmFyIHkgPSBwcmV2aW91c0hleC50YWdzW2N1cnJlbnREaW0rIlkiXSArIGhleFNjYWxlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGZsaXBZID0gLTE7CiAgICAgICAgICAgICAgICB2YXIgeSA9IHByZXZpb3VzSGV4LnRhZ3NbY3VycmVudERpbSsiWSJdIC0gaGV4U2NhbGUvMjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICB2YXIgeCA9IHByZXZpb3VzSGV4LnRhZ3NbY3VycmVudERpbSsiWCJdICsgKGhleFNjYWxlICogMC44NSk7CiAgICAgICAgICAgIHZhciB5ID0gcHJldmlvdXNIZXgudGFnc1tjdXJyZW50RGltKyJZIl07CgogICAgICAgICAgICBpZiAoZW1wdHlQb3MgPT0gMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGZsaXBYID0gMTsKICAgICAgICAgICAgICAgIHZhciBmbGlwWSA9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZW1wdHlQb3MgPT0gMikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIGZsaXBYID0gMTsKICAgICAgICAgICAgICAgIHZhciBmbGlwWSA9IC0xOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGVtcHR5UG9zID09IDQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHggPSBwcmV2aW91c0hleC50YWdzW2N1cnJlbnREaW0rIlgiXSAtIChoZXhTY2FsZSAqIDAuODUpOwoKICAgICAgICAgICAgICAgIHZhciBmbGlwWCA9IDE7CiAgICAgICAgICAgICAgICB2YXIgZmxpcFkgPSAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlbXB0eVBvcyA9PSA1KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB4ID0gcHJldmlvdXNIZXgudGFnc1tjdXJyZW50RGltKyJYIl0gLSAoaGV4U2NhbGUgKiAwLjg1KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGZsaXBYID0gMTsKICAgICAgICAgICAgICAgIHZhciBmbGlwWSA9IDE7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGhleFtjdXJyZW50RGltKyJYIl0gPSB4ICogZmxpcFg7CiAgICAgICAgaGV4W2N1cnJlbnREaW0rIlkiXSA9IHkgKyBmbGlwWSAqIGhleFNjYWxlLzI7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgaGV4W2N1cnJlbnREaW0rIlgiXSA9IHRhZ3NbY3VycmVudERpbSsiWCJdOwogICAgICAgIGhleFtjdXJyZW50RGltKyJZIl0gPSB0YWdzW2N1cnJlbnREaW0rIlkiXTsKICAgIH0KCiAgICBoZXguaGV4TnVtID0gaGV4TnVtOwoKICAgIGxldCBuZWFyYnlQb3J0YWxCb3QgPSBnZXRCb3QoYnlNb2Qoey8vYmVpbmcgbWlycm9yZWQgcmlnaHQgbm93CiAgICAgICAgW3BvcnRhbERpbWVuc2lvbl06IHRydWUsCiAgICAgICAgW3BvcnRhbERpbWVuc2lvbisiWCJdOiB4ID0+IHggPiAoaGV4W2N1cnJlbnREaW0rIlgiXSAtIHRhZ3NbY3VycmVudERpbSsiWCJdKSAtIGhleFNjYWxlICYmIHggPCAoaGV4W2N1cnJlbnREaW0rIlgiXSAtIHRhZ3NbY3VycmVudERpbSsiWCJdKSArIGhleFNjYWxlLAogICAgICAgIFtwb3J0YWxEaW1lbnNpb24rIlkiXTogeSA9PiB5ID4gKGhleFtjdXJyZW50RGltKyJZIl0gLSB0YWdzW2N1cnJlbnREaW0rIlkiXSkgLSBoZXhTY2FsZSAmJiB5IDwgKGhleFtjdXJyZW50RGltKyJZIl0gLSB0YWdzW2N1cnJlbnREaW0rIlkiXSkgKyBoZXhTY2FsZQogICAgfSkpOwoKICAgIGlmIChuZWFyYnlQb3J0YWxCb3QgfHwgaSA8IDcpCiAgICB7CiAgICAgICAgaGV4Lm9uUG9ydGFsQ29tcGxldGUgPSBmYWxzZTsKICAgICAgICBoZXguY29sb3IgPSB0YWdzLmNvbG9yOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIGhleC5vblBvcnRhbENvbXBsZXRlID0gdHJ1ZTsKICAgICAgICBoZXguY29sb3IgPSAiY2xlYXIiOwogICAgfQoKICAgIGhleE51bSsrOwoKICAgIHByZXZpb3VzSGV4ID0gYXdhaXQgY3JlYXRlKGhleCk7Cn0KCmxldCBub25Qb3J0YWxIZXhlcyA9IGdldEJvdHMoIm9uUG9ydGFsQ29tcGxldGUiLCB0cnVlKTsKbGV0IHBvcnRhbEhleGVzID0gZ2V0Qm90cygib25Qb3J0YWxDb21wbGV0ZSIsIGZhbHNlKTsKCmZvciAobGV0IG4gPSAwOyBuIDwgbm9uUG9ydGFsSGV4ZXMubGVuZ3RoOyBuKyspCnsKICAgIGRlc3Ryb3kobm9uUG9ydGFsSGV4ZXNbbl0pOwp9Cgp3aGlzcGVyKHBvcnRhbEhleGVzLCAiYW5pbWF0ZSIsIGhleFNjYWxlKTsKCm1hc2tzLmZvcm0gPSAicG9ydGFsIjsKbWFza3MuZm9ybUFkZHJlc3MgPSB0YWdzLnBvcnRhbEFkZHJlc3M7Cm1hc2tzLnBvcnRhbEhleEJvdHMgPSBnZXRMaW5rKHBvcnRhbEhleGVzKTsKCnRoaXNCb3QucG9ydGFsTWVudSgpOwoKZnVuY3Rpb24gY2hlY2tIZXhQb3MoaGV4LCBkaW1lbnNpb24pCnsKICAgIGxldCBzY2FsZVZhciA9IGhleFNjYWxlLzI7CiAgICBsZXQgeFBvcyA9IGhleC50YWdzW2RpbWVuc2lvbisiWCJdOwogICAgbGV0IHlQb3MgPSBoZXgudGFnc1tkaW1lbnNpb24rIlkiXTsKICAgIGxldCBoZXhNYXRoVmFyID0gTWF0aC5QSSAvIDY7CiAgICBsZXQgeFNwYWNpbmdQbHVzID0geFBvcyArIHNjYWxlVmFyICsgKDEgKyBNYXRoLmNvcyhoZXhNYXRoVmFyKSk7CiAgICBsZXQgeFNwYWNpbmdNaW51cyA9IHhQb3MgLSAoc2NhbGVWYXIgKyAoMSArIE1hdGguY29zKGhleE1hdGhWYXIpKSk7CiAgICBsZXQgeVNwYWNpbmdUb3AgPSBNYXRoLmZsb29yKGhleC50YWdzLnNjYWxlKSArIHlQb3M7CiAgICBsZXQgeVNwYWNpbmdVcCA9IHlQb3MgKyBzY2FsZVZhciAqIE1hdGguc2luKGhleE1hdGhWYXIpOwogICAgbGV0IHlTcGFjaW5nRG93biA9IHlQb3MgLSBzY2FsZVZhciAqIE1hdGguc2luKGhleE1hdGhWYXIpOwogICAgbGV0IHlTcGFjaW5nQm90dG9tID0geVBvcyAtIE1hdGguZmxvb3IoaGV4LnRhZ3Muc2NhbGUpOwogICAgbGV0IHhDaGVjayA9IFt4UG9zLCB4U3BhY2luZ1BsdXMsIHhTcGFjaW5nUGx1cywgeFBvcywgeFNwYWNpbmdNaW51cywgeFNwYWNpbmdNaW51c107CiAgICBsZXQgeUNoZWNrID0gW3lTcGFjaW5nVG9wLCB5U3BhY2luZ1VwLCB5U3BhY2luZ0Rvd24sIHlTcGFjaW5nQm90dG9tLCB5U3BhY2luZ0Rvd24sIHlTcGFjaW5nVXBdOwogICAgbGV0IHRvdGFsTmVpZ2hib3JzID0gMDsKICAgIGxldCBuZWlnaGJvckFycmF5ID0gW10KCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykKICAgIHsKICAgICAgICBsZXQgaGV4TmVpZ2hib3IgPSBnZXRCb3QoYnlNb2QoewogICAgICAgICAgICBbZGltZW5zaW9uXTogdHJ1ZSwgCiAgICAgICAgICAgIFtkaW1lbnNpb24rIlgiXTogeCA9PiB4ID4geENoZWNrW2ldIC0gc2NhbGVWYXIgJiYgeCA8IHhDaGVja1tpXSArIHNjYWxlVmFyLCAKICAgICAgICAgICAgW2RpbWVuc2lvbisiWSJdOiB5ID0+IHkgPiB5Q2hlY2tbaV0gLSBzY2FsZVZhciAmJiB5IDwgeUNoZWNrW2ldICsgc2NhbGVWYXIsCiAgICAgICAgICAgIG9yaWdpbjogaGV4LnRhZ3Mub3JpZ2luLAogICAgICAgICAgICBwb3J0YWxIZXg6IHRydWUKICAgICAgICB9KSk7CgogICAgICAgIGlmICghaGV4TmVpZ2hib3IpCiAgICAgICAgewogICAgICAgICAgICBuZWlnaGJvckFycmF5LnB1c2goImVtcHR5Iik7CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIG5laWdoYm9yQXJyYXkucHVzaChoZXhOZWlnaGJvcik7CiAgICAgICAgICAgIHRvdGFsTmVpZ2hib3JzKys7CiAgICAgICAgfQogICAgfQoKICAgIGlmICh0b3RhbE5laWdoYm9ycyA9PSAwKQogICAgewogICAgICAgIHZhciB0YXJnZXQgPSAwOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIHZhciBlbXB0eSA9IGZhbHNlOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDY7IGorKykKICAgICAgICB7CiAgICAgICAgICAgIGxldCBuZXh0RW1wdHkgPSBuZWlnaGJvckFycmF5W2pdOwoKICAgICAgICAgICAgaWYgKG5leHRFbXB0eSA9PSAiZW1wdHkiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBlbXB0eSA9IHRydWU7CgogICAgICAgICAgICAgICAgaWYgKGogPT0gNSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gNTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZihuZXh0RW1wdHkgIT0gImVtcHR5IiAmJiBlbXB0eSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGotMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHRhcmdldDsKfScA4OHmgAmqswEJcG9pbnRhYmxlAgQA4OHmgAnl5QEEdHJ1ZScA4OHmgAmqswELb25HcmlkQ2xpY2sCBADg4eaACerlAZMBQGlmICh0YWdzLmZvcm0gIT0gInBvcnRhbCIpCnsKICAgIHJldHVybjsKfQoKbGV0IHBvcnRhbENsaWNrID0gdGhpc0JvdC5wb3J0YWxQb3NpdGlvbkNoZWNrKHRoYXQpOwoKaWYgKCFwb3J0YWxDbGljaykKewogICAgdGhpc0JvdC5jbG9zZVBvcnRhbCgpOwp9JwDg4eaACaqzAQtjbG9zZVBvcnRhbAIEAODh5oAJ/uYBakB3aGlzcGVyKGxpbmtzLnBvcnRhbEhleEJvdHMsICJwb3J0YWxSZXNldCIpOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSBudWxsOwoKY2xlYXJUYWdNYXNrcyh0aGlzQm90KTsnAODh5oAJqrMBCnBvcnRhbE1lbnUCBADg4eaACennAeIHQHNob3V0KCJhYlBvcnRhbE1lbnVSZXNldCIpOwoKY29uZmlnQm90Lm1hc2tzLm1lbnVQb3J0YWwgPSAiYWJQb3J0YWxNZW51IjsKCmxldCBtZW51QnV0dG9uID0ge307CgptZW51QnV0dG9uLnNwYWNlID0gInRlbXBMb2NhbCI7Cm1lbnVCdXR0b24uYWJQb3J0YWxNZW51ID0gdHJ1ZTsKbWVudUJ1dHRvbi5hYlBvcnRhbE1lbnVSZXNldCA9ICJAIGRlc3Ryb3kodGhpc0JvdCk7IjsKbWVudUJ1dHRvbi5jb2xvciA9IHRhZ3MuY29sb3I7Cm1lbnVCdXR0b24ubWFuYWdlciA9IGdldExpbmsodGhpc0JvdCk7Cm1lbnVCdXR0b24ubWVudUl0ZW1TdHlsZSA9IGDwn6esIHsiYm9yZGVyLXJhZGl1cyI6ICI5cHggOXB4IDlweCA5cHgiLCAibWFyZ2luLXRvcCI6ICI2cHgifWA7Cm1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAiY2VudGVyIjsKbWVudUJ1dHRvbi5sYWJlbCA9IHRhZ3MucG9ydGFsQWRkcmVzczsKCmNyZWF0ZShtZW51QnV0dG9uKTsKCm1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiZWRpdCI7Cm1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAibGVmdCI7Cm1lbnVCdXR0b24ubGFiZWwgPSAiZWRpdCBkaW1lbnNpb24iOwptZW51QnV0dG9uLnRhcmdldCA9IHRoaXNCb3QuaWQ7Cm1lbnVCdXR0b24ub25DbGljayA9IGBAIGxpbmtzLm1hbmFnZXIucG9ydGFsQ2hhbmdlRGltZW5zaW9uKCk7YDsKCmNyZWF0ZShtZW51QnV0dG9uKTsKCm1lbnVCdXR0b24uZm9ybUFkZHJlc3MgPSAiYXJyb3dfZm9yd2FyZCI7Cm1lbnVCdXR0b24ubGFiZWxBbGlnbm1lbnQgPSAibGVmdCI7Cm1lbnVCdXR0b24ubGFiZWwgPSAiZ28gdG8gZGltZW5zaW9uIjsKbWVudUJ1dHRvbi50YXJnZXQgPSB0YWdzLmZvcm1BZGRyZXNzOwptZW51QnV0dG9uLm9uQ2xpY2sgPSBgQCBzaG91dCgiYWJQb3J0YWxNZW51UmVzZXQiKTsKCmNvbmZpZ0JvdC50YWdzLmdyaWRQb3J0YWwgPSBsaW5rcy5tYW5hZ2VyLnRhZ3MucG9ydGFsQWRkcmVzcztgOwoKY3JlYXRlKG1lbnVCdXR0b24pOycA4OHmgAmqswEIb25DcmVhdGUCBADg4eaACcrvAT5AaWYgKCF0YWdzLnBvcnRhbEFkZHJlc3MpCnsKICAgIHRhZ3MucG9ydGFsQWRkcmVzcyA9IHV1aWQoKTsKfScA4OHmgAmqswETcG9ydGFsUG9zaXRpb25DaGVjawIEAODh5oAJifABpBZAbGV0IGN1cnJlbnREaW0gPSB0aGF0LmRpbWVuc2lvbiA/IHRoYXQuZGltZW5zaW9uIDogdGhhdC50by5kaW1lbnNpb247CmxldCBwb3NZID0gdGhhdC5wb3NpdGlvbiA/IHRoYXQucG9zaXRpb24ueSA6IHRoYXQudG8ueTsKbGV0IHBvc1ggPSB0aGF0LnBvc2l0aW9uID8gdGhhdC5wb3NpdGlvbi54IDogdGhhdC50by54OwpsZXQgcG9ydGFsSGV4Qm90cyA9IGxpbmtzLnBvcnRhbEhleEJvdHM7CmxldCBwb3J0YWxFbnRyeSA9IGZhbHNlOwoKZm9yIChsZXQgaSA9IDA7IGkgPCBwb3J0YWxIZXhCb3RzLmxlbmd0aDsgaSsrKSAKewogICAgbGV0IGN1cnJlbnRIZXggPSBwb3J0YWxIZXhCb3RzW2ldOwogICAgbGV0IG1heFkgPSBjdXJyZW50SGV4LnRhZ3NbY3VycmVudERpbSArICJZIl0gKyBjdXJyZW50SGV4LnRhZ3Muc2NhbGUgLyAyOwogICAgbGV0IG1pblkgPSBjdXJyZW50SGV4LnRhZ3NbY3VycmVudERpbSArICJZIl0gLSBjdXJyZW50SGV4LnRhZ3Muc2NhbGUgLyAyOwoKICAgIGlmIChwb3NZIDw9IG1heFkgJiYgcG9zWSA+PSBtaW5ZKSB7CgogICAgICAgIC8vU0VUVVAgQSBDSEVDSyBGT1IgV0hFTiBYID0gREVDSyBYCiAgICAgICAgbGV0IG1heFggPSBjdXJyZW50SGV4LnRhZ3NbY3VycmVudERpbSArICJYIl0gKyBjdXJyZW50SGV4LnRhZ3Muc2NhbGUgLyAyICsgMC41OwogICAgICAgIGxldCBtaW5YID0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWCJdIC0gY3VycmVudEhleC50YWdzLnNjYWxlIC8gMiAtIDAuNTsKCiAgICAgICAgaWYgKHBvc1ggPD0gbWF4WCAmJiBwb3NYID49IG1pblgpIHsKICAgICAgICAgICAgaWYgKHBvc1ggPD0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWCJdICsgMC4zICYmIHBvc1ggPj0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWCJdIC0gMC4zKS8vbm90IHBlcmZlY3QgcGFydCBvZiBhbGcKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKHBvc1kgPj0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWSJdIC0gY3VycmVudEhleC50YWdzLnNjYWxlIC8gMiAmJiBwb3NZIDw9IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlkiXSArIGN1cnJlbnRIZXgudGFncy5zY2FsZSAvIDIpIAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHBvcnRhbEVudHJ5ID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBtaWRYID0gY3VycmVudEhleC50YWdzW2N1cnJlbnREaW0gKyAiWCJdOwogICAgICAgICAgICBsZXQgbWlkWSA9IGN1cnJlbnRIZXgudGFnc1tjdXJyZW50RGltICsgIlkiXTsKICAgICAgICAgICAgY29uc3QgYSA9IE1hdGgucG93KGN1cnJlbnRIZXgudGFncy5zY2FsZSAvIDIsIDIpOwogICAgICAgICAgICBjb25zdCBiID0gTWF0aC5wb3coYSAvIDIsIDIpOwogICAgICAgICAgICBjb25zdCBtYXhEaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLmFicyhhIC0gYikpOwogICAgICAgICAgICBsZXQgc2xvcGU7CgogICAgICAgICAgICBpZiAoKHBvc1ggPiBtaWRYICYmIHBvc1kgPiBtaWRZKSB8fCAocG9zWCA8IG1pZFggJiYgcG9zWSA8IG1pZFkpKSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc2xvcGUgPSAobWF4WSAtIG1pblkpIC8gKG1heFggLSBtaW5YKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChwb3NYID4gbWlkWCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzbG9wZSA9IChtYXhYIC0gbWluWCkgLyAobWF4WSAtIG1pblkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBzbG9wZSA9IDEgLyAobWF4WCAtIG1pblgpIC8gKG1heFkgLSBtaW5ZKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGMxID0gbWF4WSAtIChtYXhYICogc2xvcGUpOwogICAgICAgICAgICBsZXQgYzIgPSBwb3NZIC0gKHBvc1ggKiBzbG9wZSk7CiAgICAgICAgICAgIGxldCBhY3R1YWxEaXN0YW5jZSA9IE1hdGguYWJzKGMyIC0gYzEpIC8gTWF0aC5zcXJ0KE1hdGgucG93KHNsb3BlLCAyKSArIDEpOwoKICAgICAgICAgICAgaWYgKGFjdHVhbERpc3RhbmNlIDw9IG1heERpc3RhbmNlKSAKICAgICAgICAgICAgeyAgIAogICAgICAgICAgICAgICAgcG9ydGFsRW50cnkgPSB0cnVlOwoKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vTk9UIFNVUkUgT0YgVEhJUyBDT0RFUyBORUVEPwogICAgLy8gaWYgKHRoYXQucG9ydGFsSUQpIAogICAgLy8gewogICAgLy8gICAgIGlmICh0aGF0LnBvcnRhbElEID09IGN1cnJlbnRIZXgudGFncy5vcmlnaW4pIAogICAgLy8gICAgIHsKICAgIC8vICAgICAgICAgcG9ydGFsRW50cnkgPSB0cnVlOwoKICAgIC8vICAgICAgICAgYnJlYWs7CiAgICAvLyAgICAgfQogICAgLy8gfQp9CgovLyBsZXQgcG9ydGFsQm90cyA9IGdldEJvdHMoInBvcnRhbEhleEJvdHMiKTsvL0NIRUNLIFRPIFNFRSBJRiBUSEVSRSBBUkUgT1RIRVIgT1BFTiBQT1JUQUwgKG5vdCBzdXJlIEkgbmVlZCB0aGlzKQoKLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBwb3J0YWxCb3RzLmxlbmd0aDsgaSsrKSAKLy8gewovLyAgICAgaWYgKHBvcnRhbEJvdHNbaV0uaWQgIT0gdGhpc0JvdC5pZCkgCi8vICAgICB7Ci8vICAgICAgICAgd2hpc3Blcihwb3J0YWxCb3RzW2ldLCAiY2xvc2VQb3J0YWwiKTsKLy8gICAgIH0KLy8gfQoKcmV0dXJuIHBvcnRhbEVudHJ5OycA4OHmgAmqswEMb25BbnlCb3REcm9wAgQA4OHmgAmuhgLVBEBpZiAodGhhdC5kcmFnQm90LmlkID09IHRoaXNCb3QuaWQpCnsKICAgIGNsZWFySW50ZXJ2YWwodGFncy5pbnRlcnZhbCk7CgogICAgbWFza3MuaW50ZXJ2YWwgPSBudWxsOwoKICAgIHJldHVybjsKfQoKaWYgKHRhZ3MuZm9ybSAhPSAicG9ydGFsIikKewogICAgcmV0dXJuOwp9Cgpjb25zdCBjdXJyZW50RGltID0gdGhhdC50by5kaW1lbnNpb247CmNvbnN0IHBvcnRhbERyb3AgPSBhd2FpdCB0aGlzQm90LnBvcnRhbFBvc2l0aW9uQ2hlY2sodGhhdCk7CgppZiAocG9ydGFsRHJvcCkgCnsKICAgIGxldCBuZXdEaW0gPSB0YWdzLnBvcnRhbEFkZHJlc3M7CgogICAgdGhhdC5kcmFnQm90LnRhZ3NbbmV3RGltXSA9IHRydWU7CiAgICB0aGF0LmRyYWdCb3QudGFnc1tuZXdEaW0gKyAiWCJdID0gdGhhdC5kcmFnQm90LnRhZ3NbY3VycmVudERpbSArICJYIl0gLSB0YWdzW2N1cnJlbnREaW0gKyAiWCJdOwogICAgdGhhdC5kcmFnQm90LnRhZ3NbbmV3RGltICsgIlkiXSA9IHRoYXQuZHJhZ0JvdC50YWdzW2N1cnJlbnREaW0gKyAiWSJdIC0gdGFnc1tjdXJyZW50RGltICsgIlkiXTsKICAgIHRoYXQuZHJhZ0JvdC50YWdzW2N1cnJlbnREaW1dID0gbnVsbDsKfScA4OHmgAmqswEGb25EcmFnAgQA4OHmgAmEiwJeQGlmICghdGFncy5pbnRlcnZhbCkKewogICAgbWFza3MuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzQm90LnBvc2l0aW9uQ2hlY2soKSwgMTAwKTsKfScA4OHmgAmqswEVcG9ydGFsQ2hhbmdlRGltZW5zaW9uAgQA4OHmgAnjiwK+AUBjb25zdCBuZXdEaW1lbnNpb24gPSBhd2FpdCBvcy5zaG93SW5wdXQodGFncy5wb3J0YWxBZGRyZXNzLCB7CiAgICB0aXRsZTogImVkaXQgZGltZW5zaW9uIgp9KTsKCmlmICghbmV3RGltZW5zaW9uKQp7CiAgICByZXR1cm47Cn07Cgp0YWdzLnBvcnRhbEFkZHJlc3MgPSBuZXdEaW1lbnNpb247Cgp0aGlzQm90LnBvcnRhbE1lbnUoKTsnAODh5oAJqrMBDXBvc2l0aW9uQ2hlY2sCBADg4eaACaKNAqgMQGxldCBoZWlnaHQgPSBncmlkUG9ydGFsQm90LnRhZ3MucGl4ZWxIZWlnaHQ7CmxldCBib3RUaGlyZCA9IGhlaWdodCAtIChoZWlnaHQgLyA4KTsKbGV0IHBvaW50ZXJZID0gZ3JpZFBvcnRhbEJvdC50YWdzLnBvaW50ZXJQaXhlbFk7CgppZiAocG9pbnRlclkgPiBib3RUaGlyZCkKewogICAgaWYgKGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsICE9IHRhZ3MucG9ydGFsQWRkcmVzcykKICAgIHsKICAgICAgICBjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCA9IHRhZ3MucG9ydGFsQWRkcmVzczsKCiAgICAgICAgbWluaUdyaWRQb3J0YWxCb3QudGFncy5taW5pUG9ydGFsV2lkdGggPSAxOwoKICAgICAgICBtaW5pR3JpZFBvcnRhbEJvdC50YWdzLnBvcnRhbENvbG9yID0gdGFncy5jb2xvcjsKICAgIH0KfQplbHNlCnsKICAgIGlmIChjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCA9PSB0YWdzLnBvcnRhbEFkZHJlc3MpCiAgICB7CiAgICAgICAgY29uZmlnQm90LnRhZ3MubWluaUdyaWRQb3J0YWwgPSBudWxsOwogICAgICAgIG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MucG9ydGFsQ29sb3IgPSBudWxsOwogICAgICAgIG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MubWluaVBvcnRhbFdpZHRoID0gbnVsbDsKICAgIH0KfQoKCgoKLy8gaWYgKHRoYXQuYm90LnRhZ3MucHJpbWl0aXZlSUQpCi8vIHsKLy8gICAgIGlmICh0aGF0LmJvdC50YWdzLnByaW1pdGl2ZUlEID09ICJwb3J0YWwiKQovLyAgICAgewovLyAgICAgICAgIGxldCBwb3J0YWxCb3QgPSB0aGF0LmJvdDsKCi8vICAgICAgICAgY2xlYXJJbnRlcnZhbChwb3J0YWxCb3QubWFza3MuaW50ZXJ2YWwpOwovLyAgICAgICAgIGNsZWFyVGFnTWFza3MocG9ydGFsQm90KTsKCi8vICAgICAgICAgaWYgKHRoYXQudG8uZGltZW5zaW9uICE9IHRoYXQuZnJvbS5kaW1lbnNpb24pCi8vICAgICAgICAgewovLyAgICAgICAgICAgICBpZiAodGhhdC50by5kaW1lbnNpb24gPT0gcG9ydGFsQm90LnRhZ3MucG9ydGFsQWRkcmVzcykKLy8gICAgICAgICAgICAgewovLyAgICAgICAgICAgICAgICAgY29uZmlnQm90LnRhZ3MubWluaUdyaWRQb3J0YWwgPSBwb3J0YWxCb3QudGFncy5wb3J0YWxBZGRyZXNzOwoKLy8gICAgICAgICAgICAgICAgIG1pbmlHcmlkUG9ydGFsQm90LnRhZ3MubWluaVBvcnRhbFdpZHRoID0gMTsKCi8vICAgICAgICAgICAgICAgICBwb3J0YWxCb3QudGFnc1t0aGF0LnRvLmRpbWVuc2lvbiArICJYIl0gPSAwOwovLyAgICAgICAgICAgICAgICAgcG9ydGFsQm90LnRhZ3NbdGhhdC50by5kaW1lbnNpb24gKyAiWSJdID0gMDsKLy8gICAgICAgICAgICAgfQovLyAgICAgICAgICAgICBlbHNlIGlmIChjb25maWdCb3QudGFncy5taW5pR3JpZFBvcnRhbCA9PSBwb3J0YWxCb3QudGFncy5wb3J0YWxBZGRyZXNzICYmIHRoYXQudG8uZGltZW5zaW9uICE9IHBvcnRhbEJvdC50YWdzLnBvcnRhbEFkZHJlc3MpCi8vICAgICAgICAgICAgIHsKLy8gICAgICAgICAgICAgICAgIGNvbmZpZ0JvdC50YWdzLm1pbmlHcmlkUG9ydGFsID0gbnVsbDsKLy8gICAgICAgICAgICAgfQovLyAgICAgICAgIH0KLy8gICAgIH0KLy8gfScA4OHmgAmqswEPYWJNZW51U29ydE9yZGVyAgQA4OHmgAnLmQIBMAA="}]}